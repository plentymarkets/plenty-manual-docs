= Event procedures
:lang: en
include::{includedir}/_header.adoc[]
:position: 20
:url: automation/event-procedures
:id: WA2EIQR
:keywords: event, event procedure, automation, event action, event group, filter group, procedure group, activate event procedure, deactivate event procedure
:author: team-order-payment

Order processing mostly consists of routine tasks. To a large extent, you can let your plentymarkets system take care of these tasks. In particular, sending emails to your customer is a time-consuming tasks, but nonetheless a vital aspect of a service- and customer-oriented online shop.
With the *Event procedures*, plentymarkets provides you with an efficient tool for setting up such automatic processes that are reliably managed by your plentymarkets system. +
The basic principle of event procedures is simple: Certain *events* that occur in your online shop trigger specific *procedures*. You can use this for example to send order confirmations. To automatically send an order confirmation to the customer as soon as a new order is placed, you can create an event procedure in which the event *New order* is followed by the procedure *Send email*. With the help of the *Filter* function, you can define for which of the new orders emails should be sent.

Creating an event procedure always consists of the following steps:

. <<#100, Creating an event procedure>>
. <<#110, Selecting an event>>
. <<#120, Adding one or multiple filters>>
. Determining which <<#130, Procedures>> should be carried out by the system once the selected event takes place
. <<#200, Activating>> the event procedure

Once an event procedure was applied to an order, the same event procedure is not applied again to the same order. On the other hand, during order processing several different event procedures can be applied to the same order.

For practical examples of how to use event procedures effectively, refer to the <<automation/best-practices-automation#, Practical example: Procedure manager and event procedures>> page of the manual.

[#100]
== Creating a new event procedure

Go to *Setup » Orders » Events* to create a new event procedure. In this menu, you can also view the already existing event procedures and <<automation/event-procedures#300, edit>> them.

[.instruction]
Creating a new event procedure:

. Go to *Setup » Orders » Events*.
. Click on *Add event procedure* (icon:plus-square[role="green"]) to create a new event procedure. +
→ The *Create new event procedure* window opens.
. Enter a distinct *Name* for the event procedure.
. Select an <<<<automation/event-procedures#110, Event>>.
. *Save* (icon:save[role="green"]) the settings. +
→ The event procedure is created.

The event procedure is created but not activated yet. Only activate the event procedure when you are done configuring it. For this, select <<automation/event-procedures#120, filters>> and <<automation/event-procedures#130, procedures>>.

[#110]
=== Selecting an event

The first steps consists of selecting an *Event* that triggers the *new event procedure*. The available events are described below according to their event groups.

[#events-order-generation]
[discrete]
==== Event group Order generation

[[table-event-procedures-event-group-order-generation]]
[cols="1,3"]
|====
|Event |Explanation

|<<orders/managing-orders#, New order>> +
*New incomplete order*, +
<<orders/managing-orders#300, New delivery order>>, +
<<orders/managing-orders#400, New return>>, +
*New return (by customer)*, +
<<orders/managing-orders#500, New credit note>> +
<<orders/managing-orders#700, New repair>>, +
<<orders/managing-orders#800, New multi-order>>, +
<<order-processing/orders/managing-orders#850, New multi credit note>>

|The event procedure is triggered when one of the listed order types is created. +
The event *New return (by customer)* refers to returns that are initiated by customers in the My account area of the online shop.

|====

[#events-order-change]
[discrete]
==== Event group Order change

[[table-event-procedures-event-group-order-change]]
[cols="1,3"]
|====
|Event |Explanation

| *Status change*
|The event procedure is triggered when the <<orders/managing-orders#1200, order status>> of an order changes. Select the appropriate order status from the drop-down list.

| *Package number*
|The event procedure is triggered when a package number is provided for an order.

| *Outgoing items booked*
|The event procedure is triggered when outgoing items are booked automatically or manually.

| *Order note*
|The event procedure is triggered when an order note is added to an order.

| *Order note from customer*
|The event procedure is triggered when a customer leaves new information for you during order processing.

| *Order extended by customer*
|The event procedure is triggered when a customer extends the order during the order process.

| *Manual warehouse change for stock units*
|The event procedure is triggered when the warehouse of a variation is changed manually in an order.

| *Change of order type*
|The event procedure is triggered when the order type of an order is changed. You can choose between *Order* and *Advance order* for this event.

| *Change of repair status*
|The event procedure is triggered when the <<orders/managing-orders#710, repair status>> of an order changes. You can choose between the created repair statuses for this event.

| *Change of payment method*
|The event procedure is triggered when the <<payment#, payment method>> of an order is changed.

| *New OpenTrans order*
|The event procedure is triggered when a new OpenTrans order is created.

|====

[#events-documents]
[discrete]
==== Event group Documents

[[table-event-procedures-event-group-documents]]
[cols="1,3"]
|====
|Event |Explanation

|*[Document] generated*
|The event procedure is triggered when one of the documents listed is generated. Note that the corresponding <<orders/order-documents#300, document template>> has to be set up before the document can be generated. +
<<orders/order-documents/generating-invoices#, Invoice>> +
<<pos/integrating-plentymarkets-pos#120, Receipt>> +
 <<orders/order-documents/generating-delivery-notes#, Delivery note>> +
<<fulfilment/generating-documents#, List of delivery addresses generated>> +
<<orders/order-documents/pick-list#, Pick list>> +
<<orders/order-documents/packing-list#, Packing list>> +
<<orders/order-documents/generate-offer#, Offer>> +
<<orders/order-documents/generating-dunning-letters#, Dunning letter>> +
<<orders/order-documents/generating-order-confirmations#, Order confirmation>> +
 <<orders/order-documents/generating-credit-notes#, Credit note>> +
<<orders/order-documents/generating-adjustment-forms#, Correction document>> +
<<orders/order-documents/generating-return-slips#, Return note>> +
<<orders/managing-orders#1670, Invoice reversal document>> +
<<orders/managing-orders#540, Refund reversal>> +
<<orders/order-documents/generating-pro-forma-invoice#, Pro forma invoice>> +
<<fulfilment/shipping-centre#retrieve-return-label, Return label>> +
_Important:_ If you use the procedure *Generate invoice* simultaneously in another event procedure, this event may be triggered twice.

|*External invoice uploaded* +
*External credit note uploaded*
|The event procedure is triggered when an external invoice or an external credit note is uploaded to an order.

|====

[#events-payment]
[discrete]
==== Event group Payment

[[table-event-procedures-event-group-payment]]
[cols="1,3"]
|====
|Event |Explanation

| *Complete*
|The event procedure is triggered when a complete payment is booked and <<payment/beta-managing-payments#30, assigned>> to an order. Thus, the order has to be paid in full to trigger the event procedure.

|<<payment/beta-managing-payments#50, Partial payment>>
|The event procedure is triggered when a partial payment is booked in. +
This event can be triggered several times, for example when a customer makes several partial payments.

|*Overpay*
|The event procedure is triggered when a customer overpays an order.

| *Rejected*
|The event procedure is triggered when a payment is rejected by a payment provider.

| *Initial payment complete*
|The event procedure is triggered when a deposit on a production item has been fully paid. +
Enter the percentage value for <<orders/basic-settings#intable-deposit-production-item, deposits on production items>> in the *Setup » Orders » Settings* menu.

| *Payment cancelled by the customer*
|The event procedure is triggered when a payment is cancelled by a customer.

|====

[#events-purchase-order]
[discrete]
==== Event group Purchase order

[[table-event-procedures-event-group-purchase-order]]
[cols="1,3"]
|====
|Event |Explanation

| *Goods*
|Select one of the following events to determine when exactly the event procedure is triggered: +
*Delivered* +
*Partly delivered* +
*Booked out* +
*Partly booked out* +
*Booked in* +
*Partly booked in* +
These events only apply to the order type <<stock-management/managing-reorders/working-with-reorders#, reorder>>. Depending on your selection here, the event triggering the event procedure is a complete or partial booking in or booking out of reordered stock.

| *Purchase order initiated*
|The event procedure is triggered when a <<stock-management/managing-reorders/working-with-reorders#, reorder>> or a <<stock-management/working-with-redistributions#, redistribution>> is initiated. With reorders, this means that the reorder is transmitted to the supplier. Redistributions are initiated when the process of booking items from a source warehouse to a target warehouse is started.

| *Purchase order finished*
|The event procedure is triggered when a <<stock-management/managing-reorders/working-with-reorders#, reorder>> or a <<stock-management/working-with-redistributions#, redistribution>> is finished. For example, this is the case as soon as all items contained in the reorder or redistribution have been fully booked in or booked.

| *PO delivery note generated*
|The event procedure is triggered when a <<stock-management/working-with-redistributions#800, PO delivery note>> is generated for a redistribution.

| *Reorder document generated*
|The event procedure is triggered when a <<stock-management/managing-reorders/working-with-reorders#140, reorder document>> is generated for a reorder.

|====

[#events-plugins]
[discrete]
==== Event group Plugins

Which events are available to you in this event group depends on the plugins you have installed in your system.


[#120]
=== Adding filters

After selecting an event that triggers the event procedure, select a *Filter* or multiple filters. Filters determine which orders are affected by the event procedure. The available filters are grouped into orders, just as the events are. The available filters are described below according to their filter groups.

It is possible to select several filters for the same event procedure. In that case, the filters are applied one after the other. Therefore, make sure to add the filters in the correct order. Thus, only orders that match all selected filters are affected by the event procedure.

[.instruction]
Adding a filter:

. Go to *Setup » Orders » Events*.
. Click on the event procedure to which you want add a filter to.
. Click on *Add filter* (icon:plus-square[role="green"]) in the filter area.
. Select the appropriate *Filter type* from the corresponding filter group.
. Click on *Add* (icon:plus-square[role="green"]).
. Configure the settings in the filter as needed, if it is a filter with additional settings.
. *Save* (icon:save[role="green"]) the settings.

Some filters have additional settings. Therefore, select the required settings after adding the filter. For example, you can select specific order types to which the event procedure is applied for the filter *Order type*. After editing, the settings have to be saved (icon:save[role="green"]). Note that this saves the event procedure but does not activate it. For this, additionally the option *Active* has to be selected. Activate the event procedure only after all settings and a logical check of the settings have been made.

[#events-filters-order]
[discrete]
==== Filter group Order

[[table-event-procedures-filter-group-order]]
[cols="1,3"]
|====
|Filter |Explanation

| *Order type*
|Select to which order types the event procedure is applied. You can select one, several or all of the order types listed.

| *Order warehouse*
|Select the orders to which the event procedure is applied according to the warehouse. +
*One warehouse per order* = Only orders whose variations are assigned to the same warehouse are filtered. +
*Multiple warehouses per order* = Only orders whose variations are assigned to different warehouses are filtered. +
icon:map-signs[] *Or:* Alternatively, you can select one or more warehouses to filter the orders according to the warehouse(s) assigned to them.

| *Number of positions*
|Orders are filtered according to the number of variations included per order. Select whether the system filters orders according to a fixed number ( ==) of variations or according to values greater than (>), greater than or equal to (>=), less than (<) or less than or equal to (< ==) the selected quantity. You can also limit results by using a second (optional) operator.
_Example_: The required setting for filtering all orders with more than 5, but less than or equal to 10 variations >5 <= 10.10.

| *Active user*
|Orders are filtered according to the active <<business-decisions/user-accounts-access#, user>>, which means the person by whom the event procedure is triggered. You can also select several or *all* users at once.

| *Click and Collect*
|Orders are filtered according to the shipping method Click & Collect. Click & Collect can only be used for orders that are referred from eBay UK and have the UK as their delivery country. For further information, refer to the chapter on <<markets/ebay/ebay-setup#7010, Click & Collect>>.

| *Referrer*
|Orders are filtered according to one or multiple <<orders/order-referrer#, order referrers>>. You can also select *ALL* order referrers at once.

| *Dunning level*
|Orders are filtered according to one or multiple dunning levels. You can select *ALL* dunning levels at once or select the option *None* if only orders without any dunning level should be filtered.

| *Client (store)*
|Orders are filtered according to one or multiple clients and online shops. You can select *ALL* clients at once.

| *Flag*
|Orders are filtered according to one or multiple <<item/settings/flags#, flags>>. You can select *ALL* flags at once or select the option *None* if only orders without any flag should be filtered.

| *Value of items (gross)*
|Orders are filtered according to their gross value of included variations. You can enter two values and add several operators for both values.

| *Payment method*
|Orders are filtered according to one or multiple payment methods. You can select *ALL* payment methods at once.

| *Payment status*
|Orders are filtered according to their payment status. The status is determined during payment assignment. You can select one, several or all payment statuses.

|*Payment type status*
|This filter was implemented for the old Callisto payment methods and is only displayed in the menu due to technical reasons. The filter does not have any effects on plugin payment methods and should not be selected anymore.

| *Loyalty program*
|Orders are filtered according to their loyalty program. +
*ALL* = All orders are filtered. +
*Without* = Only orders not belonging to any loyalty program are filtered. +
*Amazon SameDay* = Only Amazon orders that have to be shipped on the same day are filtered. +
*Amazon NextDay* = Only Amazon orders that have to be shipped on the following day are filtered. +
*Amazon SecondDay* = Only Amazon orders that have to be shipped 2 days after placement of the order are filtered. +
*Amazon Prime* = Only Amazon Prime orders are filtered. +
*Amazon Prime SameDay* = Only Amazon Prime orders that have to be shipped on the same day are filtered. +
*Amazon Prime NextDay* = Only Amazon Prime orders that have to be shipped on the following day are filtered. +
*Amazon Prime SecondDay* = Only Amazon Prime orders that have to be shipped 2 days after placement of the order are filtered. +
*eBay Plus* = Only eBay Plus orders are filtered. +
For more information on Amazon Prime and eBay orders, refer to the respective manual pages on <<markets/amazon/amazon-setup#4200, Amazon>> and <<markets/ebay/ebay-setup#100, eBay>>.

| *Order weight*
|Orders are filtered according to the total weight of the variations included in the order. Select an operator as well as the unit (g or kg) to filter orders according to a specific weight. It is only possible to insert whole numbers.

| *Document*
|Orders are filtered according to the documents generated in the order. You can choose between *Current invoice* and *Reversal invoice* as well as *Not available* and *Available*.

| *Incoming order*
|Orders are filtered according to the date the order was received. Select a time period between *until 1 day* and *until 31 days* from the drop-down list. Reference for this is the current date.

| *Incoming payment*
|Orders are filtered according to the date of incoming payment. Select a time period between *until 1 day* and *until 31 days* from the drop-down list. Reference for this is the current date.

| *Status*
|Orders are filtered according to their order status. With the operators equal to (==), greater than (>), greater than or equal to (>=), less than (<) or less than or equal to (<==) orders are filtered which either correlate with the chosen order status or are above or below it.

| *Postcodes*
|Orders are filtered according to one or several postcodes. A value can be entered here. This value is considered as the start value. You can enter several values separated by a comma. +
_Example:_ If you enter the value “34”, all postcodes beginning with “34” are considered.

| *Agreement of data transmission to shipping service providers*
|Orders are filtered based on the values *granted* or *not granted*. When registering the order, it is checked whether the customer agreed in the online shop that their data is transmitted to the shipping service provider or not.

| *Order with return package number*
|Orders are filtered based on whether they have a return package number or not. Select the filter *Yes* or *No* from the drop-down list.

|*Tag*
|This filter only applies to reorders, redistributions and subscriptions because these are the only order types where tags can be assigned. By using this filter, orders of these types are filtered based on the <<welcome/general-functions/tags#, tags>> assigned to them. After selecting this filter, define which tags have to be assigned to the order for the event procedure to be applied to this order.

|====

[#events-filters-item]
[discrete]
==== Filter group Item

[[table-event-procedures-filter-group-item]]
[cols="1,3"]
|====
|Filter |Explanation

| *Contains stocked item(s)*, +
*Contains production item(s)*, +
*Contains special order item(s)* +
*Contains colli*
|Orders are filtered according to the item type included in the order. Items belonging to different item types may be contained in an order.

| *Contains only stocked items*, +
*Contains only production item(s)*, +
*Contains only special order item(s)*, +
*Contains only collis* +
|Orders are filtered according to the item type included in the order. Orders that exclusively consist of the item types listed are filtered.

| *Item(s) included*
|All orders containing the specified item or items are filtered. Enter one or several item IDs of the items according to which orders should be filtered.

| *Variation(s) included*
|All orders containing the specified variation or variations are filtered. Enter one or several variation IDs of the items according to which orders should be filtered. You can enter several

| *Item property available*
|This filter identifies order items for which a certain <<item/managing-items#500, property>> has been defined in the *Setup » Settings » Properties » Configuration* menu. Within the filter, you can select a property according to which order items are filtered.

|====

[#events-filters-customer]
[discrete]
==== Filter group Customer

[[table-event-procedures-filter-group-customer]]
[cols="1,3"]
|====
|Filter |Explanation

| *Customer rating*
|Orders are filtered according to the customer rating. Select an operator and the corresponding rating. +
Use the operator *==* and the *grey stars* to filter only orders without any customer ratings.

| *Customer class*
|Orders are filtered according to one or multiple customer classes. You can also select *ALL* customer classes at once.

| *Customer type*
|Orders are filtered according to the customer type.

| *Age rating billing address*
|Orders are filtered according to one or multiple age ratings linked to the invoice address. You can select *ALL* age ratings at once or select the option *None* if only orders without any age rating should be filtered.

| *VAT number*
|Orders are filtered according to the availability of a VAT number. You can select the options *Available* or *Not available*.

| *Number of orders*
|Orders are filtered according to the number of orders placed by a customer. Select an operator and enter a number.

| *Revenue*
|Orders are filtered according to the revenue generated. Select an operator and enter a value for the revenue. Additionally, you can enter a *Period of time* from a drop-down list to narrow down the filtering. You can also decide whether you want to include returns or not.

| *Guest order*
|Orders are filtered according to their status as guest orders. Select one of the options *Yes* or *No*.

|====

[#events-filters-shipping]
[discrete]
==== Filter group Shipping

[[table-event-procedures-filter-group-shipping]]
[cols="1,3"]
|====
|Filter |Explanation

| *Valid DHL Packstation/Postoffice*
|Orders are filtered according to the availability of a valid DHL Packstation or post office in the delivery address.

| *Faulty DHL Packstation/Postoffice*
|Orders are filtered according to the existence of a faulty DHL Packstation or post office in the delivery address.

| *Country of delivery*
|Orders are filtered according to one or multiple delivery countries. You can also select *ALL* countries of delivery at once.

| *Shipping method*
|Orders are filtered according to one or multiple shipping methods. You can also select *ALL* shipping methods at once.

| *Shipped on*
|Orders are filtered according to the shipping date. Choose between the options *Not available*, *Available* or *In the future*.

| *Shipping costs (gross)*
|Orders are filtered according to the gross shipping costs. Select an operator and enter a price.

| *Shipping by FBA only*
|Filtered are orders which are shipped completely via Amazon Multi-Channel by Amazon. +
Use this filter for example to search for orders that consist of several shipments so that you can inform your customers that they will receive several shipments.

| *Shipping partially by FBA*
|Filtered are orders containing items that are shipped partially via Amazon Multi-Channel by Amazon. +
Use this filter for example to flag orders of this kind.

| *Outgoing items*
|Orders are filtered according to the date of outgoing items. The period between *until 1 day* and *until 31 days* can be selected.

| *Phone number*
|Orders are filtered according to whether a telephone number *Exists* or *Exists not* in the order. The *Delivery address*, the *Invoice address* or *Both* can be searched. If you want to search for orders in which a telephone number *Exists*, you can enter the *Minimal length of number* in addition. +
_Example_: If you enter 4 as the minimal length, the system searches for orders with telephone numbers consisting of 4 or more digits.

|====

[#events-filters-market]
[discrete]
==== Filter group Market

[[table-event-procedures-filter-group-market]]
[cols="1,3"]
|====
|Filter |Explanation

| *eBay account*
|Orders generated on eBay are filtered.

|====

[#events-filters-purchase-order]
[discrete]
==== Filter group Purchase order

[[table-event-procedures-filter-group-purchase-order]]
[cols="1,3"]
|====
|Filter |Explanation

| *Supplier*
|Reorders are filtered according to the supplier. Select the supplier from the drop-down list.

| *Sending warehouse*
|Redistributions are filtered according to the warehouse from which stock is booked out. Select one, several or *all* warehouses.

| *Receiving warehouse*
|Reorders are filtered according to the receiving warehouse to which the reordered items are sent. Redistributions are filtered according to the warehouse into which stock is booked. Select one, several or *all* warehouses.

|====

[#events-filters-plugins]
[discrete]
==== Filter group Plugins

Which filters are available to you in the filter group depends on the plugins installed in your system.

[#130]
=== Adding procedures

After having selected the required event group as well as one or multiple filters, the last step consists of deciding which procedure(s) should be carried out. These procedures are then carried out for the filtered orders as soon as the selected event occurs. The available procedures are described below according to their procedure groups.

If you select several procedures, they are carried out one after the other. To change the order in which procedures are carried out, click on the grey *arrows* next to the procedures that you have already added.

[.instruction]
Adding procedures:

. Go to *Setup » Orders » Events*.
. Click on the event procedure to which a procedure should be added to.
. Click on *Add procedure* (icon:plus-square[role="green"]) in the *procedure area of the menu.
. Select the required *Procedure*.
. Click on *Add* (icon:plus-square[role="green"]).
. Configure the settings in the procedure as needed, if it is a procedure with additional settings.
. *Save* (icon:save[role="green"]) the settings.

Some procedures have additional settings. Therefore, select the required settings after adding the procedure. For the procedure *Change status*, for example, you can select the order status the orders should get after the event procedure is applied. After editing, the settings have to be saved (icon:save[role="green"]). Note that this saves the event procedure but does not activate it. For this, additionally the option *Active* has to be selected. Activate the event procedure only after all settings and a logical check of the settings have been made.

[#events-procedures-item]
[discrete]
==== Procedure group Item

[[table-event-procedures-procedure-group-item]]
[cols="1,3"]
|====
|Procedure |Explanation

| *Add variation*
|The procedure adds a particular variation to an order. Enter the corresponding variation ID for this. You cannot enter more than one ID.

| *Send coupon item to manufacturer*
|The procedure sends a coupon item in the form of the selected template to the manufacturer. Select a template from the drop-down list.

| *Assign serial numbers*
|The procedure assigns a serial number to an order.

|====

[#events-procedures-order]
[discrete]
==== Procedure group Order

[[table-event-procedures-procedure-group-order]]
[cols="1,3"]
|====
|Procedure |Explanation

| *Create credit note (Order)*
|The procedure automatically creates a credit note order for an order. +
Select one of the following settings for the *Date* option: +
*Standard* = The credit note order is generated with the current date and time. +
*Return date* = The credit note order is created with the date of the return. +
*Order date* = The credit note order is created with the date of the creation of the order.

| [#intable-order-template]*Use order template*
|The procedure automatically applies a previously set up order template to an order. Select a template from the drop-down list. +
Order templates are created in the *Setup » Orders » Order template* menu.

| *Generate delivery orders*
|The procedure automatically creates delivery orders for an order. +
_Important:_ This option is only displayed if the correct <<orders/managing-orders#320, assignment of warehouses>> has been carried out beforehand.

| *Split into delivery orders by gross value of items*
|The procedure splits the order items of an order into separate delivery orders. The split is done according to a value which the order items in an order should not exceed. Enter the corresponding *Value of items (gross)*. +
For cases when an order item exceeds the entered value, you select an *Error status* from the drop-down list. Delivery orders with order items exceeding the set up gross item value will then get this order status.

| *Split into delivery orders by item availability*
|The procedure splits the orders according to <<item/settings/availabilities#, item availabilities>> into delivery orders. Create *Availability groups* for the filtered orders. To do so, drag one or more of the availabilities to the right and create the first group. To create a second group, drag further availabilities to icon:plus-square[role="green"]. If needed, create more groups.
When items with an availability from one of the groups are included in an order, a new delivery order per group is created. +
_Note_ that you have to have at least two groups for splitting to take place.

| *Split into orders by item availability*
|The procedure <<orders/managing-orders#intable-splitting-orders, splits the orders>> according to <<item/settings/availabilities#, item availabilities>> into orders. Create *Availability groups* for the filtered orders. To do so, drag one or more of the availabilities to the right and create the first group. To create a second group, drag further availabilities to icon:plus-square[role="green"]. If needed, create more groups.
When items with an availability from one of the groups are included in an order, a new order per group is created. +
_Note_ that you have to have at least two groups for splitting to take place.

| *Split by available line of items*
|The procedure splits orders according to a selectable <<item/settings/attributes#, attribute>> and available stock. The order is split if different variations of an item have been ordered and not all variations are available. Items that are immediately available remain in the original order. Delivery orders will be created for items that have missing variations.

| *Split by delivery date*
|Orders are automatically split into orders according to the delivery date saved in the order. The customer can enter the delivery date during the checkout process. It is also possible to save or change the delivery date of order items in the order itself. In addition, you can use a group function to assign delivery dates to orders.

| *Change order type*
|The procedure changes the order type of an order. The options *Order* or *Advance order* are available.

| *Change status*
|The procedure changes the order type of an order. Select the order status the orders should get after the event procedure is applied from the drop-down list. +
*Ignore delivery orders*: The procedure *Change status* changes the status of both the main order and its <<orders/managing-orders#300, delivery orders>> by default. Activate the option *Ignore delivery orders* if only the order status of the main order and not the order status of the delivery orders is to be changed.

| *Change flag*
|The procedure changes the <<item/settings/flags#, flag>> in an order. Select either *Delete flag* or the flag the order should get from the drop-down list.

|*Add/delete tags*
|This procedure only applies to reorders, redistributions and subscriptions because these are the only order types where tags can be assigned. The procedures adds to or deletes <<welcome/general-functions/tags#, tags>> from an order of this order type, depending on the selection. Select either the function *Add tag* or the function *Delete tag*. Then use the input field to determine the flags that are to be added or deleted. +
The procedure can be added more than once so that tags can be added and deleted within the same event procedure, if necessary. +

| *Change dunning level*
|The procedure changes the dunning level of an order. Select the dunning level that should be applied from the drop-down list.

| *Change status of main order*
|The procedure changes the order type of a main order. Select the order status from the drop-down list which the main order should get after splitting an order (option *Split up* in the order menu) or after delivery orders are generated.

| *Calculate sales data for data export*
|Revenue data is usually stored in a separate database to maintain a high level of system performance during the generation of invoices or credit notes. Because it is not allowed to generate internal invoices for certain payment methods, such as *Neckermann* or *Quelle*, this database does not contain any data for orders with these payment methods. However, you can use this procedure to generate export data for those orders (Collmex, DATEV etc.) with the help of an event procedure. +
_Important:_ The procedure is only carried out if the payment method of the order is *Quelle*, *Klarna* or *Neckermann*. Thus, these payment methods should be selected in the filter of the event procedure. The *Order type* should be defined by the filters *Order*, *Warranty* and/or *Repair* because invoices can only be generated for these order types.

| *Book outgoing items*
|The procedure books outgoing items.

|*Upload invoice to Amazon*
|The procedure uploads an invoice to <<markets/amazon#, Amazon>>.

| *Notify Otto of changes to the order*
|The procedure informs Otto of changes to orders received from the market *Otto*. The notification is sent when the order changes to the statuses *Order received*, *Outgoing items booked*, *Return* and *Cancellation*. Select from the drop-down list what information is sent to Otto.

|*Send return to Otto Direktversand*
|The procedure informs Otto Direktversand about a return. Select the status of the return from the drop-down list (Accepted, Arrived, Rejected).

| *Send cancellation to Otto Direktversand*
|The procedure informs Otto Direktversand about a cancellation. Select the status of the cancellation from the drop-down list (Item not available, Same day shipping not possible, Cancelled by Otto).

| *Send shipping confirmation to Otto Direktversand*
|The procedure sends a shipping confirmation to Otto Direktversand.

| *Open URL*
|The procedure opens a URL provided within the procedure. The URL can be used to transmit information on orders. For example, the order ID can be included by attaching the template variable *OrderID* to the URL. The URL has to be entered in its full length and according to the template *+https://www.example.co.uk+*. +
Example including the attached order ID: *+https://www.example.co.uk/[OrderID]/+*. +
The available template variables are listed within the procedure. +
*HTTP method* = Select *GET*, *PUT* or *POST*. +
*Content type* = Save the content type for the URL. +
*Example*: If XML content should be transferred, enter *text/xml*. +
*Request Content* = Texts, for example XML or JSON content can be transferred.

| *Assign sales representative to order*
|The procedure saves a sales representative in an order. The sales representative is assigned according to the postcode of the address linked to the recipient of the order. For a sales representative to be assigned, it is mandatory that a range of postcodes is saved in the representative’s contact data. The contact ID of the sales representative is saved instead of the name. +
For further information, refer to the <<crm/managing-contacts#, Contacts>> page of the manual.

| *Send order confirmation to Fruugo*
|The procedure sends an order confirmation to the market <<markets/fruugo#, Fruugo>>.

| *Send cancellation to Fruugo*
|The procedure informs the market <<markets/fruugo#, Fruugo>> about an order cancellation. Select a reason for the cancellation from the drop-down list (Item not in stock, Item discontinued, Invalid delivery address, Customer cancellation, Legislation restriction, Other).

| *Notify Cdiscount of order changes*
|The procedure informs <<markets/cdiscount#, Cdiscount>> about status changes in orders received from the market Cdiscount. Select a status for the order change from the drop-down list (Select status, Refused by seller, Shipped by seller, Shipment refused by seller, Cancelled by customer).

|*Send “Order complete” to DaWanda*
|The procedure sends the information *Order complete* to DaWanda.

| *Send cancellation to Flubit*
|The procedure informs the market <<markets/fruugo#, Fruugo>> about an order cancellation. Select a reason for the cancellation from the drop-down list (Item not in stock, Item discontinued, Invalid delivery address, Customer cancellation, Legislation restriction, Other).

| *Send order confirmation to idealo*
|The procedure sends an order confirmation to the market <<markets/idealo-checkout/idealo-setup#, idealo>>.

| *Send cancellation to idealo*
|The procedure informs the market <<markets/idealo-checkout/idealo-setup#, idealo>> about the cancellation of an order. Select a reason for the cancellation from the drop-down list (Customer revoke, Merchant decline).

| *Send order cancellation to bol.com*
|The procedure informs the market <<markets/bol-com#, bol.com>> about an order cancellation. Select the reason for the cancellation from the drop-down list (Out of stock, Cancellation is requested by customer, Item is in a bad condition, Higher shipping costs, Incorrect price, Item not available in time, No bol.com warranty, Item ordered twice, Item retained, Technical issue, Item untraceable, Other).

| *Send cancellation to Kaufland.de*
|The procedure informs the market <<markets/kaufland-de/kaufland-setup#, Kaufland.de>> about the cancellation of an order. Select the reason for the cancellation from the drop-down list (Customer cancellation, Customer exchange, Incorrect item description, Incorrect shipping address, Customer has not received item, Item sold out, Incorrect price, Shipping address is undeliverable, Other reason).

|*Upload invoice to Kaufland.de*
|The procedure uploads an invoice to <<markets/kaufland-de/kaufland-setup#, Kaufland.de>>

| *Change shipping profile*
|The procedure changes the <<fulfilment/preparing-the-shipment#1000, shipping profile>> of an order. Select the shipping profile from the drop-down list.

| *Change order entry date to today*
|The procedure changes the order date (entry date) to the current time at which the procedure is applied. +
Note that the date can only be changed if the order is not locked.

| *Recalculate shipping profiles of order items*
|The procedure recalculates the shipping profiles assigned to the individual order items and determined it anew, if needed.

|====

[#events-procedures-documents]
[discrete]
==== Procedure group Documents

Note that the documents in this procedure group can only be generated if the corresponding <<orders/order-documents#300, document template>> has been set up.

[[table-event-procedures-procedure-group-documents]]
[cols="1,3"]
|====
|Procedure |Explanation

| *Generate invoice*
|The procedure generates an <<orders/order-documents/generating-invoices#, invoice>> for an order. +
Optionally, you can enter a *Comment* which will be added in the document underneath the order items.

| *Generate multi-invoice*
|The procedure generates a <<orders/managing-orders#840, multi-invoice>> for an order. +
Activate the option *Integrate invoices of these orders* if the already generated separate invoices of the included orders are to be added to the multi-invoice generated by this procedure. +
Optionally, you can enter a *Comment* which will be added in the document underneath the order items.

| *Generate order confirmation*
|The procedure generates an <<orders/order-documents/generating-order-confirmations#, order confirmation>> for an order. +
Optionally, you can enter a *Comment* which will be added in the document underneath the order items.

| *Generate credit note (Document)*
|The procedure generates a <<orders/order-documents/generating-credit-notes#, credit note>> for an order. +
Optionally, you can enter a *Comment* which will be added in the document underneath the order items. +
Select which date is to be displayed on the credit note document by using the option *Date*. +
*Standard = The credit note document is generated with the current date. +
*Credit note date* = The credit note document is generated with the date on which the original credit note order has been created. +

| *Generate adjustment form*
|The procedure generates an <<orders/order-documents/generating-adjustment-forms#, adjustment form>> for an order. +
Optionally, you can enter a *Comment* which will be added in the document underneath the order items.

| *Generate multi credit note*
|The procedure generates a <<orders/managing-orders#850, multi-invoice>> for an order. +
Optionally, you can enter a *Comment* which will be added in the document underneath the order items.

| *Generate delivery note*
|The procedure generates a <<orders/order-documents/generating-delivery-notes#, delivery note>> for an order. +
Optionally, you can enter a *Comment* which will be added in the document underneath the order items.

| *Generate dunning letter*
|The procedure generates a <<orders/order-documents/generating-dunning-letters#, dunning letter>> for an order. +
To display the dunning charge, enter the *Variation ID* of the <<orders/order-documents/generating-dunning-letters#intable-dunning-charge, item representing the dunning charge>> which you have created in your plentymarkets system beforehand. +
Optionally, you can enter a *Comment* which will be added in the document underneath the order items.

| *Generate return label*
|The procedure generates a <<orders/order-documents/generating-return-slips#, return slip>> for an order. +
Optionally, you can enter a *Comment* which will be added in the document underneath the order items.

| *Generate multipurpose coupon*
|The procedure generates a <<orders/coupons#intable-coupon-type, multipurpose coupon>> for an order.

| *Generate invoice reversal document*
|The procedure generates a <<orders/managing-orders#1670, reversal document invoice>> for an order. A reversal document cancels the invoice and not the order itself. Thus, the reversal document is only generated if an invoice already exists for the order. +
Optionally, you can enter a *Comment* which will be added in the document underneath the order items. +
Use the drop-down list *Date* to select which date is displayed on the document. By selecting *Standard*, the current date is displayed on the document. By selecting *Invoice date*, the same date as on the invoice is displayed on the document.

| *Generate refund reversal document*
|The procedure generates a <<orders/managing-orders#540, refund reversal document>> for an order. +
Optionally, you can enter a *Comment* which will be added in the document underneath the order items. +
Use the drop-down list *Date* to select which date is displayed on the document. By selecting *Standard*, the current date is displayed on the document. By selecting *Credit note date*, the same date as on the invoice is displayed on the document.

| *Generate pro forma invoice*
|The procedure generates a <<orders/order-documents/generating-pro-forma-invoice#, pro forma invoice>> for an order. +
Optionally, you can enter a *Comment* which will be added in the document underneath the order items.

| *Generate pick-up/delivery note*
|The procedure generates a <<orders/order-documents/generating-pick-up-delivery#, pick-up/delivery note>> for an order. +
Optionally, you can enter a *Comment* which will be added in the document underneath the order items.

|====

[#events-procedures-customer]
[discrete]
==== Procedure group Customer

[[table-event-procedures-procedure-group-customer]]
[cols="1,3"]
|====
|Procedure |Explanation

| *Change customer rating*
|The procedure changes the customer rating of a contact. !Select the appropriate rating from the drop-down list.

| *Change customer type*
|The procedure changes the customer type of a contact. Select the appropriate customer type from the drop-down list.

| *Send email*
|The procedure sends an email. Klick on *Add* (icon:plus-square[role="green"]) to select the settings for the email. Select the template, i.e. which kind of email you want to send, from the first drop-down list. Select the recipient, i.e. to whom the email is sent, from the second drop-down list. After this, click on *save* (icon:save[role="green"]). An ID is assigned and the selection is created. +
You can delete (icon:minus-circle[role="red"]) the added procedure or you can add more combinations. These will be assigned an ID as well.

| *Send eBay message*
|The procedure sends an eBay message to customers. Select a template from the drop-down list.

| *Assign sales representative to customer*
|The procedure automatically saves sales representatives in contact data. For a sales representative to be assigned, a range of postcodes has to be saved in the sales representative’s contact data. The *Contact ID* of the sales representative is saved, not the name. For further information, refer to the <<crm/managing-contacts#, Contacts>> page of the manual.

| *Change customer class*
|The procedure changes the <<crm/managing-contacts#15, customer class>> of a contact. Select which customer class the contact should get from the drop-down list. You can choose from the customer classes saved in your system.

|====

[#events-procedures-shipping]
[discrete]
==== Procedure group Shipping

[[table-event-procedures-procedure-group-shipping]]
[cols="1,3"]
|====
|Procedure |Explanation

| *Assign storage location*
|The procedure assigns a warehouse to an order. The assignment is done according to your <<orders/basic-settings#intable-warehouse-selection, warehouse settings>>. Activate the option *Unassign old storage location* if you want to detach already assigned warehouses before you assign new ones.

| *Unassign storage location*
|The procedure detaches already assigned warehouses to an order. +
_Note_ that no other warehouses are automatically assigned.

| *Create shipping packages*
|The procedure creates shipping packages for an order before the order is opened in the <<fulfilment/shipping-centre#, shipping centre>>.

| *Transfer shipping permission to FBA*
|The procedure sends a shipping permission to <<markets/amazon/amazon-setup#3300, FBA>> so that shipping is initiated by FBA.

| *Send shipping confirmation to [market]*
|The procedure sends a shipping confirmation to a market when items bought via this market are shipped. The procedures are listed individually. Select the appropriate one. +

| *Send tracking information to Rakuten*, +
*Send preparation for shipping to Rakuten*
|The procedure sends the tracking number or a confirmation that the order is currently being prepared for shipping to the market Rakuten.de.

|====

[#events-procedures-payment-method]
[discrete]
==== Procedure group Payment methods

[[table-event-procedures-procedure-group-payment-method]]
[cols="1,3"]
|====
|Procedure |Explanation

| *Send credit note to Allyouneed*
|The procedures sends a credit note to Allyouneed.

| *Send cancellation to Netto eStores*
|A cancellation is sent to the Netto eStores.

| *Send cancellation to Rakuten*
|A cancellation is sent to the Rakuten.

| *Permit payment via direct debit*
|Use the event procedure to activate or deactivate the payment method *Direct debit*.

| *Permit payment on invoice*
|Use the event procedure to activate or deactivate the payment method *Invoice*.

|*Send payment notification to DaWanda*
|*_Note_*: This procedure is no longer usable because it refers exclusively to the old Callisto integration. Due to technical reasons, the procedure is still listed. +
The procedure sends a payment confirmation to DaWanda.

|====

[#events-procedures-return]
[discrete]
==== Procedure group Return

[[table-event-procedures-procedure-group-return]]
[cols="1,3"]
|====
|Procedure |Explanation

| *Generate DHL return label*
|The procedure generates a DHL return label via <<fulfilment/preparing-the-shipment#3200, DHL Retoure Online>> or <<fulfilment/preparing-the-shipment#3100, DHL Retoure with enclosed return labels>>. The generated return label is made available in the <<fulfilment/shipping-centre#, shipping centre>> or in the *My account* area of the online shop.

|*Create a return at Amazon*
|The procedure creates a <<markets/amazon/amazon-setup#_editing_returns_for_amazon_orders, return at Amazon>>.

| *Send return to [market]*
|The procedure sends a return to a market. The procedures are listed individually. Select the appropriate one.

| *Send return status to bol.com*
|The procedure sends the status of the return to the market <<markets/bol-com#88, bol.com>>.

|*Generate Royal Mail Tracked Return Labels*
|*_Note_*: This procedure is no longer usable because it refers exclusively to the old Callisto integration. Due to technical reasons, the procedure is still listed. +

|====

[#events-procedures-market-listings]
[discrete]
==== Procedure group Market listings

[[table-event-procedures-procedure-group-market-listings]]
[cols="1,3"]
|====
|Procedure |Explanation

| *Post feedback on [market]*
|The procedure automatically generates feedback for a listing. The procedures are listed individually. Select the appropriate one.

| *Send payment notification to [payment provider]*
|The procedure automatically sends a payment confirmation to a market. The procedures are listed individually. Select the appropriate one.

| *eBay return*, +
*Issue eBay refund to customer* +
*Mark eBay return as received*, +
*eBay refund sent* (without PayPal), +
*Upload own return label at eBay*
|Once the selected event takes place, the listed procedures are triggered within the management of returns and refunds at <<markets/ebay/ebay-setup#7400, eBay>>. +
For the procedure *eBay return*, you can additionally choose between the settings *Accept return*, *Accept return without label*, *Reject return* or *Offer partial refund* from a drop-down list.

| *Reject eBay cancellation request*, +
*Accept eBay cancellation request*, +
*Create an order cancellation on eBay*
|Once the selected event takes place, the listed procedures are triggered within the management of order cancellations at <<markets/ebay/ebay-setup#8900, eBay>>. +
For the procedure *Create an order cancellation on eBay* you can additionally select a reason for the cancellation from a drop-down list. Select from the reasons *Buyer gave incorrect delivery address*, *Buyer wants to cancel the purchase*, and *Item cannot be delivered as agreed upon*.

| *Start dunning/dispute process on eBay*
|Automatically sends a dunning letter or starts a dispute on <<markets/ebay/ebay-setup#7100, eBay>>.

|====

[#events-procedures-board]
[discrete]
==== Procedure group Board

[[table-event-procedures-procedure-group-board]]
[cols="1,3"]
|====
|Procedure |Explanation

| *Create card*
|The procedures adds a <<welcome/customise-system#370, new card>> in the *plentymarkets logo (Start) » Boards* menu. +
Select the *Board* and the *Column* as the place for the new card within the procedure. Within the procedure, you can assign an optional *Prefix* for the new card. The prefix can be used for better distinction between the cards and is automatically added at the beginning of the card title.

| *Delete cards*
|The procedure <<welcome/customise-system#380, deletes>> selected cards in the *plentymarkets logo (Start) » Boards* menu. +
Select the *Board* and the *Column(s)* whose cards should be deleted within the procedure.

| *Move cards*
|The procedure <<welcome/customise-system#380, moves>> selected cards in the *plentymarkets logo (Start) » Boards* menu. +
Select the *Board* and the *Column(s)* from and to which the cards should be moved within the procedure.

|====

[#events-procedures-purchase-order]
[discrete]
==== Procedure group Purchase order

[[table-event-procedures-procedure-purchase-order]]
[cols="1,3"]
|====
|Procedure |Explanation

| *Set delivery date (reorder only)*
|The procedures saves the delivery date in <<stock-management/managing-reorders/working-with-reorders#, reorders>>. The system then calculates the estimated delivery date on the basis of the *Delivery time* saved in the *Supplier tab* of the variations included in the reorder. For more information on saving the delivery time for a variation, refer to the <<item/managing-items#180, Managing items>> page of the manual.

| *Initiate purchase order*
|The procedure initiates <<stock-management/managing-reorders/working-with-reorders#, reorders>> and <<stock-management/working-with-redistributions#, redistributions>>. For reorders, this means that the reorder is transmitted to the supplier. For redistributions, this means that the process of booking items from a sending warehouse to a target warehouse begins with this procedure.

| *Finish purchase order*
|The procedure finishes <<stock-management/managing-reorders/working-with-reorders#, reorders>> and <<stock-management/working-with-redistributions#, redistributions>>. Once the orders are finished, editing these orders is not possible any more.

| *Generate reorder document*
|The procedures generates the <<stock-management/managing-reorders/working-with-reorders#150, reorder document>> for a reorder.

| *Generate PO delivery note*
|The procedure generates a <<stock-management/working-with-redistributions#500, PO delivery note>> for redistributions.

|====

[#events-procedures-plugins]
[discrete]
==== Procedure group Plugins

Which procedures are available to you in the procedure group depends on the plugins installed in your system. Only the procedures listed below are the same in all systems.

[[table-event-procedures-procedure-group-plugins]]
[cols="1,3"]
|====
|Procedure |Explanation

|*eBay Fulfillment by Orange Connex: Auftrag senden*
|The procedure sends a cancellation inquiry to eBay Fulfillment via <<markets/ebay/ebay-fulfillment-by-orange-connex#, Orange Connex>>.

|*eBay Fulfillment by Orange Connex: Auftrag stornieren*
|The procedure sends a cancellation inquiry to eBay Fulfillment via <<markets/ebay/ebay-fulfillment-by-orange-connex#, Orange Connex>>.

| *Auftrag beim Versanddienstleister anmelden*
|The procedure registers the order via the interface or the plugin that you have already set up. The order is registered based on the selected shipping profile in the order. +
*_Note:_* This procedure can only be used in combination with interfaces or plugins of shipping service providers already set up. Using this procedure with the Amazon service *Amazon Prime* is not possible.

| *Retoure beim Versanddienstleister anmelden*
|The procedure registers the return via the interface or the plugin that you have already set up. +
*_Requirement:_* The shipping provider allows registering returns.

| *Versandlabel bei Amazon Prime anfordern*
|The procedure requests a shipping label from Amazon Prime.

|*Versandinformation an Otto melden*
|The procedure sends a shipping conformation to <<markets/otto/otto-market#500, Otto>>.

|*Auftragsstornierung an Otto melden*
|The procedure sends an order cancellation to <<markets/otto/otto-market#500, Otto>>.

|*Retoure an Otto melden*
|The procedure sends a return to <<markets/otto/otto-market#500, Otto>>.

|*Ablehnung der Retoure an Otto melden*
|The procedure sends a rejection of a return to <<markets/otto/otto-market#500, Otto>>.

|*Versandbestätigung an Zalando senden*
|The procedure sends a shipping confirmation to <<markets/zalando#1200, Zalando>>.

|*Stornierung an Zalando senden*
|The procedure sends a cancellation to <<markets/zalando#1300, Zalando>>.

|*Retoure an Zalando senden*
|The procedure sends a return to <<markets/zalando#1600, Zalando>>.

|====

[#200]
== Activating an event procedure

As soon as you have selected the event, filter(s) and procedure(s) for an event procedure, the event procedure has to be activated. From the point of activation onwards, the event procedure applies your settings to the selected orders.

In case an event procedure is temporarily not needed, you can deactivate it.

[.instruction]
Activating an event procedure:

. Go to *Setup » Orders » Events*.
. Select the event procedure from the list. +
→ The event procedure opens.
. Select (icon:check-square[role="blue"]) the option *Active* in the *Settings* area. +
→ The event procedure is activated.

[TIP]
.Check the settings before activation
====
We recommend that you check the selected events, filters, procedures and all related settings carefully before you activate the event procedure. Activating event procedures that are not fully set up can cause malfunctions and errors.
====

[#300]
== Editing an event procedure

You can edit the *Name*, the *Event*, the *Filter* and the *Procedure* during or after the set-up of the respective event procedure. Delete individual filters or procedures by using the *Delete* (icon:minus-circle[role="red"]) function displayed next to each selected option. *Save* (icon:save[role="green"]) the settings to apply the changes.
