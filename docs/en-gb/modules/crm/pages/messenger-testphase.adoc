= Messenger (Test phase)
:keywords:
:description: Learn how to use the Messenger in plentymarkets to send and receive emails.
:author: team-crm

[TIP]
*_Note:_* This page is currently in progress and is not yet complete.

The *CRM » Messenger (Test phase)* menu allows you to manage the external communication with your customers via emails as well as the internal communication via messages. If you use the whisper mode in messages, these messages are only visible in your plentymarkets system and _cannot_ be seen by your contacts. 

The *CRM » Messenger (Test phase)* menu is structured as follows:

image::crm:messenger-menu-structure.png[width=640, height=360]

* *Navigation*: Here you can navigate through different parts of the menu. The currently selected area (blue background) is displayed in the main window on the right. Click on icon:menu[set=material] to expand or collapse the navigation bar. +
** Available areas in the navigation: icon:add[set=material] *New message*, Inbox, <<#new-messages, New messages>>, <<#my-messages, My messages>>, <<#trash, Trash>>.
* *Toolbar*: Here you can <<#search-message, search>> for messages, <<#configure-columns, adjust the columns in the overview>>, set the results to be shown per page and click through the pages with the messages.
* *Main window*: Here you can see whichever area is currently open. +
** *Overview*: When you start a search, you’ll see the results in an overview. The overview provides information about the conversations found at a glance. You see, for example, the email addresses of the senders, the subject, the date when the message was received, the assigned tags and by means of the icon icon:attach_file[set=material], you can see whether the message has an attachment. +
** *Detail view*: When you open a message, the details will become visible below the main window. The detail view of a message is divided into the conversation, i.e. the message stream, and the editor where you type in your replies.

[discrete]
== New features

[.collapseBox]
.New features compared to the “old” Messenger
--
You can find the following improvements in the new Messenger that haven’t been available in the “old” Messenger:

* Receiving emails from your customers
* Sending emails to your customers
* Using the group function in the Messenger
* Possibility to subscribe for conversations and receive notifications regarding new messages within this conversation
  Display in the back end when other system users are replying to a message
--

[#preparatory-settings]
== Preparatory settings

If users of the type *Back end* should be able to work with the messenger, a person with *Admin* access has to assign rights to those users. Moreover, you have to create tags in order that these are available for the Messenger. You also have to grant certain rights for the tags.

[#user-rights-back-end-user]
=== Assigning rights for back end users

:rights-purpose: see and create messages in the messenger
:right-one: pass:quotes[*CRM > Message > Show*]
:right-two: pass:quotes[*CRM > Message > Create*]
:right-three: pass:quotes[*Comments > Show*]
:right-four: pass:quotes[*Comments > Create*]
:right-five: pass:quotes[*Setup > Property > Show*]
:right-six: pass:quotes[*Setup > Property > Create*]

include::_includes:page$rights.adoc[]

[#tags-messenger]
=== Creating tags for the messenger

You can assign tags to the messages in the Messenger and filter them in the overview. Tags are keywords that make grouping messages very easy.

Which user rights are required and how to create tags is explained below.

[#rights-tags]
==== Assigning rights for back end users

include::_includes:page$tags-rights.adoc[]

[#create-tags]
==== Creating tags

include::_includes:page$tags-creation.adoc[]

[TIP]
.Create tags for the availability *Message (billable)*
====
If you want to create messages that should be *billed* via the Messenger, you have to create tags for the availability _Message (billable)_ in the same way. You have to add these tags to the <<#create-message, message>>.
====

[#complete-assistant]
=== Completing the assistant

To be able to send and receive messages with the Messenger, you have to complete the *Messenger configuration* assistant in the *Setup » Assistants » Basic setup* menu. This assistant has several steps to complete. These steps are explained in the following.

[TIP]
You have to complete the assistant for every inbox that you want to create. +
You can assign tags to each inbox to be able to <<#search-message, filter>> for these tags later.

[#service-activation]
==== Service activation

In this step, activate the Messenger service. If the button is blue (icon:toggle_on[set=material, role=skyBlue]), the service is activated. If the button is grey (icon:toggle_off[set=material, role=darkGrey]), the service has _not_ been activated yet.

[#email-forwarding]
==== Email forwarding

In this step, a cryptic email address is automatically created that builds the forwarding email address. Use this email address to set up your email client. This ensures that your emails will be forwarded automatically. Note that you _cannot_ change this cryptic email address.

In the lower part, enter all email addresses that are allowed to send messages to the cryptic, forwarding email address stated above.

You can add as many email addresses as you like by clicking on *Add* (icon:plus-square[role="green"]).

[#verification-email-addresses]
==== Verification of email addresses

In this step, you can see the progress of the verification process. plentymarkets sends an email to all email addresses that you entered in the previous step <<#email-forwarding, Email forwarding>>. The system then checks whether the email addresses are valid and the forwarding works correctly.

[#settings-email-despatch]
==== Settings for the email despatch

In this step, save the login details of the email inbox from which you want to send emails so that your plentymarkets system can send emails such as order or shipping confirmations from this email address. 

After having entered the login details (host name, user name, port, password), select the encryption method and enter the sender email address and the sender name. This email address and this name will be shown to the recipients of your emails from this inbox.

*_Note for mailbox.org mailboxes:_* Enter the port *465* and select *SSL* as encryption method.

Select also in this step an email template for the email despatch. Be sure to have the email template created in the xref:crm:emailbuilder.adoc#[EmailBuilder] in advance. Note that the template you select here should contain Messenger variables. 

The following Messenger-related variables are available in the EmailBuilder:

* Message ID
* Message conversation ID
* Message content
* Message subject
* Message preview
* Message minutes
* Has billed minutes

[#settings-email-receipt]
==== Settings for receiving emails

In this step, you select one or multiple tags that should be assigned to the messages when these messages are received from the forwarded addresses.

In the last section, select the subscribers who should be informed in case of new messages. Either select individual users from the drop-down list or select roles in order that all users that are assigned to this role will subscribe for new messages in this inbox.

[#create-message]
== Creating a message

Proceed as described below to create a new message in the Messenger.

[.instruction]
Creating a message:

. Go to *CRM » Messenger (Test phase)*.
. Click in the top left on icon:add[set=material] *New message*.
. Enter a value in the *Add receiver...* field and select the appropriate value from the suggestion list. +
*_Example:_* If you enter a number, possible receivers with this order ID or contact ID will be suggested (see <<#image-messenger-new-message-suggestion-list>>).
. Enter the subject of the message in the *Subject* field.
. Enter the message in the text field.
. Click on *Add attachments* (icon:attach_file[set=material]) to add attachments to the message.
. Click on *Assign tags to message* (icon:local_offer[set=material]) to assign tags for the message.
. Select further options, if needed, by clicking on icon:more_vert[set=material]. Note <<#table-create-new-message>>.
. Click no icon:forward_to_inbox[set=material] *SEND*.

[[image-messenger-new-message-suggestion-list]]
.Example: Suggestion list in the receiver field after having entered “101”
image::crm:messenger-new-message-suggestion-list.png[width=640, height=360]

[[table-create-new-message]]
.Creating a new message in the messenger
[cols="1,3"]
|====
|Setting |Explanation

|[#intable-recipients]*Recipients*
|Enter a name or ID here and select the appropriate value from the suggestion list (see <<#image-messenger-new-message-suggestion-list>>).

|[#intable-subject]*Subject*
|Enter a subject for the message.

|[#intable-text-field]*Text field*
|Enter the content of the message here.

|[#intable-add-attachments]*Add attachments* (icon:attach_file[set=material])
|Click on icon:attach_file[set=material] to add attachments to your message. Select as many attachments as you like from your computer. +
The following file types can be sent as an attachment: bmp, csv, gif, jpeg, json, pdf, png, tiff, txt, xlsx, zip.

|[#intable-whisper-mode]*Whisper mode* (icon:visibility[set=material] / icon:visibility_off[set=material, role=skyBlue])
|You can whisper messages to make these messages only visible for internal purposes but _not_ for your contacts. To do so, click on *Whisper mode* (icon:visibility[set=material]). You can see in this view that a message is whispered by means of the button icon:visibility_off[set=material, role=skyBlue]. The button changes from icon:forward_to_inbox[set=material] *SEND* to icon:visibility_off[set=material] *WHISPER*. +
In the overview, whispered messages are shown in _italics_. +
*_Note:_* Once the whisper mode has been activated for this message, you can <<#intable-bill-message, bill the message>>.

|[#intable-assign-tags-message]*Assign tags to message* (icon:local_offer[set=material])
|Click on icon:local_offer[set=material] to search for tags and select already existing tags for the message (icon:check_box[set=material, role=skyBlue]), add new tags (icon:add[set=material]) and edit existing tags (icon:edit[set=material]). +
*_Note:_* Once you selected a tag for the message, the button is shown in blue icon:local_offer[set=material, role=skyBlue]. This way you can see at a glance whether the message has tags. +
*_Important:_* To be able to <<#intable-bill-message, bill>> the message, you have to create at least one tag of the type *Messages (billable)*.

|[#intable-bill-message]*Bill message* (icon:more_vert[set=material])
|You can always bill a message as long as it is a <<#intable-whisper-mode, whispered message>>. Click on icon:more_vert[set=material] first. If you then activate the button *Bill message* (icon:toggle_on[set=material, role=skyBlue]), this message will be billed. The button changes from icon:forward_to_inbox[set=material] *SEND* to icon:visibility_off[set=material] *BILL AND SEND*. +
*_Note:_* You can only activate the button *Bill message* if the <<#intable-whisper-mode, whisper mode>> has been activated for this message.

|[#intable-timer]*Timer* (icon:more_vert[set=material])
|You can start a timer for every message. Click on icon:more_vert[set=material] first. If you activate the *Timer* button (icon:toggle_on[set=material, role=skyBlue]), the timer next to the icon:forward_to_inbox[set=material] *SEND* button will start running automatically. +
Click on icon:pause_circle[set=material] to stop the timer and on icon:play_circle[set=material] to start the timer again.

|[#intable-manage-inboxes]*Manage inboxes*
|Click on icon:edit[set=material] *Manage inboxes* to be redirected to the *Setup » Assistants » Basic settings* menu. Here, you can edit the inboxes by using the *Messenger configuration* <<#complete-assistant, assistant>>.

|[#intable-name-inbox]_Name of the currently selected inbox_
| Click on icon:arrow_drop_down[set=material] to select another inbox from the drop-down list. The list shows the names of the inboxes that you set up by <<#complete-assistant, completing the assistant>>.

|[#intable-send]*SEND*
|By clicking on icon:forward_to_inbox[set=material] *SEND*, the message will be sent. +
*_Note:_* If you bill the message, the button changes to icon:visibility_off[set=material] *BILL AND SEND*. If you whisper the message, this button is changed to icon:visibility_off[set=material] *WHISPER*.

|====

[#search-conversation]
== Searching for a conversation in the Messenger

Open all conversations in a list or select filters (icon:tune[set=material]) to narrow down the search results in the Messenger overview.

[.instruction]
Searching for a conversation in the Messenger:

. Go to *CRM » Messenger (Test phase)*. +
* *_Option 1:_* Click on icon:search[set=material] to see a list of all conversations.
* *_Option 2:_* Enter a search term from the conversation’s subject in the search field and select the appropriate filter from the suggestion list.
* *_Option 3_*: Click on icon:tune[set=material] to narrow down the search results with filters.
. Note the explanations about the filters in <<#table-search-message>>.

[[table-search-message]]
.Filter options in the Messenger
[cols="1,3"]
|====
|Filter |Explanation

|[#intable-filter-subject]*Subject*
|Enter a word to search for conversations containing this word in their subject line.

|[#intable-filter-short-id]*Short ID*
|Enter the ID of the conversation to only search for the conversation with this ID.

|[#intable-filter-from-to]*From* / *To*
|Enter a date or select the dates from the calendars (icon:today[set=material]) to search for conversations within a certain time period.

|[#intable-filter-referrer]*Referrer*
|Select a referrer to only search for conversations with this referrer. +
Available options: *Back end*, *REST*, *Plugin* and *PayPal plugin*.

|[#intable-filter-status]*Status*
|Select a status to search for conversations with this specific status. +
Available values: *Done* and *Not done*.

|[#intable-filter-has-attachments]*Has attachments*
|Select *Yes* to search for conversations with attached files. Select *No* to search for conversations that have no files attached. 

|[#intable-filter-has-billed-messages]*Has billed messages*
|Select *Yes* to search for conversations that contain billed messages. Select *No* to search for conversations that does not contain any billed messages.

|[#intable-filter-contact-id]*Contact ID*
|Enter an ID to only search for conversations that are linked with this contact ID.

|[#intable-filter-order-id]*Order ID*
|Enter an ID to only search for conversations that are linked with this order ID.

|[#intable-filter-email]*Email*
|Enter an email address to search for conversations that contain this email address.

|[#intable-filter-tags]*Tags*
|Select (icon:check_box[set=material, role=skyBlue]) tags to only search for conversations with these <<#tags-messenger, tags>>.

|[#intable-filter-reset]*Reset*
|Resets the selected filter criteria.

|[#intable-filter-search]*Search*
|Starts the search. The conversations found are listed in the overview. +
*_Tip:_* Don’t choose any filters if you want to see all of the conversations in the overview.

|====

[#save-current-filter]
== Saving the current filter

When you start a search, your selected filters are displayed up top as so-called “chips”. You can save these filters to apply them again more quickly and easily in the future.

[.instruction]
Saving the current filter: 

. Start a search.
. Click on *Saved filters* (icon:bookmarks[set=material]).
. Click on icon:bookmark_border[set=material] *Save current filter*.
. Enter a name for the filter.
. Decide whether
** this filter should be <<#default-filter, set as default filter>> (icon:toggle_on[set=material, role=skyBlue])
** this filter should be created for all users (icon:toggle_on[set=material, role=skyBlue]).
. Click on *SAVE*. +
→ The filter now appears under *Saved filters* (icon:bookmarks[set=material]).

[TIP]
Use drag-and-drop to arrange the filters in a specific order by clicking on *Move* (icon:drag_indicator[set=material]). Click on icon:delete[set=material] to delete a filter.

[#apply-saved-filters]
== Applying saved filters

Proceed as follows to apply an already saved filter for the search.

[.instruction]
Applying saved filters: 

. Click on *Saved filters* (icon:bookmarks[set=material]).
. Click on a filter that you have already created. +
→ The search is started and the filter settings are displayed up top as so-called “chips”.

[#default-filter]
== Setting a default filter

To make sure that you don’t have to select a filter that you use quite often from the list of your <<#apply-saved-filters, saved filters>> every time when opening the *CRM » Contacts (Test phase)* menu, you can set a created filter as default filter. Every time when you open the messenger, this filter will be automatically applied.

You can set the filter as default filter directly when creating it as described in <<#save-current-filter, Saving the current filter>> or you can set the filter as default in the overview afterwards.

Click in the line of the saved filter on icon:star[set=material] *Set as default*. If you want to set another filter as default filter, deactivate the currently selected default filter by clicking on icon:star_outline[set=material] *Do not use as default*.

[#configure-columns]
=== Configuring columns

You can have the following columns displayed in the overview of the Messenger:

[[table-configure-columns-overview]]
.Messenger overview: Configure columns
[cols="1,3"]
|====
|Column |Explanation

|[#intable-overview-extend-relations]*Extend relations*
|Opens the available relations that are linked with the conversation by clicking on icon:chevron_right[set=material].

|[#intable-overview-selection]*Selection*
|Shows the checkbox for the <<#group-function, group function>> (icon:check_box_outline_blank[set=material]) in the overview.

|[#intable-overview-status]*Status*
|Shows with the symbol icon:circle[set=material, role=skyBlue] that the message is still unread. Shows with the symbol icon:circle[set=material, role=green] that the message is closed.

|[#intable-overview-short-id]*Short ID*
|Right next to the title bar, click on icon:arrow_upward[set=material] or icon:arrow_downward[set=material] to sort the table in ascending or descending order by the ID.

|[#intable-overview-referrer]*Referrer*
|Shows with the symbol the referrer of the message. +
Possible values: *Back end*, *REST*, *Plugin*, *PayPal Plugin*.

|[#intable-overview-relations]*Relations*
a|The conversation relations are shown here, for example

* icon:person[set=material] _Name of the contact (contact ID)_
* icon:shopping_cart[set=material] _Order ID_
* icon:mail[set=material] _Email address_ 
* subscribers of the conversation.

In the line of the conversation, click on icon:chevron_right[set=material] to see all available relations at a glance. Click on icon:expand_more[set=material] to close the relation area again. The contact and the order have a direct link to the contact data record respectively to the order.

|[#intable-overview-subject]*Subject*
|Shows the subject of the first message within the conversation.

|[#intable-overview-created-at]*Created at*
|Shows the date and the time when the message was created. Right next to the title bar, click on icon:arrow_upward[set=material] or icon:arrow_downward[set=material] to sort the table in ascending or descending order by the date.

|[#intable-overview-updated-at]*Updated at*
|Shows the date and time when the message was updated. Right next to the title bar, click on icon:arrow_upward[set=material] or icon:arrow_downward[set=material] to sort the table in ascending or descending order by the date.

|[#intable-overview-tags]*Tags*
|Shows the <<#context-menu-tags-conversation, tags>> that are assigned to the conversation.

|[#intable-overview-attachments]*Attachments*
|The symbol icon:attach_file[set=material] in the *Number of attachments* (icon:attach_file[set=material]) column shows whether the conversation has attachments. When you hover with your cursor over the symbol, you can see how many attachments the conversation has. Right next to the title bar, click on icon:arrow_upward[set=material] to sort the table by the number of orders.

|[#intable-overview-billed-messages]*Billed messages*
|The symbol icon:credit_card[set=material] in the *Billed messages* (icon:credit_card[set=material]) column shows whether the conversation has billed messages. When you hover with your cursor over the symbol, you can see the number of billed messages. Right next to the title bar, click on icon:arrow_upward[set=material] to sort the table by the number of billed messages.

|[#intable-overview-billed-minutes]*Billed minutes*
|The symbol icon:av_timer[set=material] in the *Billed minutes* (icon:av_timer[set=material]) column shows whether the conversation has billed minutes. When you hover with your cursor over the symbol, you can see the number of billed minutes. Right next to the title bar, click on icon:arrow_upward[set=material] to sort the table by the number of billed minutes.

|[#intable-overview-subscribed]*Subscribed*
|The symbol icon:done[set=material] in the column icon:notifications[set=material] shows whether you have <<#subscribe-conversation, subscribed for>> the conversation.
   

|[#intable-overview-context-menu]*Context menu*
|Allows to edit conversations in the overview using the <<#context-menu, context menu>>.

|====

Click on the button *Configure columns* (icon:settings[set=material]) on the top right to deactivate the columns that are already shown in the overview.

[#switch-view]
=== Switching the view

It is possible to change the view in the Messenger from a table to a list. To do so, click on *Change view* (icon:list[set=material]) in the top right of the overview. +
The table view is selected by default.

[#context-menu]
== Editing conversations in the overview

In the Messenger overview the following functions are available when clicking in the line of the conversation on icon:more_vert[set=material].

[[image-messenger-context-menu-overview]]
.Editing a conversation via the context menu
image::crm:messenger-context-menu-overview.png[width=640, height=360]

* <<#context-menu-mark-conversation-as-read-unread, Marking a conversation as read / unread>>
* <<#context-menu-tags-conversation, Assign tags to conversation>>
* <<#context-menu-mark-conversation-as-done-not-done, Marking a conversation as done / not done>>
* <<#context-menu-subscribe-unsubscribe-conversation, Subscribing for a conversation / Unsubscribing from a conversation>>
* <<#context-menu-delete-conversation, Deleting a conversation>>

[#context-menu-mark-conversation-as-read-unread]
=== Marking a conversation as read / unread

Proceed as described in the following sub-chapters to mark a conversation as <<#conversation-mark-as-read, read>> or <<#conversation-mark-as-unread, unread>>.

[#conversation-mark-as-read]
==== Marking a conversation as read

Proceed as described below to mark a conversation in the overview as read.

[.instruction]
Marking a conversation as read:

. Go to *CRM » Messenger (Test phase)*.
. In the line of the conversation that you want to mark as read, click on icon:more_vert[set=material].
. Click on icon:mark_email_read[set=material] *Mark conversation as read*. +
→ The line of the conversation is no longer shown in bold and the blue circle icon:circle[set=material, role=skyBlue] at the beginning of the line disappears.

[#conversation-mark-as-unread]
==== Marking a conversation as unread

Proceed as described below to mark a conversation in the overview as unread.

[.instruction]
Marking a conversation as unread:

. Go to *CRM » Messenger (Test phase)*.
. In the line of the conversation that you want to mark as unread, click on icon:more_vert[set=material].
. Click on icon:mark_email_unread[set=material] *Mark conversation as unread*. +
→ The line of the conversation is shown in bold and a blue circle icon:circle[set=material, role=skyBlue] appears at the beginning of the line.

[#context-menu-tags-conversation]
=== Assigning tags to a conversation

Proceed as described below to assign a tag to a conversation. You can also search for tags that are available for the Messenger. This might also be useful if you really created a lot of tags for the *Messages* or *Messages (billable)* areas.

[.instruction]
Assigning tags to a conversation:

. Go to *CRM » Messenger (Test phase)*.
. Click in the line of the conversation on icon:more_vert[set=material].
. Click on icon:local_offer[set=material] *Assign tags to conversation* to see a list of all tags that you have already <<#tags-messenger, created>> for the areas *Messages* and *Messages (billable)*. +
*_Tip:_* If you have created a lot of tags for the *Messages* or *Messages (billable)* areas, enter the name of the tag in the search field *Search for tag*.
. Select (icon:check_box[set=material, role=skyBlue]) the tags that you want to assign to the conversation. +
→ The tag is assigned to the conversation and you see the tag in the overview in the *Tags* column.

[#add-tag]
==== Adding a tag

If you could not find the tag you were looking for as described in the <<#context-menu-tags, Assigning tags>> chapter, you can create a new tag from the Messenger overview. To do so, proceed as described below.

[.instruction]
Creating a new tag:

. Go to *CRM » Messenger (Test phase)*.
. Click in the line of the conversation on icon:more_vert[set=material].
. Click on icon:local_offer[set=material] *Assign tags to conversation*.
. Click on icon:add[set=material] *Add tag* to create a new tag. +
→ You will automatically be redirected to the *Setup » Settings » Tags* menu. You can create more tags for the areas *Messages* or *Messages (billable)* there.

[#edit-tag]
==== Editing a tag

Proceed as described below to edit a tag from the Messenger overview.

[.instruction]
Editing a tag:

. Go to *CRM » Messenger (Test phase)*.
. Click in the line of the conversation on icon:more_vert[set=material].
. Click on icon:local_offer[set=material] *Assign tags to conversation*.
. Click on icon:edit[set=material] *Edit tag* to edit an existing tag. +
→ You will automatically be redirected to the *Setup » Settings » Tags* menu. There, you can edit the tags.

[#context-menu-mark-conversation-as-done-not-done]
=== Marking a conversation as done / not done

Proceed as described in the following sub-chapters to mark a conversation as <<#context-menu-mark-as-done, done>> or <<#context-menu-mark-as-not-done, not done>>.

[#context-menu-mark-as-done]
==== Marking a conversation as done

Proceed as described below to mark a conversation in the overview as done.

[.instruction]
Marking a conversation as done:

. Go to *CRM » Messenger (Test phase)*.
. In the line of the conversation that you want to mark as done, click on icon:more_vert[set=material].
. Click on icon:circle[set=material] *Mark conversation as done*. +
→ At the beginning of the conversation’s line, the symbol icon:task[set=material, role=skyBlue] is shown.

[#context-menu-mark-as-not-done]
==== Marking a conversation as not done

Proceed as described below to mark a conversation in the overview as not done.

[.instruction]
Marking a conversation as not done:

. Go to *CRM » Messenger (Test phase)*.
. In the line of the conversation that you want to mark as not done, click on icon:more_vert[set=material].
. Click on icon:radio_button_unchecked[set=material] *Mark conversation as not done*. +
→ At the beginning of the conversation’s line, the symbol icon:task[set=material, role=skyBlue] is shown.

[#context-menu-subscribe-unsubscribe-conversation]
=== Subscribing for / Unsubscribing from a conversation

You can subscribe for conversations where you are not directly part of so that you will be informed in case of new messages within this conversation. Not being directly part of it means that you are neither a recipient nor a sender of a message within this conversation. Of course, you can unsubscribe from a conversation’s subscriber list any time with just one click.

[#subscribe-for-conversation]
==== Subscribing for conversations

Proceed as follows to subscribe for a conversation.

[.instruction]
Subscribing for a conversation:

. Go to *CRM » Messenger (Test phase)*.
. In the line of the conversation that you want to subscribe for, click on icon:more_vert[set=material].
. Click on icon:notifications_active[set=material] *Subscribe for conversation*. +
→ The column icon:notifications[set=material] *Subscribed* shows the symbol icon:done[set=material].

[#unsubscribe-conversation]
==== Unsubscribing from a conversation

Proceed as described below to unsubscribe from a conversation.

[.instruction]
Unsubscribing from a conversation:

. Go to *CRM » Messenger (Test phase)*.
. Click in the line of the conversation that you want to unsubscribe from on icon:more_vert[set=material].
. Click on icon:notifications_off[set=material] *Unsubscribe from conversation*. +
→ The column icon:notifications[set=material] *Subscribed* does not show the symbol icon:done[set=material] any longer.

[#context-menu-delete-conversation]
=== Deleting a conversation

Proceed as described below to delete a conversation in the overview.

[.instruction]
Deleting a conversation:

. Go to *CRM » Messenger (Test phase)*.
. In the line of the conversation that you want to delete, click on icon:more_vert[set=material].
. Click on icon:delete[set=material] *Delete*. +
→ A window opens and you need to confirm your decision.
. Click on *Yes*. +
→ The conversation is deleted and moved to <<#trash, trash>>.

[#bill-message]
== Billing a message

You can always bill a message if it is a whispered message.

[.instruction]
Billing a message:

. Go to *CRM » Messenger (Test phase)*.
. Click in the top left on icon:add[set=material] *New message*.
. Enter a value in the *Receiver* field and select the appropriate value from the suggestion list. +
*_Example:_* If you enter a number, possible receivers with this order ID or contact ID will be suggested (see <<#image-messenger-new-message-suggestion-list>>).
. Enter the subject of the message in the *Subject* field.
. Enter the message in the text field.
. Click on icon:local_offer[set=material] to assign tags for the message. +
*_Important:_* To be able to bill messages, you have to create a tag of the type *Messages (billable)* in the *Setup » Settings » Tags* menu.
. Click on icon:more_vert[set=material].
. Activate the button *Bill message* (icon:toggle_on[set=material, role=skyBlue]).
. Click on icon:visibility_off[set=material] *BILL AND SEND*. +
→ The window *Bill and send* opens.
. In the *Timer* field, you can see the time that the timer has tracked so far.
. You can adjust the value in the *Minutes* field, if needed.
. Activate the field *Bill minutes* (icon:check_box[set=material, role=skyBlue]).
. Click on *Confirm*.

[#edit-single-message]
== Editing a single message

You already know the <<#context-menu, context menu for the conversations>> that is described earlier on this page. Of course, you can also edit single messages using a context menu. Proceed as described in the following sub-chapters.

////
TODO: Screenshot von einer einzelnen Nachricht mit den Mini-Icons hier einfügen und erklären.
--> Absender / Datum / Uhrzeit ohne Sekunden / Tag-Namen (getrennt durch |-Zeichen) / Anhang-Symbol (Anzahl sichtbar beim drüber hovern) / Uhr-Symbol, Kreditkarten-Symbol und Anzahl der Minuten im Fall einer abgerechneten Nachricht.
////

[[image-messenger-edit-single-message]]
.Editing a single message via the context menu
image::crm:messenger-edit-single-message-en.png[width=640, height=360]

Once you selected a message within a conversation, you can display the messages’ content in plain text format by clicking on icon:chevron_right[set=material] at the beginning of the message. This way, you are able to see a preview of the message content already without <<#open-single-message, opening>> the entire message.

[#open-single-message]
=== Opening a message

To open a message, you can either directly click on the message. Or you open the context menu in the line of the message by clicking on icon:more_vert[set=material] and then on icon:open_link[set=material] *Open message*.

[#assign-tags-to-single-message]
=== Assigning tags to the message

Proceed as described below to assign a tag to a single message.

[.instruction]
Assigning tags to the message:

. Go to *CRM » Messenger (Test phase)*.
. Open the conversation that contains the message you want to assign a tag for.  
. Open the message by clicking in the line of the message.
. Click on icon:local_offer[set=material] *Assign tags to message* to see a list of all tags that you have already <<#tags-messenger, created>> for the areas *Messages* and *Messages (billable)*. +
*_Tip:_* If you have created a lot of tags for the *Messages* or *Messages (billable)* areas, enter the name of the tag in the search field *Search for tag*.
. Select (icon:check_box[set=material, role=skyBlue]) the tags that you want to assign to the message. 

////
FRAGE: Kann man hier wirklich nur einer einzelnen Nachricht einen Tag zuweisen oder bekommt dann die gesamte Konversation auch den Tag zugewiesen? Wenn nur die Nachricht den Tag erhält, wie verhält es sich dann mit den Filtern in der Suche? Wird der Tag an einzelnen Nachrichten in der Suche berücksichtigt? 
////

[#attachments-single-message]
=== Downloading attachments

You can either download the attachments of the message one by one or download all attachments of the message as a ZIP file to your computer. 

[.instruction]
Downloading attachments:

. Go to *CRM » Messenger (Test phase)*.
. Open the conversation that contains the message whose attachment(s) you want to download.  
. Open the message by clicking in the line of the message.
. Click on icon:more_vert[set=material].
. Click on icon:attach_file[set=material] *Attachments*.
. Click on one attachment or on icon:file_download[set=material] *Download all files*. +
→ A window opens and you can choose a location on your computer where to save the file(s).

[#delete-single-message]
=== Deleting a message

Proceed as described below to delete a single message.

[.instruction]
Deleting a single message:

. Go to *CRM » Messenger (Test phase)*.
. Open the conversation that contains the message you want to delete.  
. Open the message by clicking in the line of the message.
. Click on icon:more_vert[set=material].
. Click on icon:delete[set=material] *Delete*. +
→ A window opens and you need to confirm your decision.
. Click on *Yes*. +
→ The conversation is deleted and moved to <<#trash, trash>>.

////
FRAGE: Wird die einzelne gelöschte Nachricht auch in den Papierkorb verschoben? Konnte ich im System nicht nachstellen.
////

[#group-function]
== Carrying out the group function

Once you have selected a message in the overview (icon:check_box[set=material, role=skyBlue]), the different buttons become visible (see <<#image-messenger-group-functions-conversations>>). <<#table-group-functions-messenger>> lists the elements from the group functions as well as their explanations.

[[image-messenger-group-functions-conversations]]
.Group function in the overview
image::crm:messenger-group-function.png[width=640, height=360]

[[table-group-functions-messenger]]
.Using the group function in the Messenger
[cols="2,1,6"]
|====
|Element |Symbol |Explanation

|[#intable-group-function-mark-conversations-read]*Mark conversations as read*
|icon:mark_email_read[set=material]
|Marks all selected conversations as read.

|[#intable-group-function-mark-conversations-unread]*Mark conversations as unread*
|icon:mark_email_unread[set=material]
|Marks all selected conversations as unread. The conversations are then displayed in bold.

|[#intable-group-function-mark-conversations-done]*Mark conversations as done*
|icon:circle[set=material]
|Marks all selected conversations as done.

|[#intable-group-function-mark-conversations-not-done]*Mark conversations as not done*
|icon:radio_button_unchecked[set=material]
|Marks all selected conversations as not done.

|[#intable-group-function-assign-tags-conversations]*Assign tags to conversations*
|icon:local_offer[set=material]
|Assigns the desired tag to all selected conversations.

|[#intable-group-function-delete-conversations]*Delete conversations*
|icon:delete[set=material]
|Deletes all selected conversations after having confirmed your decision.

|====

[#new-messages]
== New messages

In the navigation on the left-hand side of the messenger, you can find the folder icon:mark_chat_unread[set=material] *New messages* below the folder icon:inbox[set=material] *Inbox*.

[discrete]
[#configure-columns-new-messages]
=== Configuring columns

You can have the following columns displayed in the *New messages* folder of the Messenger:

[[table-configure-columns-new-messages]]
.New messages: Configure columns
[cols="1,3"]
|====
|Column |Explanation

|[#intable-new-messages-extend-relations]*Extend relations*
|Opens the available relations that are linked with the conversation by clicking on icon:chevron_right[set=material].

|[#intable-new-messages-selection]*Selection*
|Shows the checkbox for the <<#group-function, group function>> (icon:check_box_outline_blank[set=material]) in the overview.

|[#intable-new-messages-status]*Status*
|Shows with the symbol icon:circle[set=material, role=skyBlue] that the message is still unread. Shows with the symbol icon:circle[set=material, role=green] that the message is closed.

|[#intable-new-messages-short-id]*Short ID*
|Right next to the title bar, click on icon:arrow_upward[set=material] or icon:arrow_downward[set=material] to sort the table in ascending or descending order by the ID.

|[#intable-new-messages-referrer]*Referrer*
|Shows with the symbol the referrer of the message. +
Possible values: *Back end*, *REST*, *Plugin*, *PayPal Plugin*.

|[#intable-new-messages-relations]*Relations*
a|The conversation relations are shown here, for example

* icon:person[set=material] _Name of the contact (contact ID)_
* icon:shopping_cart[set=material] _Order ID_
* icon:mail[set=material] _Email address_ 
* subscribers of the conversation.

In the line of the conversation, click on icon:chevron_right[set=material] to see all available relations at a glance. Click on icon:expand_more[set=material] to close the relation area again. The contact and the order have a direct link to the contact data record respectively to the order.

|[#intable-new-messages-subject]*Subject*
|Shows the subject of the first message within the conversation.

|[#intable-new-messages-created-at]*Created at*
|Shows the date and the time when the message was created. Right next to the title bar, click on icon:arrow_upward[set=material] or icon:arrow_downward[set=material] to sort the table in ascending or descending order by the date.

|[#intable-new-messages-updated-at]*Updated at*
|Shows the date and time when the message was updated. Right next to the title bar, click on icon:arrow_upward[set=material] or icon:arrow_downward[set=material] to sort the table in ascending or descending order by the date.

|[#intable-new-messages-tags]*Tags*
|Shows the <<#context-menu-tags-conversation, tags>> that are assigned to the conversation.

|[#intable-new-messages-attachments]*Attachments*
|The symbol icon:attach_file[set=material] in the *Number of attachments* (icon:attach_file[set=material]) column shows whether the conversation has attachments. When you hover with your cursor over the symbol, you can see how many attachments the conversation has. Right next to the title bar, click on icon:arrow_upward[set=material] to sort the table by the number of orders.

|[#intable-new-messages-billed-messages]*Billed messages*
|The symbol icon:credit_card[set=material] in the *Billed messages* (icon:credit_card[set=material]) column shows whether the conversation has billed messages. When you hover with your cursor over the symbol, you can see the number of billed messages. Right next to the title bar, click on icon:arrow_upward[set=material] to sort the table by the number of billed messages.

|[#intable-new-messages-billed-minutes]*Billed minutes*
|The symbol icon:av_timer[set=material] in the *Billed minutes* (icon:av_timer[set=material]) column shows whether the conversation has billed minutes. When you hover with your cursor over the symbol, you can see the number of billed minutes. Right next to the title bar, click on icon:arrow_upward[set=material] to sort the table by the number of billed minutes.

|[#intable-new-messages-subscribed]*Subscribed*
|The column icon:notifications[set=material] shows with the symbol icon:done[set=material] whether you have <<#subscribe-conversation, subscribed for>> the conversation.

|[#intable-new-messages-context-menu]*Context menu*
|Allows to edit conversations in the overview using the <<#context-menu, context menu>>.

|====

Click on the button *Configure columns* (icon:settings[set=material]) on the top right to deactivate the columns that are already shown in the overview.

[TIP]
.Carrying out the group function
====
You can also use the group function in the *New messages* area. The group function in the *New messages* area works the same way as the group function in the *Inbox* area. For further information, refer to the <<#group-function, Using the group function>> chapter.
====

[#my-messages]
== My messages

In the navigation on the left-hand side of the messenger, you can find the folder icon:3p[set=material] *My messages* below the folder icon:inbox[set=material] *Inbox*. You can see all conversations here that you <<#subscribe-conversations, subscribed for>>. 

[discrete]
[#configure-columns-my-messages]
=== Configuring columns

You can have the following columns displayed in the *My messages* folder of the Messenger:

[[table-configure-columns-my-messages]]
.My messages: Configure columns
[cols="1,3"]
|====
|Column |Explanation

|[#intable-my-messages-extend-relations]*Extend relations*
|Opens the available relations that are linked with the conversation by clicking on icon:chevron_right[set=material].

|[#intable-my-messages-selection]*Selection*
|Shows the checkbox for the <<#group-function, group function>> (icon:check_box_outline_blank[set=material]) in the overview.

|[#intable-my-messages-status]*Status*
|Shows with the symbol icon:circle[set=material, role=skyBlue] that the message is still unread. Shows with the symbol icon:circle[set=material, role=green] that the message is closed.

|[#intable-my-messages-short-id]*Short ID*
|Right next to the title bar, click on icon:arrow_upward[set=material] or icon:arrow_downward[set=material] to sort the table in ascending or descending order by the ID.

|[#intable-my-messages-referrer]*Referrer*
|Shows with the symbol the referrer of the message. +
Possible values: *Back end*, *REST*, *Plugin*, *PayPal Plugin*.

|[#intable-my-messages-relations]*Relations*
a|The conversation relations are shown here, for example

* icon:person[set=material] _Name of the contact (contact ID)_
* icon:shopping_cart[set=material] _Order ID_
* icon:mail[set=material] _Email address_ 
* subscribers of the conversation.

In the line of the conversation, click on icon:chevron_right[set=material] to see all available relations at a glance. Click on icon:expand_more[set=material] to close the relation area again. The contact and the order have a direct link to the contact data record respectively to the order.

|[#intable-my-messages-subject]*Subject*
|Shows the subject of the first message within the conversation.

|[#intable-my-messages-created-at]*Created at*
|Shows the date and the time when the message was created. Right next to the title bar, click on icon:arrow_upward[set=material] or icon:arrow_downward[set=material] to sort the table in ascending or descending order by the date.

|[#intable-my-messages-updated-at]*Updated at*
|Shows the date and time when the message was updated. Right next to the title bar, click on icon:arrow_upward[set=material] or icon:arrow_downward[set=material] to sort the table in ascending or descending order by the date.

|[#intable-my-messages-tags]*Tags*
|Shows the <<#context-menu-tags-conversation, tags>> that are assigned to the conversation.

|[#intable-my-messages-attachments]*Attachments*
|The symbol icon:attach_file[set=material] in the *Number of attachments* (icon:attach_file[set=material]) column shows whether the conversation has attachments. When you hover with your cursor over the symbol, you can see how many attachments the conversation has. Right next to the title bar, click on icon:arrow_upward[set=material] to sort the table by the number of orders.

|[#intable-my-messages-billed-messages]*Billed messages*
|The symbol icon:credit_card[set=material] in the *Billed messages* (icon:credit_card[set=material]) column shows whether the conversation has billed messages. When you hover with your cursor over the symbol, you can see the number of billed messages. Right next to the title bar, click on icon:arrow_upward[set=material] to sort the table by the number of billed messages.

|[#intable-my-messages-billed-minutes]*Billed minutes*
|The symbol icon:av_timer[set=material] in the *Billed minutes* (icon:av_timer[set=material]) column shows whether the conversation has billed minutes. When you hover with your cursor over the symbol, you can see the number of billed minutes. Right next to the title bar, click on icon:arrow_upward[set=material] to sort the table by the number of billed minutes.

|[#intable-my-messages-subscribed]*Subscribed*
|The symbol icon:done[set=material] in the column icon:notifications[set=material] shows whether you have <<#subscribe-conversation, subscribed for>> the conversation.

|[#intable-my-messages-context-menu]*Context menu*
|Allows to edit conversations in the overview using the <<#context-menu, context menu>>.

|====

Click on the button *Configure columns* (icon:settings[set=material]) on the top right to deactivate the columns that are already shown in the overview.

[TIP]
.Carrying out the group function
====
You can also use the group function in the *My messages* area. The group function in the *My messages* area works the same way as the group function in the *Inbox* area. For further information, refer to the <<#group-function, Using the group function>> chapter.
====

[#trash]
== Trash 

In the navigation on the left-hand side of the Messenger, you can find the folder icon:delete[set=material] *Trash*. Here you can find all <<#context-menu-delete-conversation, deleted conversations>> and all<<#delete-single-message, deleted messages>>.

//// 
Wird es in Zukunft möglich sein, alle Nachrichten aus dem Papierkorb mit einem Klick zu entfernen (so wie bei "Papierkorb leeren" in E-Mail-Programmen? Oder werden die Nachrichten automatisch nach einem bestimmten Zeitraum gelöscht? Wird es möglich sein, Nachrichten aus dem Papierkorb "zurückzuholen", wenn ich die Konversation bzw. Nachricht auf "nicht abgeschlossen" setze?
////

[discrete]
[#configure-columns-trash]
=== Configuring columns

You can have the following columns displayed in the trash folder of the Messenger:

[[table-configure-columns-trash]]
.Trash: Configure columns
[cols="1,3"]
|====
|Column |Explanation

|[#intable-trash-extend-relations]*Extend relations*
|Opens the available relations that are linked with the conversation by clicking on icon:chevron_right[set=material].

|[#intable-trash-selection]*Selection*
|Shows the checkbox for the <<#group-function, group function>> (icon:check_box_outline_blank[set=material]) in the overview.

|[#intable-trash-status]*Status*
|Shows with the symbol icon:circle[set=material, role=skyBlue] that the message is still unread. Shows with the symbol icon:circle[set=material, role=green] that the message is closed.

|[#intable-trash-short-id]*Short ID*
|Right next to the title bar, click on icon:arrow_upward[set=material] or icon:arrow_downward[set=material] to sort the table in ascending or descending order by the ID.

|[#intable-trash-referrer]*Referrer*
|Shows with the symbol the referrer of the message. +
Possible values: *Back end*, *REST*, *Plugin*, *PayPal Plugin*.

|[#intable-trash-relations]*Relations*
a|The conversation relations are shown here, for example

* icon:person[set=material] _Name of the contact (contact ID)_
* icon:shopping_cart[set=material] _Order ID_
* icon:mail[set=material] _Email address_
* subscribers of the conversation.

In the line of the conversation, click on icon:chevron_right[set=material] to see all available relations at a glance. Click on icon:expand_more[set=material] to close the relation area again. The contact and the order have a direct link to the contact data record respectively to the order.

|[#intable-trash-subject]*Subject*
|Shows the subject of the first message within the conversation.

|[#intable-trash-created-at]*Created at*
|Shows the date and the time when the message was created. Right next to the title bar, click on icon:arrow_upward[set=material] or icon:arrow_downward[set=material] to sort the table in ascending or descending order by the date.

|[#intable-trash-updated-at]*Updated at*
|Shows the date and time when the message was updated. Right next to the title bar, click on icon:arrow_upward[set=material] or icon:arrow_downward[set=material] to sort the table in ascending or descending order by the date.

|[#intable-trash-tags]*Tags*
|Shows the <<#context-menu-tags-conversation, tags>> that are assigned to the conversation.

|[#intable-trash-attachments]*Attachments*
|The symbol icon:attach_file[set=material] in the *Number of attachments* (icon:attach_file[set=material]) column shows whether the conversation has attachments. When you hover with your cursor over the symbol, you can see how many attachments the conversation has. Right next to the title bar, click on icon:arrow_upward[set=material] to sort the table by the number of orders.

|[#intable-trash-billed-messages]*Billed messages*
|The symbol icon:credit_card[set=material] in the *Billed messages* (icon:credit_card[set=material]) column shows whether the conversation has billed messages. When you hover with your cursor over the symbol, you can see the number of billed messages. Right next to the title bar, click on icon:arrow_upward[set=material] to sort the table by the number of billed messages.

|[#intable-trash-billed-minutes]*Billed minutes*
|The symbol icon:av_timer[set=material] in the *Billed minutes* (icon:av_timer[set=material]) column shows whether the conversation has billed minutes. When you hover with your cursor over the symbol, you can see the number of billed minutes. Right next to the title bar, click on icon:arrow_upward[set=material] to sort the table by the number of billed minutes.

|[#intable-trash-subscribed]*Subscribed*
|The symbol icon:done[set=material] in the column icon:notifications[set=material] shows whether you have <<#subscribe-conversation, subscribed for>> the conversation.

|[#intable-trash-context-menu]*Context menu*
|Allows to edit conversations in the overview using the <<#context-menu, context menu>>.

|====

Click on the button *Configure columns* (icon:settings[set=material]) on the top right to deactivate the columns that are already shown in the overview.

[TIP]
.Carrying out the group function
====
You can also use the group function in the trash folder. The group function for the trash folder works the same way as the group function in the *Inbox* area. For further information, refer to the <<#group-function, Using the group function>> chapter.
====
