= Emails
:keywords: info service, email template, template variables template functions, automatic email
:description: Learn how to set up email templates and automatically send emails to your contacts.
:author: team-crm

[IMPORTANT]
.New EmailBuilder to create templates
====
Note the new EmailBuilder in the *CRM » EmailBuilder* menu which you can use to quickly and easily create and edit your email templates via drag-and-drop and with the help of pre-defined widgets.

Further details about the new EmailBuilder can be found in our xref:crm:emailbuilder-testphase.adoc#[user manual].
====

All emails that are sent with plentymarkets are based on email templates. Go to *Setup » Client » [Select client] » Email » Templates* to manage email templates. Create as many email templates as desired. In case of certain events, e.g. when persons subscribe to a newsletter, your plentymarkets system automatically creates emails from these templates and sends them to your contacts. You determine the time when the emails are to be sent automatically.

[#50]
== Assigning rights

:rights-purpose: to work with certain settings in the email area
:right-one: pass:quotes[*CRM > Email > Read*]

include::_includes:partial$rights.adoc[]

[#100]
== Saving the email server's login details

In the *Email accounts* assistant in the *Setup » Assistants » Basic setup* menu, you save the login details of a mailbox so that plentymarkets emails such as order or shipping confirmations can be sent from this email address.

[.collapseBox]
.Settings in the *Email accounts* assistant in the *Login details* step
--
[[table-email-server-login-details]]
.Saving email server login details in the *Email accounts* assistant
[cols="1,3"]
|====
|Setting |Explanation

2+| Enter the server details of your email provider.

| *Outgoing mail server/SMTP server*
|Enter the outgoing mail server as specified by the provider (usually smtp.domain.co.uk or mail.domain.co.uk). +
*_mailbox.org:_* For mailbox.org mailboxes, enter the outgoing mail server *smtp.mailbox.org* and select the encryption method *SSL*.

| *Port (standard port: 25)*
|Enter the value *25*. This value is correct for nearly all providers. Otherwise, ask your provider about the correct port. +
*_mailbox.org:_* For mailbox.org mailboxes, enter port *465* and select the encryption method *SSL*.

| *Encryption method*
| Select *SSL*, *TLS* or *No encryption*. +
*_mailbox.org:_* For mailbox.org mailboxes, enter port *465* and select the encryption method *SSL*.

2+| Enter the login details of your email account. 

| *Name of sender*
|Enter your own name or the name of your plentyShop. The name is displayed to the recipient. +
*_Note:_* Avoid using special characters in order to allow for correct display.

| *Email address*
|Enter the email address as it is listed in the email programme.

| *User name*
|Enter the user name that matches the email address. +
*_mailbox.org:_* The mailbox.org user name is the complete email address of the mailbox.org mailbox.

| *Password*
|Enter the password that matches the user name and email address.

2+|Would you like to test the email despatch now? +

|material:outgoing_mail[]
|Click on material:outgoing_mail[] to send a test email to the email address entered above.

2+|Would you like to activate the live mode? 

|material:check_box_outline_blank[]
|If you do not place a check mark for *Activate live mode* (material:check_box_outline_blank[]), the test mode is activated. +
All emails are only sent to the saved email address. This allows you to test the settings before switching to the live mode. +
*_Important:_* The test mode is only applied to this online shop. The settings for additional clients (shops) are carried out in the client’s menu.

|material:check_box[role=skyBlue]
|If you place a check mark for *Activate live mode* (material:check_box[role=skyBlue]), the live mode is activated.

|====
--

[TIP]
.Entering newsletter login details
====
Go to *Setup » Client » [Select client] » Email » Newsletter*. Enter the login details to use the newsletter service that is integrated in plentymarkets. For further information, refer to the xref:crm:sending-newsletters.adoc#200[Entering newsletter login details] chapter of the xref:crm:sending-newsletters.adoc#[Newsletters] page of the manual.
====

[#200]
== Selecting the encryption for email communication

The encryption methods *SSL*, *TLS* and the setting *no encryption* are available in plentymarkets. Select one of these encryption methods for the communication with the email server. Which settings you have to carry out is described in the following sub-chapters.

[#300]
=== Security via SSL encryption

Set up SSL encryption for protected data transfer between your email programs and your mailbox. <<#table-ssl-encryption>> explains the settings for SSL encryption in the *Email accounts* assistant in the *Login details* step.

[[table-ssl-encryption]]
.Settings for SSL encryption
[cols="1,3,3,3"]
|====
|Server type |Server |Connection security |Port

| *IMAP*
|mail.YOUR-DOMAIN.co.uk
|SSL/TLS
|993

| *POP3*
|mail.YOUR-DOMAIN.co.uk
|SSL/TLS
|995

| *SMTP*
|mail.YOUR-DOMAIN.co.uk
|SSL/TLS
|587
|====

[#400]
=== Security via STARTTLS

plentymarkets also provides STARTTLS in order to ensure compatibility with older email programs. <<#table-starttls-encryption>> explains the settings for STARTTLS encryption in the *Email accounts* assistant in the *Login details* step.

[[table-starttls-encryption]]
.Settings for STARTTLS encryption
[cols="1,3,3,3"]
|====
|Server type |Server |Connection security |Port

| *IMAP*
|mail.YOUR-DOMAIN.co.uk
|STARTTLS
|143

| *POP3*
|mail.YOUR-DOMAIN.co.uk
|STARTTLS
|110

| *SMTP*
|mail.YOUR-DOMAIN.co.uk
|STARTTLS
|25
|====

[#500]
=== Unencrypted connection

[WARNING]
.Security not guaranteed
====
Unencrypted communication can be read by third parties. Unencrypted transmission does not meet current security standards.
====

<<#table-unencrypted-connection>> explains the settings for unencrypted communication in the *Email accounts* assistant in the *Login details* step.

[[table-unencrypted-connection]]
.Settings for unencrypted connections
[cols="1,3,3,3"]
|====
|Server type |Server |Connection security |Port

| *IMAP*
|mail.YOUR-DOMAIN.co.uk
|none
|143

| *POP3*
|mail.YOUR-DOMAIN.co.uk
|none
|110

| *SMTP*
|mail.YOUR-DOMAIN.co.uk
|none
|25
|====

[#600]
== Saving the email signature

Go to the *Email accounts* assistant in the *Setup » Assistants » Basic setup* menu to save the signature in HTML format or plain text in the *Signature* step. The signature is then automatically added to your email templates when you inserted the corresponding variable in the template.

[IMPORTANT]
.Note the priority of the signature
====
The signature that was saved for a user in his or her user account in the *Setup » Account management » Accounts* menu takes priority over the signature that is saved in the *Email accounts* assistant in the *Signature* step. +
*_This means:_* If you insert, for example, the variable `Signature in HTML format` in the template, the signature is taken from the user account. If no signature is saved in the user account, the signature that is saved in the *Email accounts* assistant in the *Signature* step is used.
====

[IMPORTANT]
.Pay attention to the legal requirements
====
Note the legal requirements that are in effect for your online shop as to the content of an email signature, e.g. specifying the VAT number. Email signatures are required to include the same information as company business letters. Non-compliance can result in a fine or in a costly warning being issued by a competitor. If in doubt, ask a specialised solicitor.
====

[#700]
== Setting up the email information service

In the *Email accounts* assistant in the *Setup » Assistants » Basic setup* menu, you set to send a blind copy of all emails sent by your plentymarkets system to an email address of your choice. This can be particularly helpful in the early stages of your online shop, as it allows you to maintain an overview of all sent emails and recognise where processes can still be improved. You can also set here that you automatically receive an info email when a new order has been placed.

[.collapseBox]
.Settings in the *Email accounts* assistant in the *Info service* step
--
[[table-info-service]]
.Saving email server login details in the *Email accounts* assistant
[cols="1,3"]
|====
|Setting |Explanation

2+| Would you like to receive a blind copy of all emails sent by your plentymarkets system?

|*Receive emails as blind copy* (material:toggle_off[role=darkGrey])
|If you do not want to receive a blind copy, do _not_ activate the button (material:toggle_off[role=darkGrey]).

|*Receive emails as blind copy* (material:toggle_on[role=skyBlue])
|If you want to receive a blind copy, activate the button (material:toggle_on[role=skyBlue]). Enter in the field that appears below the email address(es). If you enter multiple email addresses, separate them with commas and do not use spaces.

|*Receive newsletter as blind copy*
|If you are using the xref:crm:sending-newsletters.adoc#[newsletter] integrated in plentymarkets, you can set here whether you want to receive a blind copy when a newsletter is sent.

2+| Would you like to receive an email when a new order is placed?

|*Receive email in case of a new order* (material:toggle_off[role=darkGrey])
|If you do not want to receive a blind copy when a new order is placed, do _not_ activate the button (material:toggle_off[role=darkGrey]).

|*Receive email in case of a new order* (material:toggle_on[role=skyBlue])
|If you want to receive a blind copy when a new order is placed, activate the button (material:toggle_on[role=skyBlue]). Enter in the field that appears below the email address(es). If you enter multiple email addresses, separate them with commas and do not use spaces.

|====
--

[#800]
== Using the HTML design

Use the *Setup » Client » [Select client] » Email » HTML design* menu to set an HTML design for each client (store). The HTML design can then be linked to email templates. You can activate or deactivate the design separately for every email template.

Use this function to ensure that for example the letterhead including the logo of your company automatically appears in all selected email templates. By doing so, it is no longer needed to insert the letterhead and the logo for each email template individually. If you make changes in this menu, you change the design for all linked email templates.

If you wish to create your email templates without a centrally saved HTML design, proceed with the xref:crm:sending-emails.adoc#1200[Creating an email template] chapter.

[#900]
=== Uploading the company logo to the webspace

You can adapt your email templates to the design of your online shop, e.g. by inserting your company logo in the HTML design. First, you have to upload the logo to the webspace. After you created the email template, you insert the xref:crm:sending-emails.adoc#1750[logo in the HTML design] and xref:crm:sending-emails.adoc#1100[link] the design with this email template.

[.instruction]
Uploading the company logo to the webspace:

. Go to *CMS » Webspace*.
. Click on the folder that you want to upload the logo to. +
icon:map-signs[] *_Or:_* Create a new folder (material:create_new_folder[]).
. Click on *Upload file* (material:file_upload[]) or use drag-and-drop. +
→ The logo is uploaded.
. In the line of the image, click on *Copy to clipboard* (material:content_copy[]) to copy the image URL.

[#1000]
=== Inserting template variables in the HTML design

First, insert the template variables `$EmailContentHTML` and `$SignatureHTML` in the HTML design. After you created the email template, xref:crm:sending-emails.adoc#1100[link] the HTML design with the email template.

[IMPORTANT]
.$EmailContentHTML has to be present
====
The template variable `$EmailContentHTML` has to be inserted in the HTML design. Otherwise, the HTML design cannot be used.
====

[.instruction]
Inserting template variables in the HTML design:

. Go to *Setup » Client » [Select client] » Email » HTML design*.
. Insert the template variables `$EmailContentHTML` and `$SignatureHTML`. +
→ `$EmailContentHTML` contains the content of the email. `$SignatureHTML` contains the signature.
. Format the HTML design as desired.
. *Save* (icon:save[role="green"]) the settings.

Now create the email template as described in the following chapters. Afterwards, you insert the xref:crm:sending-emails.adoc#1750[logo in the HTML design] and xref:crm:sending-emails.adoc#1100[link] the design with the email template.

[#1200]
== Creating an email template

Go to *Setup » Client » [Select client] » Email » Templates* to create new email templates. The folder *General email templates* already contains preconfigured email templates. You can of course make changes to these templates.

You can define up to 2 attachments for each email template:

* a PDF document from the *Orders » Fulfilment* menu, e.g. an invoice

* a document that you uploaded in the *CMS » Documents* menu, e.g. an item brochure or a user guide.

These attachments can be sent to your contacts in a standardised way via email templates. For example, it would be useful to attach PDF documents of your cancellation rights and terms and conditions to the email template *Confirmation of online store order*.

[TIP]
.Sending reversal document and invoice in one email template
====
It is possible to select the option *Reversal document and new invoice* from the *PDF attachment* drop-down list of an email template. If the order changes after the invoice has been created, you can send your contacts both documents in one email.
====

[.instruction]
Creating an email template:

. Go to *Setup » Client » [Select client] » Email » Templates*.
. Click on *New email template*. +
→ The *New email template* window opens.
. Enter the name for the template.
. Select the owner or the option *ALL* from the drop-down list *Owner*.
. Click on *Save*. +
→ The email template is created and saved in one of the 3 folders, depending on the selected setting in the *Owner* drop-down list.
. Carry out the remaining settings. Note <<#table-email-template>>.
. *Save* (icon:save[role="green"]) the settings.

[[table-email-template]]
.Settings for creating an email template
[cols="1,3"]
|====
|Setting |Explanation

| *Save*
|Saves the settings in the email template.

| *Template variables and template functions*
|Click on icon:code[role="blue"] to open the *Template variables and functions* area from which the template variables and template functions are copied for the email template.

2+^| *Tab: Settings*

| *Owner*
|If the name of the owner has already been selected from the drop-down list upon creation of the email template, the name of the owner is displayed here. Otherwise, select the owner from the drop-down list. This setting can be changed at any time. +
*All* = The template is saved under *General email templates*. +
Own user name = The template is saved under *General email templates*. +
Other user name = The template is saved under *Email templates from other users*. +
*_Note:_* You have to be logged into the system as a user in order to create your own email templates under *My email templates*.

| *Name*
|If the name has already been entered upon creation of the email template, the name of the email template is displayed here. Otherwise, enter the name for the template.
The name can be changed at any time. The name is not displayed to the recipient.

| *Content*
|Select whether the content of the email template should be saved as *plain text* or in *HTML format*. +
*_Tip:_* Use text in HTML format. The link for order processing that is shown via the template function `{%Link_Checkout()%}` can be very long. Pure text emails can lead to line breaks that can damage the link. +
*_Important:_* If you add further languages in HTML format, pay attention that the setting *Only in HTML format* is selected in the drop-down list *Content* in the *Settings* tab. The selection *Plain text only* is the standard setting for all languages.

| *Template type*
|Select for which area the email template should be available. Possible options: *All* (default setting), *Order*, *Customers*, *Online store*, *Ticket* or *Scheduler*. +
*All* / *Online store* = The email template is available for all areas. +
*Order* = The email template is only available for the selected area. The template is not visible in the other areas. If the ticket is linked with an order, email templates with the template type *Order* can also be selected in the ticket. +
*Customers* = The email template is only available for the selected area. The template is not visible in the other areas. +
*Ticket* = The email template is only available for the selected area. The template is not visible in the other areas. +
*Scheduler* = The email template is available for all areas where the template type *Order* is visible.

| *PDF attachment*
|Select the attachment from the drop-down list. The documents that can be selected from this drop-down list are for example generated in the *Orders » Fulfilment* menu or through shipment-related processes. +
Currently available attachments: Adjustment form, credit note, delivery note, dunning letter, entry certificate, invoice, multi-credit note, multi-invoice, offer, OpenTrans (XML), order confirmation, pick-up delivery, PO delivery note, pro forma invoice, purchase order (CSV), purchase order (PDF), receipt, repair slip, return label, reversal document, reversal document and new invoice, reversal refund, reversal refund and new credit note, SEPA direct debit mandate, shipping label, voucher. +
*_Note:_* It is possible to send return labels of all shipping service providers that are integrated in plentymarkets – be it as plugin or as permanent integration.

| *Document attachment*
|Documents that were uploaded under *CMS » Documents* are displayed here. You can attach one of these documents to an email template. +
All email templates can be sent with up to 2 attachments in a standardised way: Use email templates to send PDF documents relating to fulfilment (e.g. invoices) or other files (e.g. brochures or instructions). For example, it would be useful to attach PDF documents of your cancellation rights and terms and conditions to the email template *Confirmation of online store order*.

| *Reply to*
|Enter an email address. If someone replies to the email template, their message is sent to this address. If no email address was entered, replies to the template are sent to the xref:crm:sending-emails.adoc#100[email address that is saved] in the *Email accounts* assistant in the *Login details* step. For example, it is useful to enter the accounting department's email address for the *PDF invoice* email template. Questions about the invoice would then directly be sent to your accounting department and wouldn't have to be forwarded to them in an extra step.

| *Use design*
|Activate if the content of the email should be sent with the design that was saved under *Setup » Client » [Select client] » Email » HTML design*. If the option is not activated, only the content of the email template is used.

| *Client (store)*
|Activate one, multiple or *ALL* clients (stores). The email template is only valid for the selected clients (stores).

2+^| *Tab: Email message*

| *Select language*
|If required, select another language from the drop-down list. +
*_Note:_* The set language in the contact data record determines in which language the email template is sent.

| *Subject*
|Enter the subject text. Choose the subject carefully so that the emails are recognised by the email account and displayed in the contact's inbox instead of their spam folder.

| *Content / Item list*
|It is not possible to use global template variables in the *Content* tab, all order-related, contact-related and address-related template variables. +
In the *Item list* tab, only template variables that contain values of order items can be used. If these variables were used in the *Content* tab, they would be empty and no content would be shown. +
In these tabs, enter the text respectively the item list as *plain text* or in *HTML format* as well as the template variables and template functions. +
*_Note:_* Check which type of content was selected in the *Settings* tab under *Content*. Enter the text of the email into this corresponding tab. For example, if *Plain text only* is selected but you entered content into the *Text in HTML format* tab, this content is not sent in the email.

|====

[TIP]
.Tip: Use text in HTML format
====
plentymarkets recommends that you use text which was formatted with HTML because the link for order processing can be very long. Pure text emails can lead to line breaks that might damage the link. Furthermore, if you use HTML-formatted text, you have the possibility to format the text by means of the integrated HTML editor.

Go to *Setup » Settings » Editors* and determine which editors should be available for certain areas in your plentymarkets system. Select the *editor*, *syntax editor* or *text field*.
====

[discrete]
[#overview-cms-syntax-old]
=== Overview: CMS syntax (old)

Open the following box to see a CMS syntax overview that you can still use in the "old" email templates.

[.collapseBox]
.Overview: CMS syntax (old)
--

include::partial$cms-syntax-en.adoc[]

--

[#1300]
=== Using template variables and template functions

Have a look at the following video tutorial and get to know template variables and if constructs in plentymarkets. Please note that the appearance of the interface in this video differs from the current state in your plentymarkets system. However, the procedure in this video remains the same.

[[video-template-variables-if-constructs]]
.Getting to know template variables and if constructs in plentymarkets
video::214974549[vimeo, width=640, height=360]

Template variables and template functions can be used in email templates. In place of the variable or the function, your plentymarkets system automatically displays the content that this variable or function represents. In this way, only the content is displayed in the email. If you use the xref:crm:using-the-ticket-system.adoc#4800[ticket system], some template variables can also be used as assignment parameters.

Open an email template in the *Setup » Client » [Select client] » Email » Templates* menu to display a list of all template variables and template functions that are available for your email templates.

For an overview of the template variables and template functions for email templates, refer to the xref:crm:sending-emails.adoc#4000[Template variables and template functions available for email templates] chapter.

[TIP]
.Order processing link
====
If you would like that your customers can inform themselves about the current state of the orders, insert the template function `Link_Checkout()` in the email template. In order that the URL is correctly translated, you have to insert the template function into the email template as follows: `{%Link_Checkout()%}`.

*_Note:_* The email template *Confirmation of online store order* does _not_ automatically contain the template function `{%Link_Checkout()%}`.
====

[#1400]
=== Configuring the display of variations

You can individually set up the how the order item lines are structured for each email template and language. xref:crm:sending-emails.adoc#1500[If queries] can also be used for the configuration of variations. If you do not set up how the variations should be displayed, plentymarkets displays a standard list of the variations.

[IMPORTANT]
.Add template variable $OrderProperties in the item list
====
The template variable `$OrderProperties` that displays the order characteristics is not contained in the standard list of the variations in the email templates of the template type *Order*. This means that order properties are not displayed in the variations. If you would like that the order characteristics are contained in the item list, you have to manually add the template variable `$OrderProperties`.
====

[.instruction]
Configuring the display of variations:

. Go to *Setup » Client » [Select client] » Email » Templates*.
. Open the template.
. Click on the *Email message* tab. +
→ The *Content* tab appears.
. Insert the template variable `$ItemListHTML` in the tab *Text in HTML format* or the template variable `$ItemListPlain` in the tab *Plain text* in the email's *Content* tab. Position the template variable where you would like the variations to be displayed.
. Click on icon:code[role="blue"] to copy the template variable from the overview that you need for the variations and add the template variable to the tab *Item list*. +
→ To help with the formatting, for example, you can insert tabs that you copied from a text program between the template variables (see <<#image-crm-available-template-variables-item-list-part1>> and <<#image-crm-available-template-variables-item-list-part2>>).
. *Save* (icon:save[role="green"]) the settings.

[[image-crm-available-template-variables-item-list-part1]]
.Template variables available for the item list *ItemListPlain* (image 1)
image::crm:crm-available-template-variables-item-list-part1.png[width=640, height=360, alt=Available template variables for the item list *ItemListPlain* (image 1)]

[[image-crm-available-template-variables-item-list-part2]]
.Template variables available for the item list *ItemListPlain* (image 2)
image::crm:crm-available-template-variables-item-list-part2.png[width=640, height=360, alt=Available template variables for the item list *ItemListPlain* (image 2)]

[discrete]
==== Example: Displaying variations

Insert the template variables to display the item ID (`$ItemID`), the item name (`$ItemName`) and the item price (`$ItemPrice`) of the variations. The display begins with a hyphen. This is used at the start of each new line, even if multiple variations are shown. In order for the display to "work" on multiple lines, insert a line break at the end of the line by pressing Enter.

How you open the preview in order to check the email template is described in the xref:crm:sending-emails.adoc#1600[Checking the email template using the preview function] chapter.

[#1500]
Using if queries in email templates

Use if queries in email templates to display specific information on a case-by-case basis. For example, you can save a code that causes bank details to only be displayed in the email to the contact if cash in advance (ID{nbsp}={nbsp}0) was selected as the payment method. This if query can be found in the following example.

[source,plenty]
----
include::example$Email-Templates-MethodOfPayment.html[]

----

[#1600]
=== Checking the email template using the preview function

Use the email preview function to check whether your email template meets your requirements. You should also check to make sure that the link for order processing works correctly. Proceed as follows to open the preview of the email template.

[.instruction]
Checking the email template using the preview function:

. Go to *Orders » Edit orders*.
. Open the order.
. Click on the *Mail* tab.
. Select the language from the *Select a language* drop-down list in the *Email templates* tab.
. Click on the tab where your email template is saved: *General email templates*, *My email templates* or *Email templates from other users*.
. Activate the email template.
. Click on *Preview*. +
→ The *Email preview* window opens.

[#1700]
=== Editing the email template

You can edit general email templates, your own email templates and email templates of other users. Go to *Setup » Client » [Select client] » Email » Templates* to edit email templates.

[.instruction]
Editing the email template:

. Go to *Setup » Client » [Select client] » Email » Templates*.
. Click on the folder where the email template that you want to edit is saved.
. Click on the email template. +
→ The *Settings* tab of the email template opens.
. Carry out the desired settings. Note <<#table-email-template>> in the xref:crm:sending-emails.adoc#1200[Creating an email template] chapter.
. *Save* (icon:save[role="green"]) the settings.

[TIP]
.Check email template after every change
====
You should use an order's email service to check every change that is made to a template. In particular, you should check to make sure that the link for order processing works correctly. To do so, proceed as described in the xref:crm:sending-emails.adoc#1600[Checking the email template using the preview function] chapter.
====

[#1750]
== Inserting the company logo in the HTML design

In the next step, you insert the logo via an image link in the HTML design of an already created email template. Proceed as described below.

[.instruction]
Inserting the company logo in the HTML design:

. Go to *Setup » Client » [Select client] » Email » Templates*.
. Open the email template which you want to insert the logo in.
. Click on the *Email message* tab.
. Click on the *Text in HTML format* tab within the *Content* tab.
. Select the option *Editor* from the drop-down list in the top right. +
→ 2 toolbars to format the text are displayed.
. Click on *Image* in the toolbar. +
→ The *Image properties* window opens.
. Paste the absolute URL that you have just copied from the image gallery in the field *URL*.
. Click on *OK*. +
→ The logo appears.
. *Save* (icon:save[role="green"]) the settings.

[#1100]
== Linking the HTML design with an email template

Go to *Setup » Client » [Select client] » Email » Templates*. Carry out the following settings to link the HTML design with an email template. Make sure that the content of the email template is saved in the *Text in HTML format* tab. Save the content there if it was not saved already. This content is displayed with the template variable `$EmailContentHTML`.

[.instruction]
Linking the HTML design with the email template:

. Go to *Setup » Client » [Select client] » Email » Templates*.
. Select the email template from the folder.
. Select the option *Only text in HTML format* from the *Content* drop-down list.
. Activate the option *Use design*.
. Enter a subject in the *Email message* tab.
. *Save* (icon:save[role="green"]) the settings.

[#1800]
== Sending emails

In order to send emails, xref:business-decisions:user-accounts-access.adoc#10[user data] has to be saved in the *Setup » Account management » Accounts* menu. This data can be obtained from your provider and corresponds to the data that is saved in your email program.

[#email-log-entries]
[.collapseBox]
.Email log entries in case of an error
--
The *Email* process in the *Data » API log (deprecated)* menu contains error messages that relate to emails, e.g. when emails cannot be sent or when email accounts or addresses are not configured correctly. The process is added to the drop-down list when such an error occurs for the first time. he following information is displayed in an error message, e.g. if an email could not be sent: customer ID, order ID and the provider’s error message. This information is also displayed in the log entry.

*How to filter API log entries*

By default, entries are sorted by their ID. You can filter the entries so that fewer search results are included in the list. An API name filter and a date filter are available for this purpose. It is possible to combine both filters so that only entries for a specific format and day are displayed.

[.instruction]
Filtering log entries by name:

. Go to *Data » API log*.
. Select a format from the *Process* drop-down list.
. Click on *Search* (icon:search[role="darkGrey"]).

[IMPORTANT]
.The desired format is not displayed?
======
The formats are not displayed in the *Process* drop-down list until the process has been carried out once and has therefore been logged. If you do not find new formats in this list, the process has not been carried out yet or the error you are looking for has not yet occurred.
======

[.instruction]
Filtering log entries by date:

. Go to *Data » API log*.
. Select a *Date* from the calendar.
. Click on *Search* (icon:search[role="darkGrey"]).

[cols="1,3"]
|====
|Event |Explanation

| *Error sending email. CustomerId: 136 OrderId: 550 (Code 535): 5.7.8 Error: authentication failed: UGFzc3dvcmQ6*
|The email was not sent. The authentication failed due to incorrect parameters in the email account, e.g. an incorrect password or user name.

| *Error sending email. CustomerId: 153 OrderId: 103 (Code 0): stream_socket_client(): unable to connect to tcp://mail.servername.com:XXX (Connection refused)*
|The email was not sent due to an incorrect port entry. XXX = Port
|====

--

[#1900]
=== Sending ticket messages and comments as emails

An xref:crm:using-the-ticket-system.adoc#2100[email account] has to be saved in the *Setup » CRM » Ticket system » Email accounts* menu in order for messages and comments to be sent as emails. You also have to set up an email template that displays the last ticket message or comment. This email template has to be linked to an xref:crm:using-the-ticket-system.adoc#2900[event procedure] in order for messages and comments to be sent via email. For further information, refer to the xref:crm:using-the-ticket-system.adoc#2100[Ticket system] page.

[#2000]
=== Sending coupons via email

You can send coupons and coupon codes via email. Simply attach them to emails as PDF files. For further information, refer to the chapters xref:orders:coupons.adoc#send-email-coupon-codes[Sending coupon codes via email] and xref:orders:coupons.adoc#set-up-coupon-template[Setting up the coupon template] on the xref:orders:coupons.adoc#[Coupons] page of the manual.

[#2300]
== Setting up the automatic email despatch

The *Email accounts* assistant contains various events that you can link with a template. You can find the assistant in the *Setup » Assistants » Basic setup* menu. Select the email template that you have previously xref:crm:sending-emails.adoc#1200[created] in the *Setup » Client » [Select client] » Email » Templates* menu from the drop-down list. This ensures that the email template is sent to your contact once the event occurs.

[IMPORTANT]
.Removing the link before deleting the email template
====
Deleting an email template that is linked with an event in the *Automatic despatch* assistant step may lead to undesired effects. Therefore, first go to *Setup » Assistants » Basic setup* » *Email accounts* assistant and remove the link in the *Automatic despatch* step by selecting the option *Do not send* from the drop-down list in the line of the event. Afterwards, you delete the email template in the *Setup » Client » [Select client] » Email » Templates* menu.
====

[.instruction]
Setting up the automatic email despatch:

. Go to *Setup » Assistants » Basic setup*.
. Open the *Email accounts* assistant.
. In the *Automatic despatch* step, select an email template from the drop-down list in the line of the event. Note <<#table-events-automatic-email-despatch>>.
. *Save* (icon:save[role="green"]) the settings.

<<#table-events-automatic-email-despatch>> lists explanations of some of the events.

[[table-events-automatic-email-despatch]]
.Explanations about some events for the automatic despatch
[cols="1,3"]
|====
|Setting |Explanation

| *Send customer email to change password*
|The contacts receive an email with a link to the new password. The link has to be actively confirmed. The template function `{% Link_ChangePassword() %}` has to be included in the email template.

| *Newsletter opt-in*
|The contacts receive an email when they have registered for the newsletter. The email template should include the confirmation link that the contacts have to click in order to complete the newsletter registration process.

| *Newsletter opt-in confirmation*
|The contacts receive a confirmation email once they have activated the confirmation link that was sent with the email template for the *Newsletter opt-in* event.

| *Email when item becomes available*
|The contacts receive an email containing the information that a certain item is available again. Requirement: The contacts have entered their email address in the online shop directly next to the item that could not be delivered at that time.

|====

[discrete]
=== Automatic email despatch taking a new order on eBay as an example

An order is automatically created in plentymarkets after a contact has purchased an item on eBay. If you have xref:crm:sending-emails.adoc#1200[created] the email template "Order confirmation eBay" for example, set up an event procedure with the following settings to ensure that the email template is automatically sent to the customers once they placed an order via eBay:

* Event: New order eBay
* Filter: Referrer “eBay Germany”
* Procedure: Customer > Send email: Template “Order confirmation eBay” and recipient “Invoice address from order”

Along with the automatic email despatch, a message can also be sent to the contact via the eBay messaging system. Go to *Setup » Markets » eBay » Settings*. Click on the *Account settings* tab and save the text in the sub-menu *Message after purchase*. For further information, refer to the xref:markets:ebay-setup.adoc#1500[Sending messages after purchase] chapter on the xref:markets:ebay-setup.adoc#[Setting up eBay] page of the manual.

[discrete]
=== Setting up an event procedure

It is also possible to set up event procedures in the *Setup » Orders » Events* menu. Define an event, activate one or more filters and decide which procedures your plentymarkets system should carry out automatically when the event occurs.

For example, you can use filters to trigger a procedure once a contact has placed a certain number of orders. The procedure could send an email that includes a coupon. For further information, refer to the xref:automation:event-procedures.adoc#[Event procedures] page.

[#2500]
== Displaying sent email templates for each contact

Go to *Orders » Edit orders » [Open order] » Tab: Email » Tab: Emails sent*. There you can display all email templates that you have ever sent to the contact. Note that only those email templates that are linked to a unique contact ID are displayed in this tab.

[.instruction]
Displaying sent email templates for each contact:

. Go to *Orders » Edit orders*.
. Open the order.
. Click on the *Mail* tab.
. Click on the *Emails sent* tab. +
→ The date, time, email address of the recipient, ID and name of the template as well as the order ID are displayed.

Expand the area *Other emails sent to this customer...* to display all emails that have been sent to the contact. Here you can also see those emails that were sent to the contact from another order. Click on the order ID on the right-hand side. The order overview of the order opens in a separate tab.

[#2600]
== Displaying all sent email templates

Go to *plentymarkets logo (Start) » Statistics* to create a new statistic. Select the statistic type *Sent email templates* in the *Orders* area. This statistic shows information about the emails sent with your plentymarkets system according to the ID and the name of the email template. This statistical feedback is made for each date within the selected time span. The standard setting of the time span is the last 30 days. You can also adapt the time span or select a start date and an end date.

In this statistic, you can see for example which email template was used during the selected time period. This helps you to easily recognise which processes were carried out on a regular basis. For further information, refer to the xref:data:statistics.adoc#[Statistics] page of the manual.

[#4000]
== Template variables and template functions available for email templates

[#4100]
=== Template functions

The link functions listed in <<#table-template-functions-emails>> are available for email templates.

[TIP]
.Correct "translation" of template functions
====
In order to ensure that the template functions are correctly displayed as a URL, the template function has to be enclosed by `{%` and `%}`.
====

[[table-template-functions-emails]]
.Template functions available for email templates
[cols="1,3"]
|====
|Function |Explanation

| `Address($field, $subField?)`
a|This function returns the address of the contact and is available in email templates of the types *Contact* and *Ticket*. +
The field name itself and the alternative value (alias) can be used as `$field`. +
*_Examples:_* +

* `Address('name1')` and `Address('companyName')` return the company name of the contact address. `Address('address1')` and `Address('street')` return the street of the contact address.
* Address options can be retrieved via their alternative values. As an example, `Address('email')` returns the email address and `Address('taxIdNumber')` returns the VAT number of the contact address.
* Moreover, the data of two sub-data records of addresses are available for which the second and optional parameter `$subField` applies:
** `Address('state', 'name')` returns the name of the region/federal state and `Address('state', 'isoCode')` returns the ISO code.
** `Address('country', 'name')` returns the name of the country, `Address('country', 'isoCode2')` returns ISO code 2 of the country and `Address('country', 'isoCode3')` returns ISO code 3 of the country.

| `BillingAddress($field, $subField?)`
a|This function returns the data of the invoice address and is available in email templates of the types *Order* and *Scheduler*. +
The field name itself and the alternative value (alias) can be used as `$field`. +
*_Examples:_* +

* `BillingAddress('name1')` and `BillingAddress('companyName')` return the company name of the invoice address. `BillingAddress('address1')` and `BillingAddress('street')` return the street of the invoice address.
* Address options can be retrieved via their alternative values. As an example, `BillingAddress('email')` returns the email address and `BillingAddress('taxIdNumber')` returns the VAT number of the invoice address.
* Moreover, the data of two sub-data records of invoice addresses are available for which the second and optional parameter `$subField` applies:
** `BillingAddress('state', 'name')` returns the name of the region/federal state and `BillingAddress('state', 'isoCode')` returns the ISO code.
** `BillingAddress('country', 'name')` returns the name of the country, `BillingAddress('country', 'isoCode2')` returns ISO code 2 of the country and `BillingAddress('country', 'isoCode3')` returns ISO code 3 of the country.

| `DeliveryAddress($field, $subField?)`
a|This function returns the data of the delivery address and is available in email templates of the types *Order* and *Scheduler*. +
The field name itself and the alternative value (alias) can be used as `$field`. +
*_Examples:_* +

* `DeliveryAddress('name1')` and `DeliveryAddress('companyName')` return the company name of the delivery address. `DeliveryAddress('address1')` and `DeliveryAddress('street')` return the street of the delivery address.
* Address options can be retrieved via their alternative values. As an example, `DeliveryAddress('email')` returns the email address and `DeliveryAddress('taxIdNumber')` returns the VAT number of the delivery address.
* Moreover, the data of two sub-data records of delivery addresses are available for which the second and optional parameter `$subField` applies:
** `DeliveryAddress('state', 'name')` returns the name of the region/federal state and `DeliveryAddress('state', 'isoCode')` returns the ISO code.
** `DeliveryAddress('country', 'name')` returns the name of the country, `DeliveryAddress('country', 'isoCode2')` returns ISO code 2 of the country and `DeliveryAddress('country', 'isoCode3')` returns ISO code 3 of the country.

| `Link_Checkout()`
|This function accesses the URL to the checkout area of the order in the online shop. +
*_Note:_* Insert `{%Link_Checkout()%}` in the email template to ensure that the URL is correctly displayed.

| `Link_Basket()`
|This function displays the URL for the shopping cart. +
*_Note:_* Insert `{%Link_Basket()%}` in the email template to ensure that the URL is correctly displayed.

| `Link_TermsConditions()`
|This function displays the URL for the terms and conditions. +
*_Note:_* Insert `{%Link_TermsConditions()%}` in the email template to ensure that the URL is correctly displayed.

| `Link_Webstore()`
|This function displays the URL for the online shop. +
*_Note:_* Insert `{%Link_WebStore()%}` in the email template to ensure that the URL is correctly displayed.

| `Link_Item()`
|This function displays the URL for the item. +
*_Note:_* Insert `{%Link_Item()%}` in the email template to ensure that the URL is correctly displayed.

| `Link_NewPassword()`
|This function displays the URL for a form that allows to create a new password. The contact enters their email address in this form. +
*_Note:_* Insert `{%Link_NewPassword()%}` in the email template to ensure that the URL is correctly displayed.

| `Link_ChangePassword()`
|This function displays the URL for the *Change password* area. The contact can enter a new password. +
*_Note:_* Insert `{%Link_ChangePassword()%}` in the email template to ensure that the URL is correctly displayed.

|====

[#4200]
=== Template variables

Template variables are pre-defined variables that can be inserted in email templates. When sending the emails, this variable is automatically filled with the corresponding content. Template variables start with a dollar sign (`$`) followed by an upper-case character. <<#table-template-variables-emails>> lists the template variables that are available for email templates.

[TIP]
.Template variable logic
====
Note that template variables can only be filled with content when certain requirements are met.

Examples:

* `$TicketLastMessage` is only filled with content when an event procedure was set up that reacts to a new ticket message
* `$OrderId` is only filled and sent in combination with orders. For example, if the "Forgot password" function is used, the system would not know which order ID to use because the reference to an order is missing.
====

[[table-template-variables-emails]]
.Template variables available for email templates
[cols="1,3"]
|====
|Variable |Explanation

| `$OrderID`
|ID of the order

| `$ParentOrderID`
|ID of the direct preceding order. +
*_Example:_* In case of a credit note, this could be the ID of the return or of the order from which the credit note was generated. +
*_Note:_* Also observe the example about `$OriginOrderID` in the following line.

| `$OriginOrderID`
|ID of the highest preceding order. Usually, this is a normal order. +
*_Example:_* In case of a credit note C1 coming from a return R1 from the order O1, the `$ParentOrderID` returns the ID of R1 and `$OriginOrderID` returns the ID of O1.

| `$OrderStatusLabel`
|Status text of the order

| `$OrderStatusID`
|ID of the order status

| `$OrderEarliestDeliveryDate`
|Earliest delivery date of the order

| `$OrderEstimatedShipmentDate`
|Estimated shipping date of the order

| `$OrderReturnDate`
|Date when the return was received

| `$CustomerID`
|ID of the contact

| `$CustomerEmail`
|Email address of the contact

| `$NewCustomerEmail`
|Displays the link to confirm the email address change of the contact.

| `$CustomerFullName`
|First name (Name 2) and last name (Name 3) of the contact

| `$CustomerState`
|Region/district/county/state or any other country-specific classifications in the contact address

| `$CustomerAdditionalAddress`
|Additional address information saved in the contact address

| `$CustomerSign`
|Customer sign

| `$EmailFrom`
|Sender of the email

| `$EmailMessage`
|Content of the email

| `$EmailSubject`
|Subject of the email

| `$CustomerFirstName`
|First name of the contact

| `$CustomerLastName`
|Last name of the contact

| `$CustomerSalutationKey`
|Possible values: 0 = male and 1 = female. The content of this template variable is filled with the data from the invoice address of the order if it is a guest order without a contact.

| `$CustomerSalutationLabel`
|Possible values: Mr. and Ms. The content of this template variable is filled with the data from the invoice address of the order if it is a guest order without a contact.

| `$CustomerCompany`
|Stated company of the contact

| `$CustomerStreet`
|Street of the contact

| `$CustomerCityWithZip`
|Town and postcode of the contact

| `$CustomerCity`
|Town of the contact

| `$CustomerZip`
|Postcode of the contact

| `$CustomerCountry`
|Country of the contact

| `$CustomerCountryID`
|Country ID of the contact

| `$CustomerCountryIsoCode`
|Country ISO code of the contact

| `$CustomerPhone`
|Telephone number of the contact

| `$CustomerMobilePhone`
|Mobile phone number of the contact

| `$CustomerFax`
|Fax number of the contact

| `$CustomerEbayName`
|eBay name of the contact

| `$BillingAddressContactPerson`
|Content of the address option *Contact person* in the invoice address

| `$DeliveryAddressContactPerson`
|Content of the address option *Contact person* in the delivery address

| `$IsNewsletterActive`
|Flag that indicates whether the contact has confirmed the newsletter receipt.

| `$NewsletterConfirmURL`
|URL for confirming the newsletter receipt

| `$CustomerLang`
|Language of the contact

| `$CustomerClass`
|Customer class

| `$CustomerNumber`
|Customer number

| `$CustomerTitle`
|Title of the contact

| `$OrderCount`
|Order quantity

| `$ExternalOrderID`
|External order ID

| `$Currency`
|Currency

| `$ReturnsCode`
|Return code coming from a return. +
*_Note:_* For other order types, there is no content saved for this variable.

| `$ReturnReasonID`
|ID of the return reason. +
Go to *Setup » Orders » Order types » Return* to create reasons for returns.

| `$ReturnReasonLabel`
|Text of the return reason. +
Go to *Setup » Orders » Order types » Return* to create reasons for returns.

| `$VoucherCodes`
|All codes of all coupons for one order, separated by comma

| `$CustomerIBAN`
|IBAN of the contact

| `$CustomerBIC`
|BIC of the contact

| `$CustomerAccountOwner`
|The account holder's name

| `$CustomerBankName`
|Name of the bank of the contact

| `$ContactOwnerName`
|First name and last name of the system user who is saved as owner in the contact data record. This template variable is available for the template types *Customer* and *Order* (given that a contact is saved in the order).

| `$ContactOwnerSignature`
|Signature of the system user who is saved as owner in the contact data record (in text format). This template variable is available for the template types *Customer* and *Order* (given that a contact is saved in the order).

| `$ContactOwnerSignatureHTML`
|Signature of the system user who is saved as owner in the contact data record (in HTML format). This template variable is available for the template types *Customer* and *Order* (given that a contact is saved in the order).

| `$GeneralTermsConditionsText`
|Terms and conditions in plain text. +
Go to *Setup » plentyShop » (Select client) » Legal » [Expand language]*. Click on the *Terms and conditions* tab and save the text in the *Text* tab.

| `$GeneralTermsConditionsHTML`
|Terms and conditions in HTML format. +
Go to *Setup » plentyShop » (Select client) » Legal » [Expand language]*. Click on the *Terms and conditions* tab and save the text in the *HTML* tab.

| `$CancellationRightsText`
|Cancellation rights in plain text. +
Go to *Setup » plentyShop » (Select client) » Legal » [Expand language]*. Click on the *Cancellation rights* tab and save the text in the *Text* tab.

| `$CancellationRightsHTML`
|Cancellation rights in HTML format. +
Go to *Setup » plentyShop » (Select client) » Legal » [Expand language]*. Click on the *Cancellation rights* tab and save the text in the *HTML* tab.

| `$PrivacyPolicyText`
|Privacy policy in plain text. +
Go to *Setup » plentyShop » (Select client) » Legal » [Expand language]*. Click on the *Privacy policy* tab and save the text in the *Text* tab.

| `$PrivacyPolicyHTML`
|Privacy policy in HTML format. +
Go to *Setup » plentyShop » (Select client) » Legal » [Expand language]*. Click on the *Privacy policy* tab and save the text in the *HTML* tab.

| `$LegalDisclosureText`
|Legal disclosure in plain text. +
Go to *Setup » plentyShop » (Select client) » Legal » [Expand language]*. Click on the *Legal disclosure* tab and save the text in the *Text* tab.

| `$LegalDisclosureHTML`
|Legal disclosure in HTML format. +
Go to *Setup » plentyShop » (Select client) » Legal » [Expand language]*. Click on the *Legal disclosure* tab and save the text in the *HTML* tab.

| `$WithdrawalFormText`
|Cancellation form in plain text. +
Go to *Setup » plentyShop » (Select client) » Legal » [Expand language]*. Click on the *Cancellation form* and save the text in the *Text* tab.

| `$WithdrawalFormHTML`
|Cancellation form in HTML format. +
Go to *Setup » plentyShop » (Select client) » Legal » [Expand language]*. Click on the *Cancellation form* tab and save the text in the *HTML *tab.

| `$DeliveryAddressFullName`
|First name and last name saved in the delivery address

| `$DeliveryAddressAdditionalAddress`
|Additional address information saved in the delivery address

| `$DeliveryAddressFirstName`
|First name saved in the delivery address

| `$DeliveryAddressLastName`
|Last name saved in the delivery address

| `$DeliveryAddressCompany`
|Company saved in the delivery address

| `$DeliveryAddressPhone`
|Telephone number saved in the delivery address

| `$DeliveryAddressPostident`
|Postident number saved in the delivery address

| `$DeliveryAddressStreet`
|Street saved in the delivery address

| `$DeliveryAddressCityWithZip`
|Town and postcode saved in the delivery address

| `$DeliveryAddressCity`
|Town saved in the delivery address

| `$DeliveryAddressZip`
|Postcode saved in the delivery address

| `$DeliveryAddressCountry`
|Country saved in the delivery address

| `$DeliveryAddressCountryID`
|Country ID saved in the delivery address

| `$DeliveryAddressCountryIsoCode`
|Country ISO code saved in the delivery address

| `$DeliveryAddressState`
|Region/district/county/state saved in the delivery address

| `$OrderEstimatedDeliveryDate`
|Estimated delivery date of the order

| `$OrderBillingAddressTaxId`
|VAT number in the invoice address of the order

| `$OrderDeliveryAddressTaxId`
|VAT number in the delivery address of the order

| `$ShippingCosts`
|Shipping costs

| `$ValueOfItems`
|Value of the items

| `$CouponValue`
|Value of the coupon

| `$InvoiceTotal`
|Total invoice amount (gross price), separated by comma

| `$InvoiceTotalDecimalSeparatorDot`
|Total invoice amount (gross price), separated by a full stop

| `$InvoiceTotalNet`
|Total invoice amount (net price), separated by comma

| `$TotalVAT`
|Total amount of the value added tax in the order

| `$OrderTotalNet`
|Total amount of the order (net price)

| `$OrderDate`
|Date and time when the order was registered

| `$PaymentDate`
|Date of incoming payment

| `$TodaysDate`
|Current date

| `$PackageCount`
|Package numbers respectively tracking numbers. Are saved in the order once the order was successfully registered with the shipping service provider.

| `$TrackingURL`
|The tracking URL is used to track shipments. +
The URL is saved in the *Setup » Orders » Shipping » Settings* menu in the *Shipping service provider* tab.

| `$BankAccount`
|Account number. Is saved in the *Setup » Settings » Bank* menu.

| `$BankCode`
|Bank code. Is saved in the *Setup » Settings » Bank* menu.

| `$BankOwner`
|First name and last name of the account owner. Is saved in the *Setup » Settings » Bank* menu.

| `$BankName`
|Name of the bank. Is saved in the *Setup » Settings » Bank* menu.

| `$BankIBAN`
|International bank account number. Is saved in the *Setup » Settings » Bank* menu.

| `$BankSwift`
|Bank Identifier Code. Is saved in the *Setup » Settings » Bank* menu.

| `$ShippingServiceProviderName`
|Name of the shipping service provider as it is saved in the *Setup » Orders » Shipping » Settings* menu in the *Shipping service provider* tab.

| `$ShippingServiceProviderID`
|ID of the shipping service provider. +
The ID is automatically assigned by the system. The IDs are saved in the *Setup » Orders » Shipping » Settings* menu in the *Shipping service provider* tab.

| `$MethodOfPaymentName`
|Name of the payment method as saved in the *Setup » Orders » Payment » Payment methods* menu.

| `$MethodOfPaymentID`
|ID of the payment method. +
The ID is automatically assigned by the system. The IDs are listed in the *Setup » Orders » Payment » Payment methods* menu.

| `$ShippingProfileID`
|ID of the shipping profile. +
The ID is automatically assigned by the system. The IDs are listed in the *Setup » Orders » Shipping » Settings* menu in the *Shipping profiles* tab.

| `$ShippingProfileName`
|Name of the shipping profile as it is saved in the *Setup » Orders » Shipping » Settings* menu in the *Shipping profiles* tab.

| `$ReferrerID`
|ID of the referrer. +
The ID is automatically assigned by the system. The IDs are listed in the *Setup » Orders » Referrers* menu.

| `$ReferrerName`
|Name of the referrer as it is saved in the *Setup » Orders » Referrers* menu.

| `$PaidAmount`
|Amount paid

| `$OpenAmount`
|Outstanding amount

| `$OverpaidAmount`
|Amount of the overpayment

| `$PartialPaymentAmount`
|Amount of the partial payment

| `$PartialPaymentOpenAmount`
|Outstanding amount of the partial payment

| `$WarehouseID`
|ID of the warehouse. +
The ID is automatically assigned by the system and cannot be changed. The ID is saved in the *Setup » Stock » Warehouse » [Open warehouse] » Settings* menu.

| `$WebstoreID`
|ID of the client. +
The ID is automatically assigned by the system and cannot be changed. The ID is saved in the *Setup » plentyShop » (Select client) » Client Settings* menu.

| `$EbaySellerAccount`
|eBay seller account of the contact

| `$EbayUniquePaymentID`
|Unique eBay payment ID of the contact

| `$SignatureText`
|Signature in plain text. +
The signature is saved in the *Email accounts* assistant in the *Signature* step. You can find the assistant in the *Setup » Assistants » Basic setup* menu.

| `$SignatureHTML`
|Signature in HTML format. +
The signature is saved in the *Email accounts* assistant in the *Signature* step. You can find the assistant in the *Setup » Assistants » Basic setup* menu.

| `$RebateAmount`
|Discount amount

| `$BarcodeOrderID`
|Barcode of the order ID

| `$ItemCategoryLevel1List`
|ID of the category where the item is saved

| `$CustomerSpecialWishes`
|Special wish entered by the contact. During the checkout via the online shop, the contact can enter a wish regarding the items they ordered. This wish is saved as order note in the order data.

| `$CouponCode1`
|Coupon code 1. +
Can always be assigned to only one campaign to send this coupon code from the campaign in an email template.

| `$CouponCode2`
|Coupon code 2. +
Can always be assigned to only one campaign to send this coupon code from the campaign in an email template.

| `$CouponCode3`
|Coupon code 3. +
Can always be assigned to only one campaign to send this coupon code from the campaign in an email template.

| `$CouponCode4`
|Coupon code 4. +
Can always be assigned to only one campaign to send this coupon code from the campaign in an email template.

| `$CouponCode5`
|Coupon code 5. +
Can always be assigned to only one campaign to send this coupon code from the campaign in an email template.

| `$CouponCode6`
|Coupon code 6. +
Can always be assigned to only one campaign to send this coupon code from the campaign in an email template.

| `$CouponCode7`
|Coupon code 7. +
Can always be assigned to only one campaign to send this coupon code from the campaign in an email template.

| `$CouponCode8`
|Coupon code 8. +
Can always be assigned to only one campaign to send this coupon code from the campaign in an email template.

| `$CouponCode9`
|Coupon code 9. +
Can always be assigned to only one campaign to send this coupon code from the campaign in an email template.

| `$CouponCode10`
|Coupon code 10. +
Can always be assigned to only one campaign to send this coupon code from the campaign in an email template.

| `$OrderType`
|Order type

| `$OrderAccessKey`
|By clicking on *Checkout* in the order overview, the order opens in the My account area of the online shop.

| `$TrustedShopsRating`
|Feedback result of all feedbacks given at Trusted Shops

| `$TrustedShopsRatingShopButton`
|Trusted Shops feedback button to be used in the layout

| `$TrustedShopsRatingEmailButton`
|Trusted Shops feedback button to be used in emails

| `$TrustedShopsSeal`
|Trusted Shops seal of quality

| `$SchedulerID`
|ID of the scheduled order

| `$SchedulerStartDate`
|Start date of the scheduled order

| `$SchedulerEndDate`
|End date of the scheduled order

| `$SchedulerExecutionCount`
|Number of orders that are contained in the scheduled order

| `$SchedulerInterval`
|Interval of the scheduled order

| `$SchedulerTotalAmount`
|Total amount of the scheduled orders

| `$TicketHistory`
|Displays the text that was last saved in the ticket, i.e. the text of a comment or a message. +
In order that this variable is automatically filled, an email template and event procedures have to be set up. The event procedures have to contain the event *New comment*, *New message from employee* or *New message from customer*. The variable fill be filled according to the event. For all other events, the variable will not be filled.

| `$TicketLastComment`
|The comment in the ticket that was added last. +
In order that this variable is automatically filled, an email template and an event procedure have to be set up. The event procedure hast to contain the event *New comment*. For all other events, the variable will not be filled.

| `$TicketLastMessage`
|The message in the ticket that was added last. +
In order that this variable is automatically filled, an email template and an event procedure have to be set up. The event procedure has to contain the event *New message from employee* or *New message from customer*. It is recommended to set up an event procedure for both events. By doing so, you receive an email, regardless whether one of your employees or one of your contacts writes to you. For all other events, the variable will not be filled.

| `$TicketURL`
|Links to the ticket in the *My account* area of the contact in your online shop. +
In order that this variable is automatically filled, an email template has to be set up.

| `$TicketBackendURL`
|The variable contains a ticket URL that allows to access the ticket in the *CRM » Ticket system* menu. In order that this variable is automatically filled, an email template has to be set up.

| `$TicketTitle`
|Subject of the title. In order that this variable is automatically filled, an email template has to be set up.

| `$TicketID`
|ID of the ticket. In order that this variable is automatically filled, an email template has to be set up.

| `$TicketTags`
|Displays the tags that are linked to the ticket. +
First, tags have to be created in the *Setup » Settings » Tags* menu for the *Ticket* area.

| `$TicketStatus`
|Status of the ticket. In order that this variable is automatically filled, an email template has to be set up.

| `$TicketPriority`
|Priority of the ticket. In order that this variable is automatically filled, an email template has to be set up.

| `$ReorderID`
|ID of the reorder

| `$ReorderDeliveryDate`
|Delivery date of the reorder

| `$EventType`
|Type of the event

| `$EventInfo`
|Information about the event

| `$EventDuration`
|Duration of the event

| `$EventBilled`
|Flag that indicates that the event was billed

| `$EventNotBilled`
|Flag that indicates that the event was not billed

| `$EventBillable`
|Flag that indicates that the event can be billed

| `$ForumSubscription`
|Registration in the forum

2+^| `$ItemListPlain` / `$ItemListHTML` +
(icon:exclamation-triangle[role="red"] The template variables listed in the following can only be used in the *Item list* tab of the email template.)

| `$ItemID`
|ID of the item. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$OrderProperties`
|Order properties +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template. +
For further information, refer to the xref:item:properties.adoc#500[Characteristics and properties] page.

| `$ReturnItemStatusID`
|This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ReturnItemStatusLabel`
|This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemNumber`
|Number of the item. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemName`
|Item name. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemQuantity`
|Number of items. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemPrice`
|Item price. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemPriceNet`
|Net price of the item. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemReferrer`
|Referrer of the item. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ExternalItemID`
|External item ID. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ExternalVariationID`
|External variation ID. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$TransactionID`
|Transaction ID. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$UnitString`
|Unit of the item. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$VariationName`
|Variation name. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$VariationNumber`
|Variation number. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$VariationId`
|ID of the variation. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$VariantName`
|Variation name. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemModel`
|Model name of the item. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemEAN`
|International Article Number (EAN) of the item. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemISBN`
|ISBN code of the item. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemASIN`
|Amazon Standard Ident Number (ASIN) of the item. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemAvailabilityLabel`
|Text of the item availability of the net stock. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemAvailabilityID`
|ID of the item availability of the net stock. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$CombinedAvailabilityID`
|Highest ID of the item availability of the net stock. The availability of all items within the order is taken into consideration and the highest ID is returned. +
*_Example_*: Item A has the availability ID 4, item B has the availability ID 7. +
*_Result_*: The variable returns the value 7.

| `$ItemAvailabilityPhysicalStockLabel`
|Text of the item availability of the physical stock. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemAvailabilityPhysicalStockID`
|ID of the item availability of the physical stock. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$Free`
|Free text field for the items. The texts are saved in the *Setup » Items » Free text fields* menu. In order that the field names are displayed, write the field number in square brackets behind. +
*_Example:_* `$Free[3]` displays the text that is saved in *Field 3*. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$DownloadLink`
|Download link for additional product details. Can be integrated in the My account area of the online shop. +
*_Note:_* The files are uploaded in the *Media* tab of the item. +
*_Important:_* Files that are uploaded to the *Media* tab cannot be used in the plentyShop. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemImageURL`
|URL for the item image. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemProducerName`
|Name of the manufacturer. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemVatRate`
|Value added tax rate for the individual order items in percent (without indicating the percentage sign). +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemWarehouseID`
|Warehouse ID of the item. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$SchedulerItemStartDate`
|Start date. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$SchedulerItemEndDate`
|This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ReturnItemComment`
|This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ReturnItemValuePercentage`
|This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ReturnItemReasonID`
|This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ReturnItemReasonLabel`
|This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

| `$ItemVoucherCodes`
|Code of a coupon for each order item, separated by comma. +
This is not a global template variable, but a variable that is set per order item. It can only be used in the *Item list* tab of the email template.

|====

[#overview-cms-syntax-old]
=== Overview: CMS syntax (old)

Open the following box to see a CMS syntax overview that you can still use in the "old" email templates in the *Setup » Client » [Select client] » Email » Templates* menu.

[.collapseBox]
.Overview: CMS syntax (old)
--

include::partial$cms-syntax-en.adoc[]

--
