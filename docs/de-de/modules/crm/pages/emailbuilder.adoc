= EmailBuilder
:keywords: EmailBuilder, E-Mail Builder, E-Mail-Vorlagen, Widgets, Emailvorlagen, Dokumentenanhang E-Mail, Email-Vorlagen Baukasten, E-Mail-Variablen, twig expressions, E-Mail-Versand, Code-Widget, Widgets E-Mail-Vorlagen
:description: Erfahre, wie du den EmailBuilder in plentysystems verwendest und E-Mail-Vorlagen im Baukastenprinzip mithilfe von Widgets und Variablen erstellst.
:page-aliases: emailbuilder-testphase.adoc
:author: team-crm

Alle E-Mails, die du über plentysystems an deine xref:crm:kontakte.adoc#[Kontakte] versendest, basieren auf Vorlagen. Vorlagen erstellst und verwaltest du mit dem EmailBuilder im Menü *CRM » EmailBuilder*.

Schau dir das folgende link:https://www.youtube.com/watch?v=denxnArUsJ0[Video^] an, um mehr über den EmailBuilder zu erfahren.

[TIP]
.E-Mail-Vorlagen werden im Multipart-Format versendet
====
Die E-Mail-Vorlagen im EmailBuilder verwenden das Multipart-Format. Das bedeutet, dass deine E-Mails gleichzeitig in einer HTML- und in einer Textversion versendet werden. +
So sind deine E-Mails für alle Empfänger:innen lesbar, auch wenn deren E-Mail-Client die Anzeige von HTML in E-Mails einschränkt oder ganz unterbindet. Auf der anderen Seite werden die von dir gestalteten HTML-Versionen deiner E-Mail-Vorlagen für die Empfänger:innen angezeigt, deren E-Mail-Client die Darstellung von HTML erlaubt. Der Vorteil für dich hierbei ist, dass du nur eine E-Mail-Vorlage pflegen musst.
====

Der EmailBuilder ist ein Baukastenmodul, mit dem du deine E-Mail-Vorlagen schnell und einfach per Drag-and-drop erstellen und bearbeiten kannst. Der EmailBuilder besteht aus 2 Ansichten: dem Konfigurationsmanager und dem Editor.

* Im Konfigurationsmanager erstellst du Ordner, ggf. Unterordner, Vorlagen sowie Vorlagen für deinen Footer und deinen Header.

* Im Editor befüllst du deine Vorlagen, Header und Footer mit Inhalt. Du kannst zum Beispiel eine Vorlage für eine Rechnung erstellen und diese zukünftig für alle Rechnungen an deine Kund:innen verwenden.

Die Header- und Footer-Vorlagen kannst du dann beliebig in deinen E-Mail-Vorlagen verwenden. Header und Footer sind global wirksam; Änderungen, die du am Header und Footer vornimmst, wirken sich demnach auch auf alle bestehenden Vorlagen sowie weitere Vorlagen, die du zukünftig erstellst, aus.

Mit dem Header, dem Footer und den Einstellungen in der Vorlage wie Name, Betreff etc. erstellst du sozusagen das Gerüst deiner E-Mail. Den Inhalt der Vorlage bildest du mit den <<#widget-einfuegen, Widgets>> und <<#variablen-emailbuilder, Variablen>>. Die Variablen werden dann in der E-Mail an deine Kund:innen durch den korrekten Inhalt ersetzt. Zum Beispiel wird die Variable `Lieferadresse Vorname und Nachname` in der E-Mail dann durch den Vornachnamen und Nachnamen des Kontakts aus der Lieferadresse ausgegeben.

Außerdem kannst du einstellen, dass dein System bei bestimmten Ereignissen, z.B. beim Eingehen neuer Bestellungen in deinem plentyShop oder nachdem Kund:innen deinen Newsletter abonniert haben, <<#e-mail-versand-automatisieren, automatisch E-Mails aus diesen Vorlagen>> erstellt und an deine Kund:innen versendet.

[#vorbereitende-einstellungen]
== Vorbereitende Einstellungen vornehmen

In den folgenden Unterkapiteln wird beschrieben, welche vorbereitenden Einstellungen nötig sind, damit du mit dem EmailBuilder arbeiten kannst.

[#rechte-vergeben]
=== Rechte vergeben

:rights-purpose: mit dem EmailBuilder arbeiten können
:right-one: pass:quotes[*CRM > EmailBuilder > Lesen*]
:right-two: pass:quotes[*CRM > EmailBuilder > Aktualisieren*]
:right-three: pass:quotes[*CRM > EmailBuilder > Erstellen*]
:right-four: pass:quotes[*CRM > EmailBuilder > Löschen*]
:right-five: pass:quotes[im einfachen Modus: *CRM > EmailBuilder > Betrachten*]

include::_includes:partial$rights.adoc[]

[#e-mail-server-zugangsdaten]
=== E-Mail-Server-Zugangsdaten speichern

Im Assistenten *E-Mail-Konten* im Menü *Einrichtung » Mandant » Global » E-Mail-Konten* speicherst du im Schritt *Zugangsdaten* die Zugangsdaten des E-Mail-Postfachs, aus dem du E-Mails versenden möchtest, damit dein System E-Mails wie Auftragsbestätigungen und Versandbestätigungen von dieser E-Mail-Adresse versenden kann. +
Außerdem kannst du hier auch den Live-Modus aktivieren, damit alle E-Mails nicht nur an die eingegebene E-Mail-Adresse gesendet werden, sondern an deine Kund:innen.

[.collapseBox]
.Einstellungen im Assistenten *E-Mail-Konten* im Schritt *Zugangsdaten*
--
[[table-email-server-login-details]]
.E-Mail-Server-Zugangsdaten im Assistenten *E-Mail-Konten* speichern
[cols="1,3"]
|====
|Einstellung |Erläuterung

2+| Wie lauten die Server-Daten deines Anbieters?

| *Postausgangsserver/SMTP-Server*
|Gib den Postausgangsserver wie vom Provider angegeben ein (meist smtp.domain.de oder mail.domain.de). +
*_mailbox.org:_* Gib für Postfächer bei mailbox.org den Postausgangsserver *smtp.mailbox.org* ein und wähle die Verschlüsselung *SSL*.

| *Port (Standardport: 25)*
|Gib den Wert *25* ein. Dieser Wert ist für fast alle Provider korrekt. Erfrage ggf. den korrekten Port beim Provider. +
*_mailbox.org:_* Gib für Postfächer bei mailbox.org den Port *465* ein und wähle die Verschlüsselung *SSL*.

| *Verschlüsselungsmethode*
| Wähle *SSL*, *TLS* oder *keine Verschlüsselung*. +
*_mailbox.org:_* Gib für Postfächer bei mailbox.org den Port *465* ein und wähle die Verschlüsselung *SSL*.

2+| Wie lauten die Zugangsdaten deines E-Mail-Kontos? 

| *Name des Absenders*
|Gib deinen eigenen Namen oder den Namen deines Webshops ein. Der Name wird den Empfänger:innen angezeigt. +
*_Hinweis:_* Damit der Name korrekt dargestellt wird, vermeide die Verwendung von Sonderzeichen.

| *E-Mail-Adresse*
|Gib die E-Mail-Adresse ein, wie sie auch im E-Mail-Programm steht.

| *Benutzername*
|Gib den Benutzer:innenname zu der E-Mail-Adresse ein. +
*_mailbox.org:_* Der mailbox.org-Benutzer:innenname ist die vollständige E-Mail-Adresse des mailbox.org-Postfachs.

| *Passwort*
|Gib das Passwort zu dem Benutzer:innenname und der E-Mail-Adresse ein.

2+|Möchtest du den E-Mail-Versand jetzt testen? +

|material:outgoing_mail[] 
|Mit einem Klick auf material:outgoing_mail[] wird eine Test-E-Mail an die oben eingegebene E-Mail-Adresse gesendet.

2+|Möchtest du den Live-Modus aktivieren? 

|material:check_box_outline_blank[]
|Wenn du kein Häkchen bei *Live-Modus aktivieren* setzt (material:check_box_outline_blank[]), ist der Testmodus aktiviert. +
Alle E-Mails werden nur an die eingegebene E-Mail-Adresse gesendet. So kannst du vor dem Live-Betrieb die korrekte Funktionsweise prüfen. +
*_Wichtig:_* Der Testmodus gilt nur für diesen Webshop. Die Einstellungen für weitere Mandanten werden im Menü des Mandanten (Shops) konfiguriert.

|material:check_box[role=skyBlue]
|Wenn du ein Häkchen bei *Live-Modus aktivieren* setzt (material:check_box[role=skyBlue]), ist der Live-Modus aktiviert.

|====
--

// TODO: Kapitel "Verschlüsselung der E-Mail-Kommunikation wählen" plus alle Unterkapitel hier noch ergänzen: https://knowledge.plentymarkets.com/de-de/manual/main/crm/e-mails-versenden.html#200 

[#e-mail-signatur]
=== E-Mail-Signatur speichern

Im Assistenten *E-Mail-Konten* im Menü *Einrichtung » Mandant » Global » E-Mail-Konten* speicherst du im Schritt *Signatur* deine Signatur im HTML-Format oder im reinen Textformat. Die Signatur wird dann in deinen E-Mail-Vorlagen automatisch eingefügt wird, wenn du die entsprechende Variable in der Vorlage eingefügt hast.

[IMPORTANT]
.Priorität der Signatur beachten
====
Die im Benutzer:innenkonto im Menü *Einrichtung » Kontoverwaltung » Konten* eingegebene Signatur hat Priorität gegenüber der Signatur, die im Assistenten *E-Mail-Konten* im Schritt *Signatur* gespeichert ist. +
*_Das bedeutet:_* Wenn du z.B. die Variable `Signatur im HTML-Format` oder `Signatur im reinen Textformat` in die E-Mail-Vorlage einfügst, wird die Signatur aus dem Benutzer:innenkonto übernommen. Wenn keine Signatur im Benutzer:innenkonto gespeichert ist, wird die Signatur, die im Assistenten *E-Mail-Konten* im Schritt *Signatur* gespeichert ist, übernommen.
====

[#e-mail-infodienst]
=== E-Mail-Infodienst einrichten

Du kannst im Assistenten *E-Mail-Konten* im Menü *Einrichtung » Mandant » Global » E-Mail-Konten* im Schritt *Infodienst* einstellen, dass alle von deinem System ausgehenden E-Mails auf eine von dir gewählte E-Mail-Adresse als Blindkopie versendet werden. Besonders in der Anfangsphase deines Webshops erhältst du so eine gute Kontrolle über alle versendeten E-Mails und kannst erkennen, wo du Prozesse noch optimieren musst. Du kannst hier auch einstellen, dass du bei Bestellungen automatisch eine Info-E-Mail erhältst.

[.collapseBox]
.Einstellungen im Assistenten *E-Mail-Konten* im Schritt *Infodienst*
--
[[table-info-service]]
.E-Mail-Server-Zugangsdaten im Assistenten *E-Mail-Konten* speichern
[cols="1,3"]
|====
|Einstellung |Erläuterung

2+| Möchtest du eine Blindkopie von allen von deinem System ausgehenden E-Mails erhalten?

|*E-Mails als Blindkopie erhalten* (material:toggle_off[role=darkGrey])
|Wenn du keine Blindkopie erhalten möchtest, aktiviere die Schaltfläche _nicht_ (material:toggle_off[role=darkGrey]).

|*E-Mails als Blindkopie erhalten* (material:toggle_on[role=skyBlue])
|Wenn du eine Blindkopie erhalten möchtest, aktiviere die Schaltfläche (material:toggle_on[role=skyBlue]). Gib im Feld, das unterhalb erscheint, die E-Mail-Adresse(n) ein. Gib mehrere E-Mail-Adressen kommagetrennt und ohne Leerzeichen ein.

|*Newsletter als Blindkopie erhalten*
|Wenn du den in plentysystems integrierten xref:crm:newsletter-versenden.adoc#[Newsletter] verwendest, kannst du hier einstellen, ob du eine Blindkopie erhalten möchtest, wenn ein Newsletter versendet wird.

2+| Möchtest du bei Eingang einer neuen Bestellung eine E-Mail erhalten?

|*E-Mails bei neuer Bestellung erhalten* (material:toggle_off[role=darkGrey])
|Wenn du keine E-Mail beim Eingang einer neuen Bestellung erhalten möchtest, aktiviere die Schaltfläche _nicht_ (material:toggle_off[role=darkGrey]).

|*E-Mails bei neuer Bestellung erhalten* (material:toggle_on[role=skyBlue])
|Wenn du eine E-Mail beim Eingang einer neuen Bestellung erhalten möchtest, aktiviere die Schaltfläche (material:toggle_on[role=skyBlue]). Gib im Feld, das unterhalb erscheint, die E-Mail-Adresse(n) ein. Gib mehrere E-Mail-Adressen kommagetrennt und ohne Leerzeichen ein.

|====
--

[#e-mail-automatischer-versand]
=== Automatischen Versand einrichten

Im Menü *Einrichtung » Mandant » Global » E-Mail-Konten* im Assistentenschritt *Automatischer Versand* stehen dir verschiedene Ereignisse zur Verfügung, die du mit einer Vorlage verknüpfen kannst. Wähle aus der Dropdown-Liste die Vorlage, die du zuvor im Menü *CRM » EmailBuilder* <<#vorlage-erstellen, erstellt>> hast. Dadurch wird bei Eintritt des Ereignisses diese Vorlage automatisch an deine Kund:innen versendet.

[IMPORTANT]
.Verknüpfung vor Löschen der E-Mail-Vorlage entfernen
====
Das Löschen einer Vorlage, die mit einem Ereignis im Schritt *Automatischer Versand* im Assistenten *E-Mail-Konten* verknüpft ist, kann zu unerwünschten Effekten führen. Entferne daher zunächst die Verknüpfung im Menü *Einrichtung » Mandant » Global » E-Mail-Konten* im Schritt *Automatischer Versand*, indem du in der Zeile des Ereignisses in der Dropdown-Liste die Option *Nicht senden* wählen. Anschließend <<#vorlage-loeschen, löschst>> du die Vorlage im Menü *CRM » EmailBuilder*.
====

[.collapseBox]
.Erläuterungen zu den verfügbaren Ereignissen für den automatischen Versand im Assistenten *E-Mail-Konten* im Schritt *Automatischer Versand* 
--

[[table-events-automatic-email-dispatch]]
.Erläuterungen zu den Ereignissen für den automatischen Versand
[cols="1,3"]
|====
|Einstellung |Erläuterung

| *Sende Kunde E-Mail zur Passwortänderung*
|Wenn du die E-Mail-Vorlage xref:crm:emailbuilder.adoc#vorlage-erstellen[erstellt] hast und die Vorlage mit diesem Ereignis verknüpfst, wird deinen Kund:innen bei Eintritt dieses Ereignisses eine E-Mail mit einem Link zum neuen Passwort gesendet. Dieser Link muss aktiv bestätigt werden. +
Die Variable `URL zum Ändern des Passworts` muss in der Vorlage enthalten sein. +
*_Hinweis 1:_* Du findest die Variable in der Kategorie <<#variablen-global, Global>>. +
*_Hinweis 2:_* Bei gebuchten Systemen seit Februar 2023 ist die Standardvorlage *Shop: Neues Passwort* bereits für dieses Ereignis gespeichert. Bei Bedarf kannst du hier eine andere Vorlage wählen.

| *Bestätigung der Passwortänderung*
|Wenn du die E-Mail-Vorlage xref:crm:emailbuilder.adoc#vorlage-erstellen[erstellt] hast und die Vorlage mit diesem Ereignis verknüpfst, wird deinen Kund:innen eine Bestätigungs-E-Mail gesendet, wenn sie ihr Passwort ändern. +
Eine Variable ist hier nicht zwingend notwendig. Sinnvoll wäre allerdings der Link zu deinem Webshop (`URL zum Webshop`). +
*_Hinweis:_* Du findest die Variable in der Kategorie <<#variablen-global, Global>>.

| *Kunde möchte E-Mail-Adresse ändern*
|Wenn du die E-Mail-Vorlage xref:crm:emailbuilder.adoc#vorlage-erstellen[erstellt] hast und die Vorlage mit diesem Ereignis verknüpfst, wird deinen Kund:innen eine Bestätigungs-E-Mail gesendet, wenn sie in deinem Webshop ihre E-Mail-Adresse ändern und die neue E-Mail-Adresse eingeben. +
Die Vorlage sollte daher die Variable `URL zum Bestätigen der E-Mail-Adresse` enthalten. +
*_Hinweis:_* Du findest die Variable in der Kategorie <<#variablen-global, Global>>.

| *Newsletter Opt-In*
|Wenn du die E-Mail-Vorlage xref:crm:emailbuilder.adoc#vorlage-erstellen[erstellt] hast und die Vorlage mit diesem Ereignis verknüpfst, wird deinen Kund:innen eine E-Mail gesendet, wenn sie sich für den Newsletter angemeldet haben. Die Vorlage sollte die Variable `URL zur Bestätigung des Newsletter-Abonnements` enthalten; also den Bestätigungslink, den die Kund:innen anklicken müssen, um die Newsletter-Anmeldung abzuschließen. +
*_Hinweis:_* Du findest die Variable in der Kategorie <<#variablen-newsletter, Newsletter>>. +
*_Hinweis 2:_* Bei gebuchten Systemen seit Februar 2023 ist die Standardvorlage *Shop: Newsletter-Anmeldung* bereits für dieses Ereignis gespeichert. Bei Bedarf kannst du hier eine andere Vorlage wählen.

| *Bestätigung Newsletter Opt-In*
|Wenn du die E-Mail-Vorlage xref:crm:emailbuilder.adoc#vorlage-erstellen[erstellt] hast und die Vorlage mit diesem Ereignis verknüpfst, wird deinen Kund:innen eine E-Mail als Bestätigung gesendet, sobald sie den Bestätigungslink, der mit der E-Mail-Vorlage für das Ereignis *Newsletter Opt-In* versendet wurde, aktiviert haben. +
Eine Variable ist hier nicht zwingend notwendig. Denkbar wäre hier allerdings eine Variable, die als Dankeschön einen Gutschein-Code für deinen Webshop enthält.

| *Kundenregistrierung*
|Wenn du die E-Mail-Vorlage xref:crm:emailbuilder.adoc#vorlage-erstellen[erstellt] hast und die Vorlage mit diesem Ereignis verknüpfst, wird deinen Kund:innen eine E-Mail als Bestätigung gesendet, sobald sie z.B. bei Abschluss der Bestellung in deinem Webshop ein Kund:innenkonto in deinem Webshop erstellt haben. +
Eine Variable ist hier nicht zwingend notwendig. Sinnvoll wäre allerdings der Link zu deinem Webshop (`URL zum Webshop`) sowie eine kurze Willkommensnachricht. +
*_Hinweis:_* Du findest die Variable in der Kategorie <<#variablen-global, Global>>.

| *Benachrichtigung bei verfügbarem Artikel*
|Wenn du die E-Mail-Vorlage xref:crm:emailbuilder.adoc#vorlage-erstellen[erstellt] hast und die Vorlage mit diesem Ereignis verknüpfst, wird deine Kund:innen eine E-Mail mit dem Hinweis, dass ein bestimmter Artikel wieder verfügbar ist, gesendet. +
*_Voraussetzung:_* Die Kund:innen haben zuvor ihre E-Mail-Adresse im Webshop bei dem nicht lieferbaren Artikel eingetragen. +
Idealerweise enthält die hier verknüpfte Vorlage die Variablen `URL zum Artikel` und `Artikelname`. +
*_Hinweis:_* Du findest die Variable in der Kategorie <<#variablen-auftrag-auftragspositionen, Auftrag / Auftragspositionen (nur für Artikellisten-Widget)>>.

| *Neuer Link zur Bestellbestätigung*
| Wenn du Gastkund:innen die Möglichkeit geben möchtest, einen neuen Auftragsbestätigungslink anzufordern, musst du dafür eine E-Mail-Vorlage xref:crm:emailbuilder.adoc#vorlage-erstellen[erstellen] und diese hier verknüpfen. +
Die Variable `URL zur Auftragsübersicht` muss in der Vorlage enthalten sein. +
*_Hinweis:_* Du findest die Variable in der Kategorie <<#variablen-global, Global>>. +
Weitere Informationen zum Softlogin findest du auf der Handbuchseite xref:webshop:shop-builder.adoc#softlogin[ShopBuilder einrichten].

|====
--

Weitere Möglichkeiten, wie du den E-Mail-Versand an deine Kund:innen automatisieren kannst, sind in den Kapiteln <<#ereignisaktionen-einrichten, Ereignisaktionen einrichten>> und <<#e-mail-versand-an-mehrere-e-mail-adressen, E-Mail-Versand an mehrere E-Mail-Adressen>> beschrieben.

[#e-mail-messenger-integration]
=== Messenger-Integration

[IMPORTANT]
.Schritt kann nur aktiviert werden, wenn Assistent *Messenger-Konfiguration* durchlaufen wurde
====
Du kannst den Messenger-Service in diesem Schritt nur aktivieren, wenn du vorher den Assistenten *Messenger-Konfiguration* durchlaufen hast. +
*_Tipp:_* Du kannst zunächst den Assistenten *E-Mail-Konten* abschließen und dann den Assistenten *Messenger-Konfiguration* durchlaufen. Im Anschluss kannst du hierher zurückkehren, um dann den Messenger-Service zu aktivieren und weitere Einstellungen für den Messenger in diesem Schritt vorzunehmen.
====

Im Menü *Einrichtung » Mandant » Global » E-Mail-Konten* im Assistentenschritt *Messenger-Integration* legst du fest, ob alle gesendeten E-Mails sowie Anhänge im xref:crm:messenger-testphase.adoc#[Messenger] gesammelt werden sollen. Du entscheidest außerdem, in welchem Posteingang die E-Mails gesammelt werden, welchen Tag die Konversationen erhalten sollen und wählst die Standardgruppe für den E-Mail-Service.

[.collapseBox]
.Einstellungen im Assistenten *E-Mail-Konten* im Schritt *Messenger-Integration*
--
[[table-collect-emails]]
.Alle gesendeten E-Mails im Messenger-Modul sammeln
[cols="1,3"]
|====
|Einstellung |Erläuterung

| *Messenger-Integration aktivieren*
a| Wenn du mit dem Sammeln von E-Mails im Messenger beginnen möchtest, aktiviere die Schaltfläche *Dienst aktivieren* (material:toggle_on[role=skyBlue]). +
Die E-Mails aus den folgenden plentysystems Bereichen werden dann im Messenger gespeichert und angezeigt: 

* Automatischer Versand
* Auftragsereignisse
* Auftragsaktionen
* Gruppenfunktion im Kontaktdatensatz
* Aufträge » Aufträge (Testphase)
* Gruppenfunktion im Auftrag

| *Anhänge*
| Wenn du die E-Mail-Anhänge im Messenger speichern möchtest, aktiviere die Schaltfläche *Anhänge sammeln* (material:toggle_on[role=skyBlue]).

| *Posteingang*
| Wähle den Messenger-Posteingang aus der Dropdown-Liste, in dem die E-Mails gesammelt werden sollen.

| *Tags*
| Wähle (material:check_box[role=skyBlue]) die Tags aus der Liste, die der Konversation hinzugefügt werden sollen.

| *Gruppen*
| Wähle die Standardgruppe, der die Konversationen in diesem Posteingang zugeordnet werden.

|====
--

[#ordner-verwalten]
== Ordner verwalten

Du kannst im EmailBuilder beliebig viele <<#ordner-erstellen, Ordner>> und bis zu 3 <<#unterordner-erstellen, Unterordner>> erstellen. Nachdem der Ordner erstellt ist, kannst du mit einem Klick auf material:more_vert[] neue Unterordner, neue Vorlagen allgemein und neue Vorlagen für Header und Footer erstellen und die Ordner <<#ordner-umbenennen, umbenennen>>, <<#ordner-verschieben, verschieben>> oder <<ordner-loeschen, löschen>>.

In deinem System ist bereits ein Ordner mit einigen vordefinierten Standardvorlagen vorhanden. Diese werden weiter unten im Kapitel <<#standardvorlagen-verwenden, Standardvorlagen verwenden>> erläutert.

[[image-emailbuilder-folder-structure]]
.Ordnerstruktur im EmailBuilder
image::crm:emailbuilder-ordner-vorlage-header-footer-hinzufuegen.png[width=640, height=360]

[#ordner-erstellen]
=== Ordner erstellen

Erstelle Ordner, um später eine bessere Übersicht über deine E-Mail-Vorlagen zu bekommen. Gehe wie im Folgenden beschrieben vor, um einen neuen Ordner zu erstellen.

[.instruction]
Ordner erstellen:

. Öffne das Menü *CRM » EmailBuilder*.
. Klicke unten links auf material:add[] *Hinzufügen* material:play_arrow[].
. Klicke auf material:folder[] *Ordner*. +
→ Das Fenster *Neuen Ordner hinzufügen* öffnet sich.
. Gib den Namen für den Ordner ein.
. Klicke auf *Speichern*. +
→ Der neue Ordner wird der Ordnerliste hinzugefügt.

[TIP]
Wenn du alle Einstellungen wie im Folgenden beschrieben vorgenommen hast – also Unterordner, Vorlagen, Header und Footer erstellt hast –, kannst du den Hauptordner mit einem Klick auf material:chevron_right[] _Name des Ordners_ öffnen. Dort siehst du dann auf einen Blick alle Unterordner, Vorlagen, Header und Footer, die du direkt unter dem Hauptordner erstellt hast.

[#ordner-umbenennen]
=== Ordner umbenennen

Du kannst den Namen des Ordners jederzeit anpassen. Gehe dazu wie im Folgenden beschrieben vor.

[.instruction]
Ordner umbenennen:

. Öffne das Menü *CRM » EmailBuilder*.
. Klicke in der Zeile des Ordners, den du umbenennen möchtest, auf material:more_vert[] und dann auf material:edit[] *Umbenennen*. +
→ Das Fenster *Ordner umbenennen* öffnet sich.
. Gib einen anderen Namen für den Ordner ein.
. Klicke auf *Speichern*. +
→ Der neue Name des Ordners wird aktualisiert und in der Liste angezeigt.

[#ordner-verschieben]
=== Ordner verschieben

Du kannst den Ordner jederzeit an eine andere Stelle verschieben. Gehe dazu wie im Folgenden beschrieben vor.

[.instruction]
Ordner verschieben:

. Öffne das Menü *CRM » EmailBuilder*.
. Klicke in der Zeile des Ordners, den du verschieben möchtest, auf material:more_vert[] und dann auf material:open_with[] *Verschieben*. +
→ Das Fenster *Verschieben* öffnet sich.
. Wähle den Zielordner.
. Klicke auf material:open_with[] *Verschieben*. +
→ Der Ordner wird in den gewählten Ordner verschoben.

[#unterordner-erstellen]
=== Unterordner erstellen

Erstelle Unterordner in deinen Ordnern, um deine E-Mail-Vorlagen später noch differenzierter zu gruppieren. Du kannst bis zu 3 Unterordner in einem Ordner erstellen.

[TIP]
.Entwurf für deine Ordner-Struktur im Vorfeld erstellen
====
Wir empfehlen dir, im Vorfeld einen Entwurf zu erstellen, um unübersichtliche Verschachtelungen in deiner Ordnerstruktur zu vermeiden. Denn: Je mehr Ebenen und Ordner du erstellst, desto unübersichtlicher wird die Struktur.
====

[.instruction]
Unterordner erstellen:

. Öffne das Menü *CRM » EmailBuilder*.
. Klicke in der Zeile des Ordners, für den du einen Unterordner erstellen möchtest, auf material:more_vert[] und dann auf material:add[] *Hinzufügen* material:play_arrow[].
. Klicke auf material:folder[] *Ordner*. +
→ Das Fenster *Neuen Ordner erstellen* öffnet sich.
. Gib den Namen für den Unterordner ein.
. Klicke auf *Speichern*. +
→ Der Unterordner wird in dem Hauptordner erstellt.

Öffne den Unterordner, indem du den Hauptordner mit einem Klick auf material:chevron_right[] öffnest. Du siehst dort auf einen Blick alle erstellten Unterordner.

[#ordner-loeschen]
=== Ordner löschen

Du kannst Ordner und Unterordner jederzeit löschen. Beachte, dass dabei alle Inhalte, die in dem Ordner enthalten sind, den du löschen möchtest, entfernt werden.

[.instruction]
Ordner löschen:

. Öffne das Menü *CRM » EmailBuilder*.
. Klicke in der Zeile des Ordners bzw. Unterordners, den du löschen möchtest, auf material:more_vert[] und dann auf material:delete[] *Löschen*. +
→ Ein Fenster mit einer Sicherheitsabfrage öffnet sich.
. Klicke auf material:delete[role=red] *Löschen*. +
→ Der Ordner mit allen dazugehörigen Unterordnern und darin enthaltenen Vorlagen wird gelöscht.

[#vorlagen-verwalten]
== Vorlagen verwalten

In den folgenden Unterkapiteln erfährst du, wie du Vorlagen für <<#header-erstellen, Header>> und <<#footer-erstellen, Footer>> und anschließend die <<#vorlage-erstellen, Vorlagen>> selbst erstellst. Außerdem ist beschrieben, wie du Vorlagen <<#vorlage-suchen, suchst>>, <<#vorlage-verschieben, verschiebst>>, <<vorlage-kopieren, kopierst>>, <<vorlage-bearbeiten, bearbeitest>> und <<vorlage-loeschen, löschst>>. +
Wenn du möchtest, kannst du bereits vordefinierte <<#standardvorlagen-verwenden, Standardvorlagen verwenden>>. Außerdem erfährst du alles über die verfügbaren <<#widget-einfuegen, Widgets>> und wie du diese Widgets in deinen Vorlagen verwenden kannst.

[TIP]
Sobald du eine Vorlage erstellt hast, wird in Klammern vor dem Namen der Vorlage die ID der Vorlage angezeigt. Das System vergibt die IDs fortlaufend und automatisch. Die IDs können _nicht_ geändert werden.

Die Widgets und Variablen, die in der Vorlage enthalten sind, bilden den eigentlichen Inhalt deiner E-Mail. In einer Vorlage kannst du über die verfügbaren Widgets beliebig viele Variablen per Drag-and-drop einfügen, die dann in der E-Mail an deine Kund:innen durch den korrekten Inhalt ersetzt werden.

Welche Variablen dir für deine E-Mail-Vorlagen zur Verfügung stehen, findest du in den Tabellen ganz unten auf dieser Seite im Kapitel <<#variablen-emailbuilder, Verfügbare Variablen und twig expressions>>.

[#vorlage-header-footer]
=== Vorlagen für Header und Footer erstellen

Erstelle Vorlagen für den Header und den Footer, die du dann in all deinen E-Mail-Vorlagen wählen kannst. Header und Footer sind global wirksam. Das bedeutet: Änderungen, die du am Header und Footer vornimmst, wirken sich demnach auch auf alle bestehenden Vorlagen, in denen du diese Header und Footer verwendest, sowie weitere Vorlagen, die du zukünftig erstellst, aus.

Im Header kannst du beispielsweise dein Firmenlogo speichern und im Footer deine Signatur und allgemeine Informationen über deine Firma wie die Adresse, Links zu sozialen Netzwerken, die Rechtsform deiner Firma, Informationen zu Geschäftsführung etc.

Gehe wie im Folgenden beschrieben vor, um Vorlagen für den <<#header-erstellen, Header>> und den <<#footer-erstellen, Footer>> zu erstellen.

[#header-erstellen]
==== Vorlage für den Header erstellen

Gehe wie im Folgenden beschrieben vor, um eine Vorlage für den Header deiner E-Mail-Vorlage zu erstellen.

[.instruction]
Vorlage für den Header erstellen:

. Öffne das Menü *CRM » EmailBuilder*.
. Klicke in der Zeile des Ordners bzw. Unterordners, in dem du einen Header erstellen möchtest, auf material:more_vert[] und dann auf material:add[] *Hinzufügen* material:play_arrow[].
. Klicke auf material:web_asset[] *Header*. +
→ Das Fenster *Neuen Header hinzufügen* öffnet sich.
. Gib einen Namen für den Header ein.
. Klicke auf *Speichern*. +
→ Die Header-Vorlage wird erstellt.
. Klicke auf *Hinzufügen* (material:add[]), um eine <<#sprache-hinzufuegen, Sprache hinzuzufügen>>. +
→ Ein Fenster öffnet sich.
. Wähle eine Sprache aus der Liste. +
→ Das Fenster *Neuer Name* öffnet sich.
. Gib den Betreff für die Header-Vorlage ein.
. Klicke auf *Speichern*.
. Wähle (material:check_box[role=skyBlue]) im Bereich *Allgemeine Einstellungen* den Eigner und den Mandant.
. Klicke auf *Bearbeiten* (material:edit[]).
. Bearbeite den Header nach deinen Wünschen und füge <<#widget-einfuegen, Widgets>> und <<#variablen-emailbuilder, Variablen>> ein.
. *Speichere* (material:save[]) die Einstellungen.

[#header-vorschau-anzeigen]
[discrete]
==== Vorschau des Headers anzeigen

Du kannst dir jederzeit eine Vorschau deiner Header-Vorlage anschauen. Dies ist entweder im HTML-Format oder als reiner Text möglich. Gib eine Auftrags-ID ein, um die Vorschau mit echten Auftragsdaten zu befüllen. Gehe wie im Folgenden beschrieben vor, um die Vorschau einer Vorlage anzuzeigen.

. Öffne das Menü *CRM » EmailBuilder*.
. Klappe den Ordner auf (material:chevron_right[]), der den Header enthält, von dem du eine Vorschau anzeigen möchtest.
. Klicke auf den Header.
. Klicke auf *Vorschau* (material:preview[]). +
→ Das Fenster *Vorschau* öffnet sich.
. Wähle aus der Dropdown-Liste *Format der Vorschau* die Option *HTML* oder *Reiner Text*.
. Gib im Feld *Auftrags-ID* die ID des Auftrags ein, von dem du die Vorschau sehen möchtest.
. Klicke auf material:preview[] *VORSCHAU*. +
→ Die Vorschau wird in einem separaten Fenster geöffnet. +
*_Hinweis:_* Dein System merkt sich den Wert der eingegeben Auftrags-ID bis zum nächsten Login oder bis der Browser-Cache geleert wird.
. Prüfe die Header-Vorlage.
. *Schließe* das Fenster.

Wenn du mit dem Ergebnis nicht zufrieden bist, bearbeite den Inhalt deines Headers erneut.

[#footer-erstellen]
==== Vorlage für den Footer erstellen

Gehe wie im Folgenden beschrieben vor, um eine Vorlage für den Footer deiner E-Mail-Vorlage zu erstellen.

[.instruction]
Vorlage für den Footer erstellen:

. Öffne das Menü *CRM » EmailBuilder*.
Klicke in der Zeile des Ordners bzw. Unterordners, in dem du einen Footer erstellen möchtest, auf material:more_vert[] und dann auf material:add[] *Hinzufügen* material:play_arrow[].
. Klicke auf material:video_label[] *Footer*. +
→ Das Fenster *Neuen Footer hinzufügen* öffnet sich. +
. Gib einen Namen für den Footer ein.
. Klicke auf *Speichern*. +
→ Die Footer-Vorlage wird erstellt.
. Klicke auf *Hinzufügen* (material:add[]), um eine <<#sprache-hinzufuegen, Sprache hinzuzufügen>>. +
→ Ein Fenster öffnet sich.
. Wähle eine Sprache aus der Liste. +
→ Das Fenster *Neuer Name* öffnet sich.
. Gib den Betreff für die Footer-Vorlage ein.
. Klicke auf *Speichern*.
. Wähle (material:check_box[role=skyBlue]) im Bereich *Allgemeine Einstellungen* den Eigner und den Mandant.
. Klicke auf *Bearbeiten* (material:edit[]).
. Bearbeite den Footer nach deinen Wünschen und füge <<#widget-einfuegen, Widgets>> und <<#variablen-emailbuilder, Variablen>> ein.
. *Speichere* (material:save[]) die Einstellungen.

[#footer-vorschau-anzeigen]
[discrete]
==== Vorschau des Footers anzeigen

Du kannst dir jederzeit eine Vorschau deiner Footer-Vorlage anschauen. Dies ist entweder im HTML-Format oder als reiner Text möglich. Gib eine Auftrags-ID ein, um die Vorschau mit echten Auftragsdaten zu befüllen. Gehe wie im Folgenden beschrieben vor, um die Vorschau einer Vorlage anzuzeigen.

. Öffne das Menü *CRM » EmailBuilder*.
. Klappe den Ordner auf (material:chevron_right[]), der den Footer enthält, von dem du eine Vorschau anzeigen möchtest.
. Klicke auf den Footer.
. Klicke auf *Vorschau* (material:preview[]). +
→ Das Fenster *Vorschau* öffnet sich.
. Wähle aus der Dropdown-Liste *Format der Vorschau* die Option *HTML* oder *Reiner Text*.
. Gib im Feld *Auftrags-ID* die ID des Auftrags ein, von dem du die Vorschau sehen möchtest.
. Klicke auf material:preview[] *VORSCHAU*. +
→ Die Vorschau wird in einem separaten Fenster geöffnet. +
*_Hinweis:_* Dein System merkt sich den Wert der eingegeben Auftrags-ID bis zum nächsten Login oder bis der Browser-Cache geleert wird.
. Prüfe die Footer-Vorlage.
. *Schließe* das Fenster.

Wenn du mit dem Ergebnis nicht zufrieden bist, bearbeite den Inhalt deines Footers erneut.

[#vorlage-erstellen]
=== Vorlage erstellen

Erstelle nun die Vorlage und speichere grundlegende Einstellungen wie den Namen, den Betreff, CC und BCC und wähle die zur Vorlage passenden <<#header-erstellen, Header>> und <<#footer-erstellen, Footer>>. Gehe wie im Folgenden beschrieben vor, um eine neue Vorlage zu erstellen.

[IMPORTANT]
.Wichtig: Header und Footer in der jeweiligen Sprache hinzufügen
====
Wenn du eine Vorlage in <<#sprache-hinzufuegen, mehreren Sprachen>> erstellst, denke daran, auch den Header und den Footer in diesen Sprachen zu erstellen und diese mit der Vorlage zu verknüpfen. Andernfalls kann die Vorlage nicht versendet werden.
====

[TIP]
.Zwischen mehreren Vorlagen hin- und herwechseln
====
Wenn du später mehrere Vorlagen zur selben Zeit bearbeitest, kannst du über die Navigation auf der linken Seiten zwischen den einzelnen Vorlagen hin- und herwechseln. Die Vorlage, die du gerade geöffnet hast, ist am Zeilenanfang blau markiert.
====

[[image-emailbuilder-template]]
.Neue Vorlage im EmailBuilder erstellen
image::crm:emailbuilder-neue-vorlage.png[width=640, height=360]

[.instruction]
Vorlage erstellen:

. Öffne das Menü *CRM » EmailBuilder*.
. Klicke unten links auf material:add[] *Hinzufügen* material:play_arrow[]. +
icon:map-signs[] *_Oder:_* Klicke in der Zeile des Ordners, in dem du eine Vorlage erstellen möchtest, auf material:more_vert[] und dann auf material:add[] *Hinzufügen* material:play_arrow[]. +
. Klicke auf material:description[] *Vorlage*. +
→ Das Fenster *Neue Vorlage hinzufügen* öffnet sich.
. Nimm die Einstellungen vor. Beachte dazu die Erläuterungen in <<#table-emailbuilder-create-template>> und <<#image-emailbuilder-template>>.
. *Speichere* (material:save[]) die Einstellungen.

*_Hinweis:_* Wenn du die Vorlage nicht innerhalb eines Ordners erstellen möchtest, klicke auf der Startseite des Menüs *CRM » EmailBuilder* direkt unten links auf material:add[] *Hinzufügen* material:play_arrow[] und klicke dann auf material:description[] *Vorlage*. Die Vorlage wird dann auf der ersten Ebene erstellt, ohne dass sie zu einem Ordner gehört.

[TIP]
.E-Mail-Vorlagen werden im Multipart-Format versendet
====
Die E-Mail-Vorlagen im EmailBuilder verwenden das Multipart-Format. Das bedeutet, dass deine E-Mails gleichzeitig in einer HTML- und in einer Textversion versendet werden. +
So sind deine E-Mails für alle Empfänger:innen lesbar, auch wenn deren E-Mail-Client die Anzeige von HTML in E-Mails einschränkt oder ganz unterbindet. Auf der anderen Seite werden die von dir gestalteten HTML-Versionen deiner E-Mail-Vorlagen für die Empfänger:innen angezeigt, deren E-Mail-Client die Darstellung von HTML erlaubt. Der Vorteil für dich hierbei ist, dass du nur eine E-Mail-Vorlage pflegen musst.
====

[[table-emailbuilder-create-template]]
.Vorlage im EmailBuilder erstellen
[cols="1,3"]
|====
|Einstellung |Erläuterung

2+^| Fenster *Neue Vorlage erstellen*

|[#intable-template-settings-name]*Name*
|Wie lautet der Name der Vorlage? Gib einen aussagekräftigen Namen ein, damit du die Vorlage später leicht wiederfinden kannst. +
*_Hinweis:_* Dieses Feld ist ein Pflichtfeld.

|[#intable-template-settings-expert-mode]*Expertenmodus*
|Aktiviere (material:toggle-on[role=skyBlue]) die Option, wenn du die Vorlage im <<#expertenmodus-verwenden, Expertenmodus>> erstellen möchtest. +
*_Hinweis:_* Wenn du den Expertenmodus aktivierst, sind die nachfolgenden Optionen *Header*, *Footer* und *Aus Standardvorlage verwenden* deaktiviert.

|[#intable-template-settings-header]*Header*
|Welchen Header möchtest du in dieser Vorlage anzeigen? Wähle einen Header aus der Dropdown-Liste (material:arrow_drop_down[]). +
Die Liste enthält alle <<#header-erstellen, Header>>, die du bereits erstellt hast.

|[#intable-template-settings-footer]*Footer*
|Welchen Footer möchtest du in dieser Vorlage anzeigen? Wähle einen Footer aus der Dropdown-Liste (material:arrow_drop_down[]). +
Die Liste enthält alle <<#footer-erstellen, Footer>>, die du bereits erstellt hast.

|[#intable-template-settings-default-template]*Aus Standardvorlage erstellen*
|Klappe den Bereich auf (material:arrow_drop_down[]), um eine der <<#standardvorlagen-verwenden, Standardvorlagen>> zu wählen und mit der neuen Vorlage zu verknüpfen. +
*_Hinweis:_* Du kannst die hier gewählte Standardvorlage im nächsten Schritt nach deinen Wünschen anpassen.

| *Speichern*
|Speichert die Einstellungen.

2+^| Bereich für den Inhalt der Vorlage +
In diesem Bereich erstellst du den Inhalt deiner Vorlage mit Widgets und Variablen.

|[#intable-template-settings-add]*Hinzufügen*
|Klicke auf material:add[] (*Hinzufügen*), um die <<#sprache-hinzufuegen, Sprache der Vorlage zu wählen>>. +
<<#image-emailbuilder-sprachen-hinzufuegen>> zeigt die Liste mit den Sprachen, nachdem du auf material:add[] geklickt hast.

|[#intable-template-settings-subject]*Betreff*
|Wie lautet der Betreff deiner E-Mail? Gib den Betreff in der jeweiligen Sprache ein.
*_Hinweis:_* Standardmäßig ist das Sprachkürzel als Betreff eingetragen. Du kannst den Betreff jederzeit anpassen.

| *Speichern*
|Speichert die Einstellung.

2+^|[#intable-language-specific-settings]*Spracheinstellungen* +
In diesem Bereich nimmst du die sprachabhängigen Einstellungen der Vorlage vor. Lade zum Beispiel Produktdatenblätter oder Bedienungsanleitungen in der jeweiligen Sprache hoch und bestimme die Zeit-, Datums- und Zahlenformate für jede Sprache individuell. +
*_Hinweis:_* Wenn die Vorlage vom Typ *Header* oder *Footer* ist, steht dir in diesem Bereich nur das Feld <<#intable-template-settings-custom-styles, Benutzerdefiniertes Styling>> zur Verfügung. Ein Betreff und statische Anhänge sind für Header und Footer nicht verfügbar.

|[#intable-template-settings-copy]*Kopieren*
|Klicke auf material:more_vert[] am Ende der Zeile *Spracheinstellungen* und dann auf material:content_copy[] *Kopieren*, um den Inhalt und die Spracheinstellungen der Vorlage für eine andere Sprache zu kopieren. +
*_Hinweis:_* Eine automatische Übersetzung erfolgt _nicht_. Du musst die Übersetzung selbst hinzufügen.

|[#intable-template-settings-delete]*Löschen*
|Klicke auf material:more_vert[] am Ende der Zeile *Spracheinstellungen* und dann auf material:delete[] *Löschen*. Nachdem du die Sicherheitsabfrage bestätigt hast, wird die Vorlage gelöscht.

| *Sprachen-ID*
|Hier wird die ID angezeigt. Die ID kann _nicht_ angepasst werden.

|[#intable-template-settings-static-attachments]*Statische Anhänge*
|In dieser Dropdown-Liste stehen dir alle Anhänge zur Verfügung, die du vorher im Menü *CMS » Dokumente* hochgeladen hast. Dies sind zum Beispiel Installationsanleitungen oder Produktdatenblätter in der jeweiligen Sprache. Wähle (material:check_box[role=skyBlue]) bis zu 3 statische Anhänge aus der Dropdown-Liste. +

| *HOCHLADEN* material:file_upload[]
| Hier kannst du die Anhänge auch direkt von deinem Computer aus hochladen, ohne sie vorher im Menü *CMS » Dokumente* hochladen zu müssen. +
*_Hinweis:_* Bei Vorlagen vom Typ *Header* und *Footer* ist diese Dropdown-Liste _nicht_ verfügbar.

|[#intable-template-settings-custom-styles]*Benutzerdefiniertes Styling*
|Hier kannst du das CSS-Styling deiner Vorlage, deines Headers und deines Footers anpassen. Im Kapitel <<#beispiele-benutzerdefiniertes-styling, Benutzerdefiniertes Styling: Gängige CSS-Beispiele>> unterhalb dieser Tabelle findest du einige Beispiele, wie du das Styling deiner Vorlage anpassen kannst. +
*_Tipp:_* Speichere die Einstellungen und öffne anschließend die *Vorschau* (material:preview[]), um deine Eingaben zu prüfen und ggf. weitere Anpassungen vorzunehmen.

|[#intable-template-settings-number-format]*Zahlenformat*
|Wähle für das Zahlenformat die deutsche oder die englische Schreibweise aus der Liste.

*_Beispiel:_* Die deutsche Schreibweise zeigt Zahlenformate folgendermaßen an: 1,25 oder 1.000,25. Die englische Schreibweise zeigt Zahlenformate folgendermaßen an: 1.25 oder 1,000.25.

|[#intable-template-settings-decimals]*Anzahl der Nachkommastellen*
|Gib eine Zahl ein, die die Anzahl der Nachkommastellen definiert.

|[#intable-template-settings-date-format]*Datumsformat*
a|Wähle das Datumsformat aus Dropdown-Liste.

`dd` steht für den Tag, `mm` für den Monat und `yyyy` für das Jahr. Standardmäßig ist für deutsche Systeme das Datumsformat `dd.mm.yyyy` vorausgewählt und für alle anderen Sprachen das Format `dd-mm-yyyy`. +
Verfügbare Formate:

* yyyy-mm-dd
* dd.mm.yyyy
* dd-mm-yy
* dd/mm/yyyy
* mm-dd-yyyy

|[#intable-template-settings-time-format]*Zeitformat*
a|Wähle das Zeitformat aus Dropdown-Liste.

`hh` steht für die Stunde im 12h-Format, `HH` steht für die Stunde im 24h-Format, `ii` für die Minuten und `ss` für die Sekunden. `a` gibt je nach Uhrzeit den Zusatz AM oder PM aus. Standardmäßig ist das Zeitformat `HH:ii` vorausgewählt. +
Verfügbare Formate:

* hh:ii:ss a
* hh.ii.ss a
* hh-ii-ss a
* hh:ii a
* hh.ii a
* hh-ii a
* HH:ii:ss
* HH.ii.ss
* HH-ii-ss
* HH:ii
* HH.ii
* HH-ii

2+^|[#intable-content-and-subject]*Inhalt und Betreff*

|[#intable-template-settings-subject]*Betreff*
|Hier siehst du den Betreff der Vorlage. Du kannst den <<#betreff-aendern, Betreff ändern>>, wenn gewünscht. +
*_Hinweis:_* Bei Vorlagen vom Typ *Header* und *Footer* ist dieses Feld _nicht_ verfügbar.

|[#intable-template-settings-edit]*Bearbeiten*
|Klicke auf material:edit[] am Ende der Zeile *Inhalt und Betreff*, um den Inhalt der Vorlage zu bearbeiten und <<#widget-einfuegen, Widgets>> und <<#variablen-emailbuilder, Variablen>> einzufügen. +
Der Editor-Bereich öffnet sich und du kannst über die Widgets den Inhalt der Vorlage bearbeiten. +
Mit einem Klick auf material:css[] in der Symbolleiste ganz oben kannst du das <<#intable-template-settings-custom-styles, benutzerdefinierte Styling>> deiner Vorlage anpassen.
*_Hinweis:_* Die E-Mail-Vorlagen verwenden das Multipart-Format. Die E-Mails werden also gleichzeitig in einer HTML- und in einer Textversion versendet.

|[#intable-template-settings-preview]*Vorschau*
|Klicke auf material:preview[] *Vorschau* und wähle dann aus der Liste *Format der Vorschau* die Option *HTML* oder *Reiner Text*. Gib im Feld *Auftrags-ID* die ID des Auftrags ein, um die Vorschau mit echten Auftragsdaten zu befüllen. Die Vorschau wird in einem separaten Fenster geöffnet.

2+^|[#intable-general-template-settings]*Allgemeine Einstellungen* +
Im Bereich *Allgemeine Einstellungen* auf der rechten Seite deines Bildschirms nimmst du die allgemeinen Einstellungen für die Vorlage in der jeweiligen Sprache vor. 

|[#intable-template-settings-name]*Name*
|Hier siehst du den Namen der Vorlage, den du eben eingegeben hast. Du kannst den Namen anpassen, wenn gewünscht.

|[#intable-template-settings-owner]*Eigner*
|Wähle einen Eigner aus der Dropdown-Liste.

|[#intable-template-settings-client]*Mandant*
|Wähle (material:check_box[role=skyBlue]) einen oder mehrere Mandanten aus der Liste.

|[#intable-template-settings-header]*Header*
|Hier siehst du den Header, den du eben für die Vorlage gewählt hast. Du kannst hier einen anderen Header wählen, wenn gewünscht. +
*_Wichtig:_* Stelle sicher, dass du hier einen Header wählst, der die selbe Sprache wie die Vorlage selbst hat.

|[#intable-template-settings-footer]*Footer*
|Hier siehst du den Footer, den du eben für die Vorlage gewählt hast. Du kannst hier einen anderen Footer wählen, wenn gewünscht. +
*_Wichtig:_* Stelle sicher, dass du hier einen Footer wählst, der die selbe Sprache wie die Vorlage selbst hat.

|[#intable-template-settings-dynamic-attachments]*Dynamische Anhänge*
|In dieser Dropdown-Liste stehen dir alle xref:auftraege:auftragsdokumente.adoc#100[standortbezogenen Dokumente] zur Verfügung, die du im Menü *Einrichtung » Mandant » [Mandant wählen] » Standorte » [Standort wählen] » Dokumente* eingerichtet hast. + 
Wenn du die Option *Externe Dokumente* wählst, werden alle externen Dokumente, die du im Bereich *Dokumente* des Auftrags hochgeladen hast, an die E-Mail-Vorlage angehängt.
Wähle (material:check_box[role=skyBlue]) bis zu 4 dynamische Anhänge aus der Dropdown-Liste.

//| *Von*
//|Das ist der Absender der E-Mail, so wie er in deinem System in den E-Mail-Einstellungen hinterlegt ist.

|[#intable-template-settings-reply-to]*Antwort an*
|An wen soll die E-Mail gesendet werden? Gib die E-Mail-Adresse(n) ein. +
*_Hinweis:_* Wenn du mehrere E-Mail-Adressen eingibst, trenne diese jeweils durch ein Komma.

|[#intable-template-settings-cc]*CC*
|An wen soll die E-Mail in Kopie gesendet werden? Gib die E-Mail-Adresse(n) ein. +
*_Hinweis:_* Wenn du mehrere E-Mail-Adressen eingibst, trenne diese jeweils durch ein Komma.

|[#intable-template-settings-bcc]*BCC*
|An wen soll die E-Mail als blinde Kopie gesendet werden? Gib die E-Mail-Adresse(n) ein. +
*_Hinweis:_* Wenn du mehrere E-Mail-Adressen eingibst, trenne diese jeweils durch ein Komma.

|[#intable-template-settings-back-to-template-configuration]*Zurück zur Vorlagenkonfiguration*
|Mit einem Klick auf material:arrow_back[] ganz oben rechts gelangst du wieder zurück zu Vorlagenkonfiguration.

|====

[#beispiele-benutzerdefiniertes-styling]
=== Benutzerdefiniertes Styling: Gängige CSS-Beispiele

In <<#table-emailbuilder-examples-css-styling>> findest du einige gängige Beispiele, um das CSS-Styling deiner Vorlage anzupassen. Du kannst das CSS-Styling über die folgenden Wege anpassen: 

* im Bereich *Spracheinstellungen* der Vorlage im Feld *Benutzerdefiniertes Styling*
* mit einem Klick auf material:edit[] in der Vorlage über das Symbol material:css[]
* in den Widget-Einstellungen in den Feldern *Eigenes CSS* und *Eigene Element-ID*

[IMPORTANT]
material:warning[] Damit das CSS-Styling korrekt angezeigt wird, muss es von einer Klasse oder einer Element-ID umgeben sein. +
Wenn du mehrere CSS-Stylings für die Vorlage speichern möchtest, gib alle Werte untereinander, getrennt durch ein Semikolon, ein. +
*_Tipp:_* Schau dir das CSS-Tutorial mit anschaulichen Beispielen auf dieser link:https://www.w3schools.com/css/default.asp[Seite^] an.

Klappe die folgende Box auf, um Beispiele zu sehen.

[.collapseBox]
.Positiv- und Negativbeispiele für das CSS-Styling
--
<<#image-emailbuilder-css-positive-example-without-class-name>> zeigt ein *[green]#Positivbeispiel#* für ein CSS-Styling. Hier hat die Klasse keinen Namen, sondern besteht nur aus `*`. +
*_Hinweis:_* Ein Beispiel für eine Klasse mit Namen siehst du in <<#image-emailbuilder-css-own-class>> weiter unten in dieser Box.

[[image-emailbuilder-css-positive-example-without-class-name]]
.CSS-Styling: *[green]#Positivbeispiel#*
image::crm:emailbuilder-css-positiv-beispiel-ohne-klassenname.png[width=320, height=180]

<<#image-emailbuilder-css-negative-example>> zeigt im Gegensatz zum ersten Bild ein *[red]#Negativbeispiel#*. Hier fehlt die Klasse. Deshalb würde das CSS-Styling auch _nicht_ für die Vorlage greifen. 

[[image-emailbuilder-css-negative-example]]
.CSS-Styling: *[red]#Negativbeispiel#*
image::crm:emailbuilder-css-negativbeispiel.png[width=320, height=180]

Wenn du mehrere Klassen oder Element-IDs erstellt hast und diese auch in deinen Vorlagen unterschiedlich anwenden möchtest, empfehlen wir, der Klasse oder der Element-ID immer einen Namen zu geben. So erkennst du später leichter die korrekte Klasse wieder, wenn du diese in den Widget-Einstellungen in den Feldern *Eigene CSS-Klasse* bzw. *Eigene Element-ID* auswählen möchtest:

image::crm:emailbuilder-eigene-css-klasse-element-id.png[width=320, height=180]

Die folgenden beiden Bilder zeigen einmal das Beispiel mit einer benannten Klasse und einmal mit einer benannten ID. +
*_Beachte:_* Wenn du der Klasse einen Namen gibst, muss dieser immer mit `.` beginnen. Wenn du der ID einen Namen gibst, muss diese immer mit `#` beginnen.

[[image-emailbuilder-css-own-class]]
.CSS-Styling: Eigene Klasse
image::crm:emailbuilder-css-eigene-klasse.png[width=320, height=180]

[[image-emailbuilder-css-own-id]]
.CSS-Styling: Eigene ID
image::crm:emailbuilder-css-eigene-id.png[width=320, height=180]

--

[[table-emailbuilder-examples-css-styling]]
.Beispiele: CSS-Styling
[cols="2,4"]
|===
|CSS-Styling |Erläuterung

|Breite der Vorlage
|Gib `max-width:` gefolgt von der gewünschten Breite in Pixel in das Feld *Benutzerdefiniertes Styling* ein, z.B. `max-width:1200px`.

|Hintergrundfarbe
|Gib `background-color:` gefolgt von dem gewünschten link:https://htmlcolorcodes.com/[HTML-Farbencode^] in das Feld *Benutzerdefiniertes Styling* ein, z.B. `background-color:&#35;A9F5D0;`.

|Schriftfarbe
|Gib `color:` gefolgt von dem gewünschten link:https://htmlcolorcodes.com/[HTML-Farbcode^] in das Feld *Benutzerdefiniertes Styling* ein, z.B. `color:&#35;A0A1B;`.

|Schriftgröße
|Gib `font-size:` gefolgt von dem gewünschten Schriftgröße in Pixel in das Feld *Benutzerdefiniertes Styling* ein, z.B. `font-size:20px;`.

|Schriftstärke
|Gib `font-weight:` gefolgt von der gewünschten Schriftstärke in das Feld *Benutzerdefiniertes Styling* ein, z.B. `font-weight:700;`.

|Textausrichtung
|Gib `text-align:center;` in das Feld *Benutzerdefiniertes Styling* ein, wenn der Text zentriert angezeigt werden soll. Gib `text-align:right;` ein, wenn der Text rechtsbündig angezeigt werden soll.

|Hintergrundbild
|Gib `background-image: url(_Link_zum_Bild_);` in das Feld *Benutzerdefiniertes Styling* ein und ersetze `_Link_zum_Bild_` durch den entsprechenden Bild-Link, um ein Hintergrundbild in deiner Vorlage anzuzeigen.

|Textrahmen
|Gib z.B. `border: 1px solid blue;` in das Feld *Benutzerdefiniertes Styling* ein, um einen 1 px schmalen, blauen Rahmen um den Text einzufügen.

|Innenabstand
|Gib `padding:10px;` in das Feld *Benutzerdefiniertes Styling* ein, wenn der Abstand auf allen Seiten 10px betragen soll. Gib `padding: 10px 20px;` ein, wenn der Abstand oben und unten 10px und links und rechts 20px betragen soll.

|===

[#widget-einfuegen]
=== Widget in Vorlage einfügen

Im Editor findest du eine Auswahl an Widgets, deren Inhalte bereits teilweise für dich vorkonfiguriert sind. In einigen Widgets kannst du dann später <<#verfuegbare-variablen, Variablen>> einfügen. +
Die folgenden Widgets sind verfügbar:

* <<#intable-widget-zweispaltiges-layout, Zweispaltiges Layout>>
* <<#intable-widget-dreispaltiges-layout, Dreispaltiges Layout>>
* <<#intable-widget-text, Text>>
* <<#intable-widget-code, Code>>
* <<#intable-widget-kontaktadresse, Kontaktadresse>>
* <<#intable-widget-auftragsadresse, Auftragsadresse>>
* <<#intable-widget-auftragspositionen, Auftragspositionen>> 
* <<#intable-widget-artikelliste, Artikelliste>>
* <<#intable-widget-bild, Bild>>

Beispielsweise findest du im Widget *Auftragspositionen* eine vordefinierte Liste mit den wichtigsten Variablen rund um den bestellten Artikel wie Artikelname, Anzahl der bestellten Menge, Preise, Versandkosten und Gesamtrechnungsbetrag. Du kannst die Inhalte jedoch jederzeit nach deinen Wünschen anpassen und weitere Spaltennamen und einzelne Positionen hinzufügen.

////
TODO: Screenshot vom Auftragspositionen-Widget einfügen
////

Gehe nun wie im Folgenden beschrieben vor, um ein Widget oder mehrere Widgets in deiner Vorlage einzufügen.

[.instruction]
Widget in Vorlage einfügen:

. Öffne das Menü *CRM » EmailBuilder*.
. Klappe den Ordner auf (material:chevron_right[]), der die Vorlage enthält, die du bearbeiten möchtest.
. Klicke auf die Vorlage.
. Klicke auf *Bearbeiten* (material:edit[]). +
→ Der Editor öffnet sich und die Widgets werden geladen.
. Klicke auf das Widget auf der linken Seite, das du einbinden möchtest, und ziehe es via Drag-and-drop in den schraffierten Bereich.
. Je nachdem, welches Widget du verwendet hast, klicke auf material:edit[] bzw. auf material:settings[] und nimm die Einstellungen vor. Beachte die Erläuterungen zu den einzelnen Widgets und deren Bearbeitungsmöglichkeiten in <<#table-available-widgets-emailbuilder>>.
. *Speichere* (material:save[]) die Einstellungen.

[[table-available-widgets-emailbuilder]]
.Im EmailBuilder verfügbare Widgets
[cols="1,3a"]
|====
|Widget |Erläuterung

|[#intable-widget-zweispaltiges-layout]*Zweispaltiges Layout*
a|Ermöglicht die Darstellung von Text in einem zweispaltigen Layout. Mit einem Klick auf material:settings[] öffnen sich die Einstellungen. Hier kannst du das Verhältnis, wie die beiden Spalten angezeigt werden, bestimmen. Zur Auswahl stehen die folgenden Werte:

* 50% / 50% (Standard)
* 30% / 70%
* 70% / 30%

Du kannst weitere Widgets in dieses Widget einfügen, indem du diese per Drag-and-drop in eine der beiden Spalten ziehst. Füge zum Beispiel ein <<#intable-widget-bild, Bild-Widget>> ein. +
*_Hinweis:_* In den Widget-Einstellungen kannst du über die Felder *Eigenes CSS* und *Eigene Element-ID* das CSS-Styling deiner Vorlage selber anpassen. Weitere Informationen und Beispiele dazu findest du in diesem <<#beispiele-benutzerdefiniertes-styling, Kapitel>>.

Klicke auf *Einstellungen schließen* (material:close[]), um die Einstellungen zu schließen. Klicke auf *Widget löschen* (material:delete[]), um das Widget zu entfernen.

|[#intable-widget-dreispaltiges-layout]*Dreispaltiges Layout*
a|Ermöglicht die Darstellung von Text in einem dreispaltigen Layout.

Du kannst weitere Widgets in dieses Widget einfügen, indem du diese per Drag-and-drop in eine der drei Spalten ziehst. Füge zum Beispiel ein <<#intable-widget-bild, Bild-Widget>> ein.

Mit einem Klick auf material:settings[] öffnen sich die Einstellungen. Hier kannst du das Widget mit einem Klick auf *Widget löschen* (material:delete[]) entfernen. Weitere Einstellungen können hier nicht vorgenommen werden. Klicke auf *Einstellungen schließen* (material:close[]), um die Einstellungen zu schließen. +
*_Hinweis:_* In den Widget-Einstellungen kannst du über die Felder *Eigenes CSS* und *Eigene Element-ID* das CSS-Styling deiner Vorlage selber anpassen. Weitere Informationen und Beispiele dazu findest du in diesem <<#beispiele-benutzerdefiniertes-styling, Kapitel>>.

|[#intable-widget-text]*Text*
|In diesem Widget kannst du Text eingeben und Variablen verwenden. Du hast auch die Möglichkeit, den eingegebenen Text zu formatieren. Mache dazu einen Doppelklick auf das Wort, das du formatieren möchtest.

Mit einem Klick auf material:edit[] öffnet sich auf der linken Seite die Liste mit den Variablen. Nutze die Suchfunktion, um nach einzelnen Variablen zu suchen oder finde die passenden Variablen, indem du die einzelnen Bereiche aufklappst (material:chevron_right[]). Klicke auf die Variable, die du einfügen möchtest. Gib ggf. zusätzlich Text in das Widget ein.

Mit einem Klick auf material:settings[] öffnen sich die Einstellungen. Hier kannst du über die Felder *Eigenes CSS* und *Eigene Element-ID* das CSS-Styling deiner Vorlage selber anpassen. Weitere Informationen und Beispiele dazu findest du in diesem <<#beispiele-benutzerdefiniertes-styling, Kapitel>>. +
Mit einem Klick auf *Widget löschen* (material:delete[]) entfernst du das Widget. Klicke auf *Einstellungen schließen* (material:close[]), um die Einstellungen zu schließen.

|[#intable-widget-code]*Code*
|In diesem Widget kannst du Text im HTML-Format eingeben und mit <<#twig-code-widget, twig expressions>> arbeiten. Hierzu sind einige grundlegende HTML-Kenntnisse erforderlich.

Klicke auf icon:code[], um die Ansicht zu öffnen.

Mit einem Klick auf material:settings[] öffnen sich die Einstellungen. Hier kannst du das Widget mit einem Klick auf *Widget löschen* (material:delete[]) entfernen. Weitere Einstellungen können hier nicht vorgenommen werden. Klicke auf *Einstellungen schließen* (material:close[]), um die Einstellungen zu schließen. 

Beachte auch die Code-Beispiele für das Code-Widget in diesem <<#code-beispiele-code-widget, Kapitel>>.

|[#intable-widget-kontaktadresse]*Kontaktadresse*
|Dieses Widget enthält Daten der Kontaktadresse. Das Layout der Adresse richtet sich nach den Einstellungen, die du im Menü *Einrichtung » CRM » Adress-Layout* gespeichert hast. Das bedeutet, das Layout wird im EmailBuilder genauso ausgegeben, wie das Adress-Layout, das du als xref:crm:vorbereitende-einstellungen.adoc#adress-layout[Standard-Adress-Layout] im Menü *Einrichtung » CRM » Adress-Layout* definiert hast.

Mit einem Klick auf material:settings[] öffnen sich die Einstellungen. Wähle aus der Dropdown-Liste den Adresstyp *Rechnungsadresse* oder *Lieferadresse*.

Klicke auf *Einstellungen schließen* (material:close[]), um die Einstellungen zu schließen. Klicke auf *Widget löschen* (material:delete[]), um das Widget zu entfernen. +
*_Hinweis:_* In den Widget-Einstellungen kannst du über die Felder *Eigenes CSS* und *Eigene Element-ID* das CSS-Styling deiner Vorlage selber anpassen. Weitere Informationen und Beispiele dazu findest du in diesem <<#beispiele-benutzerdefiniertes-styling, Kapitel>>.

*_Hinweis:_* Alle zum Kontakt gespeicherten Adressen findest du im Kontaktdatensatz im Bereich xref:crm:kontakt-bearbeiten.adoc#adressen[Adressen]. Die primäre Lieferadresse und die primäre Rechnungsadresse des Kontakts findest du im Kontaktdatensatz im Bereich xref:crm:kontakt-bearbeiten.adoc#primaere-adresse[Primäre Adresse].

|[#intable-widget-auftragsadresse]*Auftragsadresse*
|Dieses Widget enthält Daten der Auftragsadresse. Das Layout der Adresse richtet sich nach den Einstellungen, die du im Menü *Einrichtung » CRM » Adress-Layout* gespeichert hast. Das bedeutet, das Layout wird im EmailBuilder genauso ausgegeben, wie das Adress-Layout, das du als xref:crm:vorbereitende-einstellungen.adoc#adress-layout[Standard-Adress-Layout] im Menü *Einrichtung » CRM » Adress-Layout* definiert hast.

Mit einem Klick auf material:settings[] öffnen sich die Einstellungen. Wähle aus der Dropdown-Liste den Adresstyp *Rechnungsadresse* oder *Lieferadresse*.

Klicke auf *Einstellungen schließen* (material:close[]), um die Einstellungen zu schließen. Klicke auf *Widget löschen* (material:delete[]), um das Widget zu entfernen. +
*_Hinweis:_* In den Widget-Einstellungen kannst du über die Felder *Eigenes CSS* und *Eigene Element-ID* das CSS-Styling deiner Vorlage selber anpassen. Weitere Informationen und Beispiele dazu findest du in diesem <<#beispiele-benutzerdefiniertes-styling, Kapitel>>.

*_Hinweis:_* Alle zum Kontakt gespeicherten Adressen findest du im Kontaktdatensatz im Bereich xref:crm:kontakt-bearbeiten.adoc#adressen[Adressen]. Die primäre Lieferadresse und die primäre Rechnungsadresse des Kontakts findest du im Kontaktdatensatz im Bereich xref:crm:kontakt-bearbeiten.adoc#primaere-adresse[Primäre Adresse].

|[#intable-widget-auftragspositionen]*Auftragspositionen*
|Dieses Widget enthält ein vordefiniertes Layout für die Auftragspositionen, das du selbstverständlich anpassen kannst.

// TODO: Screenshot hier einbauen? Evtl. in collapsible box.

Mit einem Klick auf material:settings[] öffnen sich die Einstellungen. Wähle aus der Liste *Währungseinstellungen*, ob du das Währungszeichen (z.B. *€*) oder das ISO-Symbol (z.B.*EUR*) im Widget anzeigen möchtest.

Wähle aus den weiteren Dropdown-Listen, welche Inhalte in den Spalten und als einzelne Positionen in der Tabelle angezeigt werden sollen. Mit einem Klick auf material:unfold_more[] kannst du die Reihenfolge ändern. Gib jeweils in den Feldern *Spaltenbreite* darunter einen Wert in Prozent ein, um die Breite der Spalten in der Tabelle anzupassen. Du siehst in der Vorschau sofort, wie sich die Änderungen auf die Tabelle auswirken. +
Mit einem Klick auf material:add[] (*Neuen Eintrag hinzufügen*) in den Einstellungen kannst du weitere Spalten hinzufügen. Mit einem Klick auf *Eintrag entfernen* (material:delete[]) löschst du die Spalten aus der Übersicht. +
*_Hinweis:_* In den Widget-Einstellungen kannst du über die Felder *Eigenes CSS* und *Eigene Element-ID* das CSS-Styling deiner Vorlage selber anpassen. Weitere Informationen und Beispiele dazu findest du in diesem <<#beispiele-benutzerdefiniertes-styling, Kapitel>>.

[.collapseBox]
.Verfügbare Spalten und einzelne Positionen für die Tabelle im Auftragspositionen-Widget
--

*Verfügbare Spalten*:

* Artikel-ID
* Artikelname
* Artikelbild
* Anzahl
* Barcode
* Barcode-Bild
* Einzelpreis (brutto)
* Einzelpreis (netto)
* MwSt.-Betrag
* MwSt.-Satz
* Preis (brutto)
* Preis (netto)
* Rabatt (%)
* Rabatt (brutto)
* Rabatt (netto)
* Varianten-ID
* Variantenname
* Variantennummer
* Verfügbarkeit
* Wert der Bestelleigenschaft

*_Tipp:_* Im Feld *Spaltenbreite* kannst du eine Zahl in Prozent eingeben, um die Spaltenbreiten selbst festzulegen.

*Verfügbare einzelne Positionen*:

* Mehrwertsteuersätze und -Beträge
* Rabatt (brutto)
* Rabatt (netto)
* Versandkosten (brutto)
* Versandkosten (netto)
* Warenwert (brutto)
* Warenwert (netto)

* Rechnungsbetrag (brutto)
* Rechnungsbetrag (netto)

--

|[#intable-widget-artikelliste]*Artikelliste*
|In diesem Widget kannst du Text eingeben und Variablen verwenden. Beachte, dass in diesem Widget nur die Variablen aus der Unterkategorie <<#variablen-auftrag-auftragspositionen, Auftrag / Auftragspositionen (nur für Artikellisten-Widget)>> verwendet werden können.

Mit einem Klick auf material:edit[] öffnet sich auf der linken Seite die Liste mit den Variablen. Nutze die Suchfunktion, um nach einzelnen Variablen zu suchen oder finde die passenden Variablen, indem du die einzelnen Bereiche aufklappst (material:chevron_right[]). Klicke auf die Variable, die du einfügen möchtest. Gib ggf. zusätzlich Text in das Widget ein.

Mit einem Klick auf material:settings[] öffnen sich die Einstellungen. Hier kannst du über die Felder *Eigenes CSS* und *Eigene Element-ID* das CSS-Styling deiner Vorlage selber anpassen. Weitere Informationen und Beispiele dazu findest du in diesem <<#beispiele-benutzerdefiniertes-styling, Kapitel>>. +
Mit einem Klick auf *Widget löschen* (material:delete[]) entfernst du das Widget. Klicke auf *Einstellungen schließen* (material:close[]), um die Einstellungen zu schließen.

|[#intable-widget-bild]*Bild*
| In diesem Widget kannst du Bilder wie z.B. dein Firmenlogo hochladen, um dieses in deinen E-Mail-Vorlagen anzuzeigen.

Mit einem Klick auf material:settings[] öffnen sich die Einstellungen. Hier kannst du das Bild hochladen, die Breite und die Höhe des Bildes in px oder % angeben, einen Alternativtext eingeben, das Styling im CSS-Format anpassen und den Bild-Link angeben. +
*_Wichtig:_* Gib bei dem Bild-Link immer `https` mit an. +
*_Tipp:_* Wenn du das Bild an eine bestimmte Position setzen möchtest, kannst du das CSS-Styling im Feld *Eigenes Styling* anpassen, z.B. `margin-left: auto; margin-right: 0; display: block;` oder `float:right;display:block;`. Weitere Informationen findest du z.B. link:https://www.w3schools.com/css/css3_images.asp[hier^] und link:https://www.caniemail.com/[hier^].

Klicke auf *Einstellungen schließen* (material:close[]), um die Einstellungen zu schließen. Klicke auf *Widget löschen* (material:delete[]), um das Widget zu entfernen. +
*_Hinweis:_* In den Widget-Einstellungen kannst du über die Felder *Eigenes CSS* und *Eigene Element-ID* das CSS-Styling deiner Vorlage selber anpassen. Weitere Informationen und Beispiele dazu findest du in diesem <<#beispiele-benutzerdefiniertes-styling, Kapitel>>.

|====

[#widget-vorschau-anzeigen]
[discrete]
==== Vorschau des Widgets anzeigen

Prüfe das Widget, indem du die Vorschau öffnest.

. Öffne das Menü *CRM » EmailBuilder*.
. Klappe den Ordner auf (material:chevron_right[]), der die Vorlage enthält, von der du eine Vorschau anzeigen möchtest.
. Klicke auf die Vorlage.
. Klicke auf *Vorschau* (material:preview[]).
. Wähle *Vorschau HTML* oder *Vorschau reiner Text*. +
→ Die Vorschau wird in einem separaten Fenster geöffnet.
. Prüfe das Widget.
. *Schließe* das Fenster.

Wenn du mit dem Ergebnis nicht zufrieden bist, <<#widget-bearbeiten, bearbeite das Widget>>.

[#widget-bearbeiten]
=== Widget bearbeiten

Du kannst die Inhalte der Widgets jederzeit bearbeiten. Gehe dazu wie im Folgenden beschrieben vor.

[.instruction]
Widget bearbeiten:

. Öffne das Menü *CRM » EmailBuilder*.
. Klappe den Ordner auf (material:chevron_right[]), der die Vorlage enthält, die du bearbeiten möchtest.
. Klicke auf die Vorlage.
. Klicke auf *Bearbeiten* (material:edit[]). +
→ Der Editor öffnet sich und die Widgets werden geladen.
. Klicke auf material:settings[]. +
→ Die Widget-Einstellungen werden – sofern vorhanden – geöffnet.
. Klicke auf material:edit[] – sofern vorhanden. +
→ Auf der linken Seite öffnen sich die Variablen.
. Nutze die Suchfunktion, um nach einzelnen Variablen zu suchen oder finde die passenden Variablen, indem du die einzelnen Bereiche aufklappst (material:chevron_right[]).
. Klicke auf die Variable, die du in dem Widget anzeigen möchtest. +
→ Die Variable wird in das Widget übernommen.
. *Speichere* die Einstellungen.

[#expertenmodus-verwenden]
=== Expertenmodus verwenden

Verwende den Expertenmodus für deine EmailBuilder-Vorlagen, um noch flexibler beim Gestalten deiner Inhalte zu sein. +
Allgemeine Informationen zu Twig findest du in der link:https://twig.symfony.com/doc/3.x/[Twig Documentation^].

[#vorlage-expertenmodus-erstellen]
==== Vorlage im Expertenmodus erstellen

Gehe wie im Folgenden beschrieben vor, um eine Vorlage im Expertenmodus zu erstellen.

[.instruction]
Vorlage im Expertenmodus erstellen:

. Öffne das Menü *CRM » EmailBuilder*.
. Klicke in der Zeile des Ordners, in dem du eine Vorlage erstellen möchtest, auf material:more_vert[] und dann auf material:add[] *Hinzufügen* material:play_arrow[].
. Klicke auf material:description[] *Vorlage*. +
→ Das Fenster *Neue Vorlage hinzufügen* öffnet sich.
. Gib einen Namen ein.
. Aktiviere (material:toggle_on[role=skyBlue]) die Option *Expertenmodus*.
. Klicke auf *Speichern*. + 
→ Die Vorlage öffnet sich.
. Nimm die Änderungen im Bereich *Allgemeine Einstellungen* vor. Beachte dazu die Erläuterungen in <<#table-emailbuilder-create-template>>.
. Klicke oben rechts auf material:add[] (*Hinzufügen*) und wähle eine Sprache aus der Liste. +
→ Das Fenster *Betreff eingeben* öffnet sich.
. Gib einen Betreff für die Vorlage ein.
. Klicke auf material:save[] (*Speichern*).
. Klicke nun auf material:edit[] (*Bearbeiten*), um den Expertenmodus zu öffnen.
. Nimm die gewünschten Änderungen in der Vorlage vor. Beachte dazu auch die Erläuterungen in den Kapiteln <<#dark-mode, Vorlage im "dark mode" anzeigen>> und <<#variablen-im-expertenmodus, Variablen im Expertenmodus einfügen>>.
. Klicke auf material:save[] (*Speichern*). +
*_Hinweis:_* Vorlagen, die mit dem Expertenmodus erstellt wurden, werden in der Navigation auf der linken Seite mit dem Symbol material:integration_instructions[] und dem _Namen der Vorlage_ angezeigt.

[#dark-mode]
==== Vorlage im "dark mode" anzeigen

Du kannst dir Vorlagen im Expertenmodus auch im "dark mode" anzeigen lassen. Klicke dazu in der Expertenmodusvorlage auf material:dark_mode[] (*Dark mode*).

[[image-emailbuilder-expert-mode-dark-mode]]
.Vorlage im Expertenmodus in "dark mode"
image::crm:emailbuilder-expert-mode-dark-mode.png[width=640, height=360]

Wenn du wieder in den "light mode" zurück wechseln möchtest, klicke auf das Symbol material:light_mode[] (*Light mode*).
 
[#variablen-im-expertenmodus]
==== Variablen im Expertenmodus einfügen

Wenn du dich in der Vorlage im Expertenmodus befindest (siehe <<#image-emailbuilder-expert-mode-dark-mode>>), kannst du mit einem Klick auf material:list[] (*Variablen einblenden*) die Liste der Variablen einblenden. 

Gib im Feld *Suche* den Namen der gewünschten Variable ein oder klappe die einzelnen Kategorien auf und klicke dich durch die Variablen. +
Wenn du die gewünschte Variable in der Liste gefunden hast, klicke einmal darauf, um die entsprechende twig expression in die Zwischenablage zu kopieren.

Navigiere nun mit der Maus an die gewünschte Stelle in deiner Vorlage, in der du den Inhalt einfügen möchtest. Füge den soeben in die Zwischenablage kopierten Inhalt über die Tastenkombination Strg+v bzw. cmd+v ein. +
*_Hinweis:_* Weil du dich im Expertenmodus befinden, wird hier die entsprechende twig expression eingefügt und _nicht_ der Variablenname.

// TODO: Beispiele Expertenmodus.

[#vorschau-expertenmodus]
==== Vorschau im Expertenmodus anzeigen

Du kannst dir jederzeit eine Vorschau deiner Vorlage im Expertenmodus anschauen. Dies ist entweder im HTML-Format oder als reiner Text möglich. Gib eine Auftrags-ID ein, um die Vorschau mit echten Auftragsdaten zu befüllen. Gehe wie im Folgenden beschrieben vor, um die Vorschau der Vorlage anzuzeigen.

[.instruction]
Vorschau anzeigen:

. Öffne das Menü *CRM » EmailBuilder*.
. Klappe den Ordner auf (material:chevron_right[]), der die Vorlage enthält, von der du eine Vorschau anzeigen möchtest.
. Klicke auf die Vorlage material:integration_instructions[] _Name der Vorlage_.
. Klicke auf *Vorschau* (material:preview[]). +
→ Das Fenster *Vorschau* öffnet sich.
. Wähle aus der Dropdown-Liste *Format der Vorschau* die Option *HTML* oder *Reiner Text*.
. Gib im Feld *Auftrags-ID* die ID des Auftrags ein, von dem du die Vorschau sehen möchtest.
. Klicke auf material:preview[] *VORSCHAU*. +
→ Die Vorschau wird in einem separaten Fenster geöffnet. +
*_Hinweis:_* Dein System merkt sich den Wert der eingegeben Auftrags-ID bis zum nächsten Login oder bis der Browser-Cache geleert wird.
. Prüfe die Vorlage.
. *Schließe* das Fenster.

[#standardvorlagen-verwenden]
=== Standardvorlagen verwenden

Bevor du einen <<#ordner-erstellen, neuen Ordner erstellt>> hast, sind dir bestimmt die beiden bereits vorhandenen Ordner *Standardvorlagen* und *Default templates* aufgefallen? Diese Ordner enthalten vordefinierte Vorlagen in deutscher und englischer Sprache. Du kannst die Standardvorlagen entweder verwenden wie sie im System vorhanden sind oder die Inhalte nach deinen Wünschen anpassen.

In einer Standardvorlage ist neben dem Inhalt der E-Mail-Vorlage bereits der Betreff ausgefüllt. Das bedeutet, du musst anschließend noch den Eigner, den Mandant sowie Header und Footer wählen und die Felder *Antwort an* und ggf. *CC* und *BCC* befüllen. Außerdem ist es möglich, den vorausgefüllten Betreff anzupassen und dynamische und statische Anhänge anzuhängen sowie das Zahlenformat, Datumsformat und Zeitformat und die Anzahl der Nachkommastellen zu definieren.

[TIP]
.Zwischen mehreren Vorlagen hin- und herwechseln
====
Wenn du später mehrere Vorlagen zur selben Zeit bearbeitest, kannst du über die Navigation auf der linken Seiten zwischen den einzelnen Vorlagen hin- und herwechseln. Die Vorlage, die du gerade geöffnet hast, ist am Zeilenanfang blau markiert.
====

[[image-emailbuilder-example-default-template]]
.Beispiel: Standardvorlage *Auftrag: Versandbestätigung*
image::crm:emailbuilder-beispiel-standardvorlage.png[width=640, height=360]

[#standardvorlage-erstellen]
==== Standardvorlage erstellen

12 Standardvorlagen sind in deutscher und englischer Sprache in deinem System verfügbar. Beim Erstellen einer neuen Vorlage kannst du eine dieser Standardvorlagen wählen und ggf. noch anpassen. Welche Standardvorlagen es gibt und wie deren Betreff ist, liest du im Kapitel <<#standardvorlagen-name-und-betreff, Verfügbare Standardvorlagen>>.

[.instruction]
Standardvorlage erstellen:

. Öffne das Menü *CRM » EmailBuilder*.
. Klicke in der Zeile des Ordners, in dem du eine Standardvorlage erstellen möchtest, auf material:more_vert[] und dann auf material:add[] *Hinzufügen* material:play_arrow[].
. Klicke auf material:description[] *Vorlage*. +
→ Das Fenster *Neue Vorlage erstellen* öffnet sich.
. Gib einen Namen für die Vorlage ein.
. Wähle Header und Footer für die Standardvorlage aus den Dropdown-Listen.
. Wähle eine Standardvorlage aus der Dropdown-Liste *Aus Standardvorlage erstellen*.
. *Speichere* (material:save[]) die Einstellungen. +
→ Die Vorlage wird erstellt und geöffnet. 

[TIP]
Wenn du die Standardvorlage nicht innerhalb eines Ordners erstellen möchtest, klicke auf der Startseite des Menüs *CRM » EmailBuilder* direkt unten links auf material:add[] *Hinzufügen* material:play_arrow[] und klicke dann auf material:description[] *Vorlage*. Die Vorlage wird dann auf der ersten Ebene erstellt, ohne dass sie zu einem Ordner gehört.

[#standardvorlage-betreff-aendern]
==== Betreff der Standardvorlage ändern

Sobald die Standardvorlage erstellt ist, siehst du in der Symbolleiste den vorausgefüllten Betreff. Klicke einfach in die Zeile des Betreffs, um ihn anzupassen. Im Bereich *Spracheinstellungen* kannst du bis zu 3 statische Anhänge wählen, die du an deine E-Mail-Vorlage anhängst. Ebenfalls in diesem Bereich kannst du das xref:crm:emailbuilder.adoc#beispiele-benutzerdefiniertes-styling[benutzerdefinierte Styling] der Vorlage wie zum Beispiel die Breite der Vorlage oder die Schriftgröße ändern und das <<#intable-template-settings-number-format, Zahlenformat>>, <<#intable-template-settings-date-format, Datumsformat>> und <<#intable-template-settings-time-format, Zeitformat>> in deinen Vorlagen definieren.

[#standardvorlage-bearbeiten]
==== Standardvorlage bearbeiten

Neben den Spracheinstellungen, in denen du beispielsweise statische Anhänge für deine Vorlage wählen kannst, kannst du den Inhalt oder den Betreff der Vorlage selbst mit einem Klick auf material:edit[] in der Zeile *Inhalt und Betreff* jederzeit anpassen.

Im Bereich *Allgemeine Einstellungen* der Vorlage wählst du einen Eigner, den Mandanten und den Header und Footer, falls noch nicht geschehen. Dort kannst du auch bis zu 4 dynamische Anhänge wählen und die Felder *Antwort an*, *CC* und *BCC* befüllen.

[#standardvorlagen-name-und-betreff]
==== Verfügbare Standardvorlagen

Möchtest du wissen, welche Standardvorlagen bereits im EmailBuilder vorhanden sind und wie deren Betreff lautet? Dann klappe den folgenden Bereich mit einem Klick auf material:expand_more[] einfach auf.

[.collapseBox]
.Standardvorlagen im EmailBuilder und deren Betreff
--

*Deutsche Standardvorlagen im EmailBuilder und deren Betreff*

[[table-default-templates-german]]
.Deutsche Standardvorlagen im EmailBuilder und deren Betreff
[cols="2,2"]
|====
|Deutsche Vorlage |Betreff

|Auftrag: Änderung
|Auftragsänderung Ihrer Bestellung mit der ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|Auftrag: Teilzahlung erhalten
|Teilzahlung für Auftrags-ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125; erhalten

|Auftrag: Versandbestätigung
|Versandbestätigung für Ihre Bestellung mit der ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|Auftrag: Zahlungseingang vollständig
|Zahlung für Auftrag &#123;&#8288;&#123;order.id&#125;&#8288;&#125; vollständig erhalten

|Auftrag: Zahlungserinnerung
|Zahlungsstatus für den Auftrag mit der ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125; vom &#123;&#8288;&#123;order.formattedDates.createdOn&#125;&#8288;&#125;

|Auftrag: Rechnung PDF-Anhang
|Rechnung zu Order-ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125; vom &#123;&#8288;&#123;order.formattedDates.createdOn&#125;&#8288;&#125;

|eBay: Disput / Storno, keine Zahlung
|Ihre Bestellung mit der ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125; wurde storniert

|eBay: Eingangsbestätigung Bestellung
|eBay-Auktion gewonnen: Auftrags-ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|eBay: Eingangsbestätigung mit Bankdaten ohne Checkout
|Eingangsbestätigung zum eBay-Auftrag mit der ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|Shop: Neues Passwort
|Ihre angeforderten Zugangsdaten zu unserem Webshop

|Shop: Newsletter-Anmeldung
|Bestätigung zur Newsletter-Anmeldung

|Shop: Eingangsbestätigung Bestellung
|Auftragsbestätigung für Auftrags-ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|====

*Englische Standardvorlagen im EmailBuilder und deren Betreff*

[[table-default-templates-english]]
.Englische Standardvorlagen im EmailBuilder und deren Betreff
[cols="2,2"]
|====
|Englische Vorlage |Betreff

|Order: Changes
|Change to your order with ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|Order: Partial payment received
|Partial payment for order ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125; received

|Order: Shipping confirmation
|Shipping confirmation for your order with ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|Order: Payment complete
|Payment for order ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125; fully received

|Order: Payment reminder
|Payment status for the order placed on &#123;&#8288;&#123;order.formattedDates.createdOn&#125;&#8288;&#125; with order ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|Order: Invoice
|Invoice for order ID: &#123;&#8288;&#123;order.id&#125;&#8288;&#125; from &#123;&#8288;&#123;order.formattedDates.createdOn&#125;&#8288;&#125;

|eBay: dispute / cancellation, no payment
|Your order with the ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125; was cancelled

|eBay: Order confirmation
|eBay auction won: Order ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|eBay: Order confirmation with bank details without checkout
|Order confirmation for your eBay order with the ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|Shop: New password
|Your requested login details for our online shop

|Shop: Newsletter registration
|Confirmation of newsletter registration

|Shop: Order confirmation
|Order confirmation for your order with ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|====

--

[#vorlage-vorschau-anzeigen]
=== Vorschau der Vorlage anzeigen

Du kannst dir jederzeit eine Vorschau deiner Vorlage anschauen. Dies ist entweder im HTML-Format oder als reiner Text möglich. Gib eine Auftrags-ID ein, um die Vorschau mit echten Auftragsdaten zu befüllen. Gehe wie im Folgenden beschrieben vor, um die Vorschau einer Vorlage anzuzeigen.

[TIP]
.E-Mail-Vorlagen werden im Multipart-Format versendet
====
Die E-Mail-Vorlagen im EmailBuilder verwenden das Multipart-Format. Das bedeutet, dass deine E-Mails gleichzeitig in einer HTML- und in einer Textversion versendet werden. +
So sind deine E-Mails für alle Empfänger:innen lesbar, auch wenn deren E-Mail-Client die Anzeige von HTML in E-Mails einschränkt oder ganz unterbindet. Auf der anderen Seite werden die von dir gestalteten HTML-Versionen deiner E-Mail-Vorlagen für die Empfänger:innen angezeigt, deren E-Mail-Client die Darstellung von HTML erlaubt. Der Vorteil für dich hierbei ist, dass du nur eine E-Mail-Vorlage pflegen musst.
====

[.instruction]
Vorschau anzeigen:

. Öffne das Menü *CRM » EmailBuilder*.
. Klappe den Ordner auf (material:chevron_right[]), der die Vorlage enthält, von der du eine Vorschau anzeigen möchtest.
. Klicke auf die Vorlage.
. Klicke auf *Vorschau* (material:preview[]). +
→ Das Fenster *Vorschau* öffnet sich.
. Wähle aus der Dropdown-Liste *Format der Vorschau* die Option *HTML* oder *Reiner Text*.
. Gib im Feld *Auftrags-ID* die ID des Auftrags ein, von dem du die Vorschau sehen möchtest.
. Klicke auf material:preview[] *VORSCHAU*. +
→ Die Vorschau wird in einem separaten Fenster geöffnet. +
*_Hinweis:_* Dein System merkt sich den Wert der eingegeben Auftrags-ID bis zum nächsten Login oder bis der Browser-Cache geleert wird.
. Prüfe die Vorlage.
. *Schließe* das Fenster.

Wenn du mit dem Ergebnis nicht zufrieden bist, <<#vorlage-bearbeiten, bearbeite>> den Inhalt deiner Vorlage.

[#vorlage-suchen]
=== Vorlage suchen

Um eine bestimmte Vorlage zu suchen, gibst du die dir bekannten Suchbegriffe in die Filter ein. Es ist auch möglich, mehrere Suchbegriffe gleichzeitig in die Suchfelder einzugeben. Dies ermöglicht eine schnellere und genauere Suche.

[.instruction]
Vorlage suchen:

. Öffne das Menü *CRM » EmailBuilder*.
* *_Möglichkeit 1:_* Gib einen Wert im Suchfeld ein und wähle dann den für dich passenden Filter aus der Vorschlagsliste. *_Beispiel:_* Wenn du eine Zahl eingibst, werden dir mögliche Filter mit dieser ID vorgeschlagen wie z.B. die Vorlagen-ID.
* *_Möglichkeit 2:_* Klicke auf material:tune[], um die Suchergebnisse mit Hilfe von Filtern einzugrenzen.
. Beachte die Erläuterungen zu den Filtern in <<#table-search-template>>. +
*_Tipp:_* Gib eine Kombination aus allen oder mehreren Werten und Optionen ein, um die Suche noch genauer einzugrenzen.
. Klicke auf material:search[] *Suchen*. +
→ Die Vorlagen, die den eingestellten Suchkriterien entsprechen, werden in der Übersicht angezeigt.

[[table-search-template]]
.Verfügbare Filter für die Vorlagensuche
[cols="1,3"]
|====
|Filter |Erläuterung

| *ID*
|Gib eine ID ein, um nach der Vorlage mit genau dieser ID zu suchen.

| *Sprache*
|Wähle (material:check_box[role=skyBlue]) eine Sprache aus der Dropdown-Liste, um nur nach Vorlagen, die in dieser Sprache erstellt wurden, zu suchen. Du kannst nach einer Sprache oder mehreren Sprachen gleichzeitig filtern.

| *Name*
|Gib einen Namen ein, um nach Vorlagen mit diesem Namen zu suchen. +
*_Hinweis:_* Wenn du in der Vergangenheit bereits "alte" Vorlagen im Menü *Einrichtung » Mandant » [Mandant wählen] » E-Mail » Vorlagen* erstellt hast, kannst du dieses Feld verwenden, um hier die alte ID der Vorlage zu suchen. Die alte ID der Vorlage wurde im Zuge der Migration in Klammern hinter den Namen geschrieben.

| *Mandant*
|Wähle (material:check_box[role=skyBlue]) einen Mandant aus der Dropdown-Liste, um nur nach Vorlagen, die für diesen Mandant erstellt wurden, zu suchen.

| *Typ*
|Wähle (material:check_box[role=skyBlue]) einen Typ aus der Dropdown-Liste, um nur nach Vorlagen mit diesem Vorlagentyp zu suchen. Du kannst nach einem Typen oder mehreren Typen gleichzeitig filtern. +
Verfügbare Optionen: *Vorlage*, *Header*, *Footer*.

| *Eigner*
|Wähle (material:check_box[role=skyBlue]) einen Eigner aus der Dropdown-Liste, um nur nach Vorlagen, die für diesen Eigner erstellt wurden, zu suchen.

| material:replay[]
|Setzt die gewählten Filterkriterien zurück.

| material:search[] *SUCHEN*
|Führt die Suche aus. Die gefundenen Vorlagen werden angezeigt. +
*_Tipp:_* Setze keine Filter, wenn du alle Vorlagen sehen möchtest.

|====

[#vorlage-verschieben]
=== Vorlage verschieben

Du kannst deine Vorlagen jederzeit in einen anderen Ordner verschieben. Gehe dazu wie im Folgenden beschrieben vor.

[.instruction]
Vorlage verschieben:

. Öffne das Menü *CRM » EmailBuilder*.
. Klappe den Ordner auf (material:chevron_right[]), der die Vorlage enthält, die du verschieben möchtest.
. Klicke in der Zeile der Vorlage auf material:more_vert[] und dann auf material:open_with[] *Verschieben*. +
→ Das Fenster *Verschieben* öffnet sich.
. Wähle den Zielordner.
. Klicke auf material:open_with[] *Verschieben*. +
→ Die Vorlage wird in den gewählten Ordner verschoben.

[#vorlage-bearbeiten]
=== Vorlage bearbeiten

Die folgende Handlungsanleitung beschreibt, wie du allgemein Vorlagen bearbeitest. Die Vorgehensweise ist demnach identisch für das Bearbeiten aller Vorlagen, so z.B. auch für das Bearbeiten von deinen Vorlagen, die du für Header und Footer erstellt hast.

[TIP]
.Zwischen mehreren Vorlagen hin- und herwechseln
====
Wenn du später mehrere Vorlagen zur selben Zeit bearbeitest, kannst du über die Navigation auf der linken Seiten zwischen den einzelnen Vorlagen hin- und herwechseln. Die Vorlage, die du gerade geöffnet hast, ist am Zeilenanfang blau markiert.
====

[.instruction]
Vorlage bearbeiten:

. Öffne das Menü *CRM » EmailBuilder*.
. Klappe den Ordner auf (material:chevron_right[]), der die Vorlage enthält, die du bearbeiten möchtest.
. Klicke auf die Vorlage.
. Nimm die Änderungen vor. Beachte dazu auch die Erläuterungen in <<#table-emailbuilder-create-template>>.
. *Speichere* (material:save[]) die Einstellungen.

Neben den Spracheinstellungen, in denen du beispielsweise statische Anhänge für deine Vorlage wählen kannst, kannst du den Inhalt oder den Betreff der Vorlage selbst mit einem Klick auf material:edit[] in der Zeile *Inhalt und Betreff* jederzeit anpassen.

Im Bereich *Allgemeine Einstellungen* der Vorlage wählst du einen Eigner, den Mandanten und den Header und Footer, falls noch nicht geschehen. Dort kannst du auch bis zu 4 dynamische Anhänge wählen und die Felder *Antwort an*, *CC* und *BCC* befüllen.

[#betreff-aendern]
=== Betreff der Vorlage ändern

Sobald die Vorlage erstellt ist, siehst du in der Symbolleiste die Sprache der Vorlage. Klicke in die Zeile des Betreffs, um ihn anzupassen. Im Bereich *Spracheinstellungen* kannst du bis zu 3 statische Anhänge wählen, die du an deine E-Mail-Vorlage anhängst. Ebenfalls in diesem Bereich kannst du das xref:crm:emailbuilder.adoc#beispiele-benutzerdefiniertes-styling[benutzerdefinierte Styling] der Vorlage wie zum Beispiel die Breite der Vorlage oder die Schriftgröße ändern und das <<#intable-template-settings-number-format, Zahlenformat>>, <<#intable-template-settings-date-format, Datumsformat>> und <<#intable-template-settings-time-format, Zeitformat>> in deinen Vorlagen definieren.

[#sprache-hinzufuegen]
=== Sprache zur Vorlage hinzufügen

[[image-emailbuilder-sprachen-hinzufuegen]]
.Sprachen zu einer Vorlage hinzufügen
image::crm:emailbuilder-neue-sprache.png[width=640, height=360]

Du kannst deiner Vorlage, deinem Header und deinem Footer die folgenden Sprachen hinzufügen:

* Alle
** Wähle *Alle*, wenn du zum Beispiel ausschließlich dein Firmenlogo im Header verwendest und daher eine inhaltliche Anpassung bzw. eine Übersetzung in eine andere Sprache nicht notwendig ist.
* Deutsch
* Englisch
* Bulgarisch
* Französisch
* Italienisch
* Spanisch
* Türkisch
* Niederländisch
* Polnisch
* Portugiesisch
* Norwegisch
* Rumänisch
* Dänisch
* Schwedisch
* Tschechisch
* Russisch
* Slowakisch
* Chinesisch
* Vietnamesisch

Angenommen, du hast eine Versandbestätigung in deutscher Sprache verfasst und Widgets und Variablen eingefügt. Nun möchtest du diese Versandbestätigung auch in französischer Sprache für deine französischsprachigen Kund:innen erstellen. Der schnellste Weg ist dann, die Vorlage zu kopieren und anschließend die Übersetzung anzupassen. Wie du dazu vorgehen musst, ist im Kapitel <<#vorlage-kopieren, Vorlage kopieren>> beschrieben.

[IMPORTANT]
.Wichtig: Header und Footer in der jeweiligen Sprache hinzufügen
====
Wenn du eine Vorlage in <<#sprache-hinzufuegen, mehreren Sprachen>> erstellt hast, denke daran, auch den Header und den Footer in diesen Sprachen zu erstellen und diese mit der Vorlage zu verknüpfen. Andernfalls kann die Vorlage nicht versendet werden.
====

[#vorlage-kopieren]
=== Vorlage kopieren

Du möchtest eine vorhandene Vorlage kopieren, um Zeit bei dem Erstellen einer neuen Vorlage mit ähnlichen Inhalten zu sparen? Gehe wie im Folgenden beschrieben vor.

[TIP]
Nimm _vor dem Kopieren_ der Vorlage auch die Einstellungen im Bereich <<#intable-general-template-settings, Allgemeine Einstellungen>> vor. Der Vorteil bei dieser Reihenfolge ist, dass du so auch die Einstellungen selbst und nicht nur den Inhalt der Vorlage kopierst und diese nicht erneut für die anderen Vorlagen vornehmen musst.

[.instruction]
Vorlage kopieren:

. Öffne das Menü *CRM » EmailBuilder*.
. Klappe den Ordner auf (material:chevron_right[]), der die Vorlage enthält, die du kopieren möchtest.
. Klicke in der Zeile der Vorlage, die du kopieren möchtest, auf material:more_vert[] und dann auf material:content_copy[] *Kopieren*. +
→ Ein Fenster öffnet sich.
. Gib den Betreff für die kopierte Vorlage in der gewählten Sprache ein.
. Wähle unter *Ziel* in der Ordnerstruktur den Zielordner aus, in den du die Vorlage speichern möchtest.
. Klicke auf material:content_copy[] *Kopieren*. +
→ Die Vorlage wird kopiert und öffnet sich.
. Passe den Betreff an.
. <<#vorlage-bearbeiten, Bearbeite>> die kopierte Vorlage nun nach deinen Wünschen und passe die Übersetzung an.

[#vorlage-loeschen]
=== Vorlage löschen

Gehe wie im Folgenden beschrieben vor, um Vorlagen zu löschen. Nur die zusammengesetzte Vorlage wird gelöscht, aber _nicht_ die darin enthaltenen Komponenten wie der Header und der Footer.

[.instruction]
Vorlage löschen:

. Öffne das Menü *CRM » EmailBuilder*.
. Klappe den Ordner auf (material:chevron_right[]), der die Vorlage enthält, die du löschen möchtest.
. Klicke in der Zeile der Vorlage, die du löschen möchtest, auf material:more_vert[] und dann auf material:delete[] *Löschen*. +
→ Ein Fenster mit einer Sicherheitsabfrage öffnet sich.
. Klicke auf material:delete[] *Löschen*. +
→ Die Vorlage wird gelöscht.

[#sprache-entfernen]
=== Sprache aus der Vorlage entfernen

Gehe wie im Folgenden beschrieben vor, um eine bestimmte Sprache aus der Vorlage zu entfernen.

[.instruction]
Sprache aus der Vorlage entfernen:

. Öffne das Menü *CRM » EmailBuilder*.
. Klappe den Ordner auf (material:chevron_right[]), der die Vorlage enthält, aus der du eine Sprache entfernen möchtest.
. Klicke auf die Vorlage.
. Wähle oben in den Tabs der Vorlage die Sprache, die du entfernen möchtest.
. Klicke in der Zeile *Spracheinstellungen* auf material:more_vert[] und dann auf material:delete[] *Löschen*. +
→ Ein Fenster mit einer Sicherheitsabfrage öffnet sich.
. Klicke auf material:delete[] *Löschen*. +
→ Die Sprache wird aus der Vorlage entfernt.

[#e-mail-versand-automatisieren]
== E-Mail-Versand automatisieren

Dir stehen in plentysystems mehrere Möglichkeiten zur Verfügung, den E-Mail-Versand an deine Kund:innen zu automatisieren.

* <<#automatischer-e-mail-versand, Automatischen E-Mail-Versand einrichten>>
* <<#ereignisaktionen-einrichten, Ereignisaktionen einrichten>>
* <<#e-mail-versand-an-mehrere-e-mail-adressen, E-Mail-Versand an mehrere E-Mail-Adressen>>

[#automatischer-e-mail-versand]
=== Automatischen E-Mail-Versand einrichten

Den automatischen Versand richtest du im Assistenten *E-Mail-Konten* ein. Der Assistent steht dir im Menü *Einrichtung » Mandant » Global » E-Mail-Konten* zur Verfügung. +
Dort verknüpfst du verschiedene Ereignisse mit bereits erstellten <<#vorlage-erstellen, Vorlagen>>.

Welche Ereignisse verfügbar sind, erfährst du im Kapitel <<#e-mail-automatischer-versand, Automatischen Versand einrichten>>.

[#ereignisaktionen-einrichten]
=== Ereignisaktionen einrichten

Neben dem <<#automatischer-e-mail-versand, Verknüpfen von Ereignissen und Vorlagen>> hast du außerdem die Möglichkeit, Ereignisaktionen im Menü *Einrichtung » Aufträge » Ereignisse* einzurichten. Definiere ein Ereignis, setze einen oder mehrere Filter und lege Aktionen fest, die von deinem System automatisch im Ereignisfall ausgeführt werden.

Richte z.B. ein, dass der E-Mail-Versand eines Gutscheins ausgelöst wird, wenn eine Person eine bestimmte Anzahl an Aufträgen generiert hat oder wenn diese Person einer anderen Kundenklasse zugewiesen wurde. Weitere Informationen findest du auf der Handbuchseite xref:automatisierung:ereignisaktionen.adoc#[Ereignisaktionen].

[#e-mail-versand-an-mehrere-e-mail-adressen]
=== E-Mail-Versand an mehrere E-Mail-Adressen

Im Menü *Einrichtung » Aufträge » Ereignisse* kannst du eine xref:automatisierung:ereignisaktionen.adoc#[Ereignisaktion] einrichten, die bei Eintritt des von dir gewählten Ereignisses in deinem plentyShop eine E-Mail an deine Kund:innen und Mitarbeiter:innen versendet.

Füge in der Ereignisaktion die Aktion *Kunde > E-Mail versenden* hinzu und wähle dann dort die passende Vorlage sowie die Empfänger:innen, um die E-Mail bei Eintritt des gewählten Ereignisses zeitgleich an mehrere Empfänger:innen zu versenden.

Die folgenden Empfänger:innen stehen zur Verfügung:

* Kunde
* Lager
* Rechnungsadresse aus Auftrag
* Lieferadresse aus Auftrag
* Kontakt E-Mail geschäftlich
* Kontakt E-Mail privat
* Kontakt E-Mail PayPal
* verfügbare Eigner

Du kannst entweder die selbe Vorlage an alle Empfänger:innen senden oder jeweils eine separate Vorlage wählen.

[#variablen-emailbuilder]
== Verfügbare Variablen und twig expressions

In einigen der Widgets kannst du Variablen einfügen und dir auf diese Weise die Vorlagen erstellen, die du benötigst. Die Variablen werden dann in der E-Mail an deine Kund:innen durch den korrekten Inhalt ersetzt.

Die Tabellen im Kapitel <<#verfuegbare-variablen, Verfügbare Variablen>> enthalten neben den Variablen auch die dazugehörigen twig expressions. Twig expressions benötigst du für den Betreff deiner E-Mail und für das <<#intable-widget-code, Code-Widget>>, weil du dort keine Variablen verwenden kannst.

[#twig-einleitung]
=== Twig expressions für das Code-Widget und den Betreff

Im Kapitel <<#verfuegbare-variablen, Verfügbare Variablen>> findest du neben den Variablen auch die twig expressions, die du im Code-Widget und im Betreff einer Vorlage verwenden kannst.

[#twig-betreff]
==== Twig expression im Betreff

Wenn du eine twig expression im Betreff der Vorlage verwenden möchtest, muss diese von doppelt geschweiften Klammern umgeben sein.

*_Beispiel:_* Wenn du im Betreff deiner Vorlage den Versanddienstleister anzeigen möchtest, setzt du die entsprechende twig expression wie folgt in den <<#betreff-aendern, Betreff>> deiner Vorlage ein: `&#123;&#8288;&#123;order.formattedShipping.providerName&#125;&#8288;&#125;`.

Code-Beispiele für den Betreff findest du im Kapitel <<#code-beispiele-betreff, Code-Beispiele für den Betreff>>.

[#twig-code-widget]
==== Twig expression im Code-Widget

Wenn du im Code-Widget beispielsweise mit link:https://twig.symfony.com/doc/3.x/tags/if.html[if-Abfragen^] oder link:https://twig.symfony.com/doc/2.x/tags/for.html[for-Schleifen^] arbeitest, benötigst du in der if-Abfrage und in der for-Schleife selbst keine doppelt geschweiften Klammern zusätzlich, sondern nur im Fließtext. Allgemeine Informationen zu Twig findest du in der link:https://twig.symfony.com/doc/3.x/[Twig Documentation^].

Im Kapitel <<#code-beispiele-code-widget, Code-Beispiele für das Code-Widget>> findest du einige if-Abfragen und for-Schleifen, die du einfach in dein Code-Widget kopieren kannst.

[#verfuegbare-variablen]
=== Verfügbare Variablen

Die verfügbaren Variablen für den EmailBuilder sind in die folgenden Kategorien bzw. Unterkategorien gruppiert. Klicke auf einen Eintrag in der Liste, um direkt zu dem Bereich zu gelangen, in dem die Variablen sowie die dazugehörigen twig expressions für die jeweilige Kategorie bzw. Unterkategorie aufgelistet sind.

* <<#variablen-auftrag, Auftrag>>

** <<#variablen-auftrag, Auftragsvariablen allgemein>>
** <<#variablen-auftrag-lieferadresse, Lieferadresse>>
** <<#variablen-auftrag-rechnungsadresse, Rechnungsadresse>>
** <<#variablen-auftrag-auftragspositionen, Auftragspositionen (nur für Artikellisten-Widget)>>
** <<#variablen-auftrag-versand, Versand>>
** <<#variablen-auftrag-abonnement, Abonnement>>

* <<#variablen-kontakt-allgemein, Kontakt>>

** <<#variablen-kontakt-allgemein, Kontaktvariablen allgemein>>
** <<#variablen-kontakt-lieferadresse, Lieferadresse>>
** <<#variablen-kontakt-rechnungsadresse, Rechnungsadresse>>
** <<#variablen-kontakt-optionen, Optionen>>

* <<#variablen-global, Global>>

* <<#variablen-newsletter, Newsletter>>

* <<#variablen-ticket, Ticket>>

* <<#variablen-messenger, Messenger>>

[#variablen-auftrag]
==== Variablen: Auftrag allgemein

[[table-variables-order-order]]
.Variablen in der Kategorie *Auftrag*
[cols="2,4,3,2"]
|====
|Name der Variable |Erläuterung |Twig expression |Name der alten Variablefootnote:1[Die Informationen in dieser Spalte sind für dich nur relevant, wenn du bereits E-Mail-Vorlagen im Menü *Einrichtung » Mandant » Mandant wählen » E-Mail » Vorlagen* erstellt hast und wissen möchtest, wie die alte Variable hieß. Hinweis: Diese Spalte ist noch nicht vollständig befüllt. Inhalte werden weiterhin ergänzt.]

| `Zugriffsschlüssel des Auftrags`
|Hierbei handelt es sich um den Hash, um den Auftrag eindeutig zu identifizieren.
| `order.access_key`
|$OrderAccessKey

| `Barcode-ID`
|
| `order.formattedGeneral.barcodeOrderID`
| $BarcodeOrderID

| `Plenty ID`
|Die ID wird vom System vergeben und kann nicht geändert werden. Du findest die ID im Menü *Einrichtung » Mandant » [Mandant wählen] » Einstellungen*.
| `order.plentyId`
|

| `Gutscheinwert`
|Wert des xref:auftraege:gutscheine.adoc#[Gutscheins].
| `order.formattedGeneral.couponValue`
| $CouponValue

| `Währungscode`
|Währungscode, z.B. *EUR* oder *USD*.
| `order.formattedSubtotals.currencyCode`
| $Currency


| `Währungszeichen`
|Währungssymbol, z.B. *€* oder *$*.
| `order.formattedSubtotals.currencySymbol`
| $Currency

| `Kundenzeichen`
|
| `order.formattedProperties.customerSign`
| $CustomerSign

| `Kundenwunsch`
|Kund:innen können bei der Bestellung über den Webshop einen Wunsch angeben. Dieser Wunsch wird als Auftragsnotiz in den Auftragsdaten gespeichert.
| `order.formattedComments.customerSpecialWishes`
| $CustomerSpecialWishes

| `DHL Retoure Online QR-Code URL`
|Sendet deinen Kund:innen einen QR-Code für xref:fulfillment:plugin-dhl-retoure-online.adoc#[DHL Retoure Online]. Der QR-Code wird in der E-Mail an deine Kund:innen als URL ausgegeben. Nach einem Klick auf die URL erscheint dann in einem separaten Fenster der QR-Code. +
Wenn deine Kund:innen einen Artikel zurücksenden möchten, müssen sie dem Personal in der Postfiliale den QR-Code auf ihrem Smartphone vorzeigen. Das Personal druckt dann das Retourenlabel und bringt es auf dem Paket an. Deine Kund:innen benötigen also keinen Drucker mehr und du musst das Retourenlabel nicht als PDF-Anhang in der E-Mail versenden. +
| `order.formattedGeneral.DHLRetoureOnlineQRCodeURLNew \| raw`
| $DHLRetoureOnlineQRCodeURL

| `DHL Retoure Online QR-Code Bild`
|Sendet deinen Kund:innen einen QR-Code für xref:fulfillment:plugin-dhl-retoure-online.adoc#[DHL Retoure Online]. Der QR-Code wird in der E-Mail an deine Kund:innen als Bild ausgegeben. +
Wenn deine Kund:innen einen Artikel zurücksenden möchten, müssen sie dem Personal in der Postfiliale den QR-Code auf ihrem Smartphone vorzeigen. Das Personal druckt dann das Retourenlabel und bringt es auf dem Paket an. Deine Kund:innen benötigen also keinen Drucker mehr und du musst das Retourenlabel nicht als PDF-Anhang in der E-Mail versenden. +
| `order.formattedGeneral.DHLRetoureOnlineQRCodeImage \| raw`
| -

| `Datum und Uhrzeit des Auftragseingangs`
|Datum und Uhrzeit des Auftragseingangs wie im Auftrag gespeichert.
| `order.formattedDates.createdOnDateAndTime`
|

| `Datum des Auftragseingangs`
|Datum des Auftragseingangs wie im Auftrag gespeichert.
| `order.formattedDates.createdOn`
| $OrderDate

| `Datum des Zahlungseingangs`
|Datum und Uhrzeit des Zahlungseingangs wie im Auftrag gespeichert.
| `order.formattedDates.paidOn`
| $PaymentDate

| `Lieferadresse USt-IdNr.`
|Umsatzsteuer-Identifikationsnummer aus der Lieferadresse, wie im Auftrag gespeichert.
| `order.formattedAddresses.deliveryAddress.formattedOptions.VATNumber`
| $OrderDeliveryAddressTaxId

| `Externe Auftrags-ID`
|
| `order.formattedProperties.externalOrderId`
| $ExternalOrderID

| `Markierung`
|Markierung, die im Auftrag gewählt wurde.
| `order.formattedProperties.flag`
| $OrderFlag

| `Rechnungsadresse USt-IdNr.`
|Umsatzsteuer-Identifikationsnummer aus der Rechnungsadresse, wie im Auftrag gespeichert.
| `order.formattedAddresses.invoiceAddress.formattedOptions.VATNumber`
| $OrderBillingAddressTaxId

| `Rechnungsdatum`
|
| `order.formattedDocuments.invoiceDate`
| -

| `Rechnungsnummer-ID`
|
| `order.formattedDocuments.invoice`
| -

| `Gesamtrechnungsbetrag netto`
|
| `order.formattedGeneral.invoiceTotalNet`
| $InvoiceTotalNet

| `Gesamtbetrag des Auftrags netto`
|
| `order.formattedGeneral.totalNet`
| $OrderTotalNet

| `Anzahl der Pakete`
|Gibt die Anzahl der im Auftrag enthaltenen Pakete aus.
| `order.package`
| 

| `Offener Betrag`
|
| `order.formattedGeneral.openAmount`
| $OpenAmount

| `Auftrags-ID`
|
| `order.id`
| $OrderID

| `Auftragseigner`
|Gibt den im Auftrag gespeicherten Eigner aus.
| `order.formattedGeneral.ownerName`
| -

| `Auftragstyp-ID`
|ID des Auftragstyps, z.B. `1` für Auftrag, `4` für Gutschrift und `6` für Reparaturauftrag. +
*_Hinweis:_* Die komplette Liste der Auftragstypen und deren IDs findest du auf dieser xref:daten:interne-IDs.adoc#80[Handbuchseite].
| `order.typeId`
| -

| `Name des Auftragstyps`
|Name des Auftragstyps, z.B. `Auftrag`, `Gutschrift` und `Reparaturauftrag`. +
*_Hinweis:_* Die komplette Liste der Auftragstypen und deren IDs findest du auf dieser xref:daten:interne-IDs.adoc#80[Handbuchseite].
| `order.formattedGeneral.orderTypeName`
| $OrderType

| `Auftrag Lager-ID`
|
| `order.formattedProperties.warehouse`
| $WarehouseID

| `ID des Hauptauftrags`
|ID des obersten Vorgängerauftrags. Dies ist in der Regel ein normaler Auftrag. +
*_Beispiel:_* Bei einer Gutschrift G1 aus einer Retoure R1 aus einem Auftrag A1 gibt die Variable `ID des Elternauftrags` die ID von R1 und `ID des Hauptauftrags` die ID von A1 aus.
| `order.formattedOriginOrder.originOrderId`
| $OriginOrderID

| `Überbezahlter Betrag`
|
| `order.formattedGeneral.overpaidAmount`
| $OverpaidAmount

| `Bezahlter Betrag`
|
| `order.formattedGeneral.paidAmount`
| $PaidAmount

| `ID des Elternauftrags`
|ID des direkten Vorgängerauftrags +
*_Beispiel:_* Bei einer Gutschrift kann es die ID der Retoure oder des Auftrags sein, aus dem die Gutschrift erzeugt wurde.
| `order.formattedOriginOrder.referenceOrderId`
| $ParentOrderID

| `PayPal link`
| Gibt den Link zur PayPal-Bezahlseite aus.
| `order.formattedGeneral.paypalVariables.link \| raw`
| -

| `PayPal link Button`
|Gibt das Bild mit integriertem Link zur PayPal-Bezahlseite aus.
| `order.formattedGeneral.paypalVariables.linkButton \| raw`
| -

| `Zahlungsziel`
|
| `order.formattedDates.paymentDueDate`
| 

| `Zahlungsart (Backend)`
|
| `order.formattedGeneral.methodOfPaymentName`
| $MethodOfPaymentName

| `Zahlungsart (Frontend)`
|
| `order.formattedGeneral.methodOfPaymentNameFrontend`
| -

| `Zahlungsart-ID`
|Die ID wird vom System vergeben. Die IDs der xref:payment:zahlungsarten-verwalten.adoc#65[Zahlungsarten] sind im Menü *Einrichtung » Aufträge » Zahlung » Zahlungsarten* aufgeführt.
| `order.formattedProperties.paymentMethod`
| $MethodOfPaymentID

| `Herkunft`
|Name der xref:auftraege:auftragsherkunft.adoc#[Auftragsherkunft] wie im Menü *Einrichtung » Aufträge » Auftragsherkunft* gespeichert.
| `order.formattedReferrer.name`
| $ReferrerName

| `Herkunfts-ID`
|ID der xref:auftraege:auftragsherkunft.adoc#[Auftragsherkunft] wie im Menü *Einrichtung » Aufträge » Auftragsherkunft* gespeichert.
| `order.formattedReferrer.id`
| $ReferrerID

| `Nachbestellungs-ID`
|ID der xref:warenwirtschaft:nachbestellungen-verwalten.adoc#[Nachbestellung].
| `order.formattedReorder.id`
| $ReorderID

| `Verkäuferkonto`
|
| `order.formattedProperties.sellerAccount`
|

| `Status-ID`
|ID des xref:auftraege:order-statuses.adoc#1200[Auftragsstatus] wie im Menü *Einrichtung » Aufträge » Auftragsstatus* gespeichert.
| `order.statusId`
| $OrderStatusID

| `Status`
|Name des Auftragsstatus wie im Menü *Einrichtung » Aufträge » Auftragsstatus* gespeichert.
| `order.statusName`
| $OrderStatusLabel

| `Gesamtrechnungsbetrag`
|
| `order.formattedGeneral.invoiceTotal`
| $InvoiceTotal

| `Gesamtbetrag der Mehrwertsteuer`
|
| `order.formattedGeneral.totalVat`
| $TotalVAT

| `Wert des Artikels`
|
| `order.formattedGeneral.valueOfItems`
| $ValueOfItems

| `eBay-Zahlungs-ID`
|
| `order.formattedProperties.ebayUniquePaymentID`
| $EbayUniquePaymentID

|====

[#variablen-auftrag-lieferadresse]
==== Variablen: Auftrag / Lieferadresse

[[table-variables-order-delivery-address]]
.Variablen in der Unterkategorie *Auftrag / Lieferadresse*
[cols="1,3,2"]
|====
|Name der Variable |Twig expression |Name der alten Variablefootnote:1[]

| `Lieferadresse Adresszusatz`
| `order.formattedAddresses.deliveryAddress.address3`
| $DeliveryAddressAdditionalAddress

| `Lieferadresse Firmenname`
| `order.formattedAddresses.deliveryAddress.name1`
| $DeliveryAddressCompany

| `Lieferadresse Kontaktperson`
| `order.formattedAddresses.deliveryAddress.formattedOptions.contactPerson`
| $DeliveryAddressContactPerson

| `Lieferadresse Land`
| `order.formattedAddresses.deliveryAddress.country.name`
| $CustomerCountry

| `Lieferadresse Länder-ID`
| `order.formattedAddresses.deliveryAddress.country.id`
| $CustomerCountryID

| `Lieferadresse Länder-ISO-Code 2`
| `order.formattedAddresses.deliveryAddress.country.isoCode2`
| $CustomerCountryIsoCode

| `Lieferadresse Länder-ISO-Code 3`
| `order.formattedAddresses.deliveryAddress.country.isoCode3`
| $CustomerCountryIsoCode

| `Lieferadresse Vorname`
| `order.formattedAddresses.deliveryAddress.name2`
| $DeliveryAddressFirstName

| `Lieferadresse Vorname und Nachname`
| `order.formattedAddresses.deliveryAddress.name2 ~ ' ' ~ order.formattedAddresses.deliveryAddress.name3`
| $DeliveryAddressFullName

| `Lieferadresse Hausnummer`
| `order.formattedAddresses.deliveryAddress.address2`
|

| `Lieferadresse Nachname`
| `order.formattedAddresses.deliveryAddress.name3`
| $DeliveryAddressLastName

| `Lieferadresse Telefon`
| `order.formattedAddresses.deliveryAddress.formattedOptions.telephone`
|

| `Lieferadresse Postleitzahl`
| `order.formattedAddresses.deliveryAddress.postalCode`
| $DeliveryAddressZip

| `Lieferadresse Postleitzahl und Ort`
| `order.formattedAddresses.deliveryAddress.postalCode ~ ' ' ~ order.formattedAddresses.deliveryAddress.town`
|

| `Lieferadresse Bundesland`
| `order.formattedAddresses.deliveryAddress.state.name`
| $DeliveryAddressState

| `Lieferadresse Straße`
| `order.formattedAddresses.deliveryAddress.address1`
| $DeliveryAddressStreet

| `Lieferadresse Ort`
| `order.formattedAddresses.deliveryAddress.town`
| $DeliveryAddressCity

|====

[#variablen-auftrag-rechnungsadresse]
==== Variablen: Auftrag / Rechnungsadresse

[[table-variables-order-invoice-address]]
.Variablen in der Unterkategorie *Auftrag / Rechnungsadresse*
[cols="1,3,2"]
|====
|Name der Variable |Twig expression |Name der alten Variablefootnote:1[]

| `Rechnungsadresse Adresszusatz`
| `order.formattedAddresses.invoiceAddress.address3`
| $BillingAddressAdditionalAddress

| `Rechnungsadresse Firmenname`
| `order.formattedAddresses.invoiceAddress.name1`
| $BillingAddressCompany

| `Rechnungsadresse Kontaktperson`
| `order.formattedAddresses.invoiceAddress.formattedOptions.contactPerson`
| $BillingAddressContactPerson

| `Rechnungsadresse Land`
| `order.formattedAddresses.invoiceAddress.country.name`
|

| `Rechnungsadresse Länder-ID`
| `order.formattedAddresses.invoiceAddress.country.id`
|

| `Rechnungsadresse Länder-ISO-Code 2`
| `order.formattedAddresses.invoiceAddress.country.isoCode2`
| $CustomerCountryIsoCode

| `Rechnungsadresse Länder-ISO-Code 3`
| `order.formattedAddresses.invoiceAddress.country.isoCode3`
| $CustomerCountryIsoCode

| `Rechnungsadresse Vorname`
| `order.formattedAddresses.invoiceAddress.name2`
| $BillingAddressFirstName

| `Rechnungsadresse Vorname und Nachname`
| `order.formattedAddresses.invoiceAddress.name2 ~ ' ' ~ order.formattedAddresses.invoiceAddress.name3`
| $BillingAddressFullName

| `Rechnungsadresse Hausnummer`
| `order.formattedAddresses.invoiceAddress.address2`
|

| `Rechnungsadresse Nachname`
| `order.formattedAddresses.invoiceAddress.name3`
| $BillingAddressLastName

| `Rechnungsadresse Telefon`
| `order.formattedAddresses.invoiceAddress.formattedOptions.telephone`
|

| `Rechnungsadresse Postleitzahl`
| `order.formattedAddresses.invoiceAddress.postalCode`
|

| `Rechnungsadresse Postleitzahl und Ort`
| `order.formattedAddresses.invoiceAddress.postalCode ~ ' ' ~ order.formattedAddresses.invoiceAddress.town`
|

| `Rechnungsadresse Bundesland`
| `order.formattedAddresses.invoiceAddress.state.name`
| $CustomerState

| `Rechnungsadresse Straße`
| `order.formattedAddresses.invoiceAddress.address1`
|

| `Rechnungsadresse Ort`
| `order.formattedAddresses.invoiceAddress.town`
|

|====


[#variablen-auftrag-auftragspositionen]
==== Variablen: Auftrag / Auftragspositionen (nur für Artikellisten-Widget)

[#box-verwendung-variablen-warenbestand]
[IMPORTANT]
.Wichtig: Verwendung von Variablen zur Verfügbarkeit des Warenbestands
====
Beachte die folgende Erläuterung zur Verwendung von Variablen zur Verfügbarkeit des Warenbestands:

Die Variable darf nicht eingesetzt werden, wenn der Warenbestand unter einen Wert sinkt, der zur Veränderung der Lieferzeit führt. Die Variable berücksichtigt den Wert nach der Bestellung und _nicht_ im Moment der Bestellauslösung im Warenkorb.

Diese Aussage gilt für die folgenden Variablen:

* Verfügbarkeits-ID
* Verfügbarkeits-ID physischer Warenbestand
* Verfügbarkeitstext
* Verfügbarkeitstext physischer Warenbestand
====

[[table-variables-order-order-items]]
.Variablen in der Unterkategorie *Auftrag / Auftragspositionen (nur für Artikellisten-Widget)*
[cols="2,4,3,2"]
|====
|Name der Variable |Erläuterung |Twig expression |Name der alten Variablefootnote:1[]

| `ASIN`
|Amazon Standard Ident Number (ASIN) des Artikels
| `orderItem.formattedBarcodes.ASIN`
| $ItemASIN

| `Attributwerte`
| xref:artikel:attribute.adoc#[Attributwerte] wie im Menü *Einrichtung » Artikel » Attribute* gespeichert.
| `orderItem.attributeValues`
| $VariantName

| `Verfügbarkeits-ID`
|ID der xref:artikel:verfuegbarkeit.adoc#[Artikelverfügbarkeit] des Netttowarenbestands wie im Menü *Einrichtung » Artikel » Verfügbarkeit* gespeichert. Die ID wird automatisch vergeben und kann nicht geändert werden. +
*_Wichtig:_* Beachte die Erläuterung in der Box <<#box-verwendung-variablen-warenbestand, Verwendung von Variablen zur Verfügbarkeit des Warenbestands>> oberhalb dieser Tabelle.
| `orderItem.formattedAvailability.availabilityId`
| $ItemAvailabilityID

| `Verfügbarkeits-ID physischer Warenbestand`
|ID der Artikelverfügbarkeit des physischen Warenbestands +
*_Wichtig:_* Beachte die Erläuterung in der Box <<#box-verwendung-variablen-warenbestand, Verwendung von Variablen zur Verfügbarkeit des Warenbestands>> oberhalb dieser Tabelle.
| `orderItem.formattedAvailability.availabilityPhysicalStockId`
| $ItemAvailabilityPhysicalStockID

| `Verfügbarkeitstext`
|Name der Artikelverfügbarkeit des Nettowarenbestands +
*_Wichtig:_* Beachte die Erläuterung in der Box <<#box-verwendung-variablen-warenbestand, Verwendung von Variablen zur Verfügbarkeit des Warenbestands>> oberhalb dieser Tabelle.
| `orderItem.formattedAvailability.availabilityName`
| $ItemAvailabilityLabel

| `Verfügbarkeitstext physischer Warenbestand`
|Name der Artikelverfügbarkeit des physischen Warenbestands +
*_Wichtig:_* Beachte die Erläuterung in der Box <<#box-verwendung-variablen-warenbestand, Verwendung von Variablen zur Verfügbarkeit des Warenbestands>> oberhalb dieser Tabelle.
| `orderItem.formattedAvailability.availabilityPhysicalStockName`
| $ItemAvailabilityPhysicalStockLabel

| `Codes eines Gutscheins`
|
| `orderItem.formattedVoucherCodes`
| $VoucherCodes

| `Inhalt`
|
| `orderItem.formattedUnit.unitContent`
| $UnitString

| `Rabatt pro Auftragsposition`
|
| `orderItem.formattedAmounts.discount`
| $RebateAmount

| `Externe Artikel-ID`
|
| `orderItem.variation.item.external_article_id`
| $ExternalItemID

| `Externe Token-ID`
|
| `orderItem.formattedExternalTokenId`
| $TransactionID

| `Externe Varianten-ID`
|
| `orderItem.variation.externalId`
| $ExternalVariationID

| `Freitextfeld 1`
| xref:artikel:felder.adoc#[Freitextfelder] für die Artikel wie im Menü *Einrichtung » Artikel » Freitextfelder* gespeichert. +
*_Beispiel:_* `Freitextfeld 3` gibt den Text aus, der in *Feld 3* gespeichert ist.
| `orderItem.variation.item.free1`
| $Free

| `Freitextfeld 2`
|
| `orderItem.variation.item.free2`
| $Free

| `Freitextfeld 3`
|
| `orderItem.variation.item.free3`
| $Free

| `Freitextfeld 4`
|
| `orderItem.variation.item.free4`
| $Free

| `Freitextfeld 5`
|
| `orderItem.variation.item.free5`
| $Free

| `Freitextfeld 6`
|
| `orderItem.variation.item.free6`
| $Free

| `Freitextfeld 7`
|
| `orderItem.variation.item.free7`
| $Free

| `Freitextfeld 8`
|
| `orderItem.variation.item.free8`
| $Free

| `Freitextfeld 9`
|
| `orderItem.variation.item.free9`
| $Free

| `Freitextfeld 10`
|
| `orderItem.variation.item.free10`
| $Free

| `Freitextfeld 11`
|
| `orderItem.variation.item.free11`
| $Free

| `Freitextfeld 12`
|
| `orderItem.variation.item.free12`
| $Free

| `Freitextfeld 13`
|
| `orderItem.variation.item.free13`
| $Free

| `Freitextfeld 14`
|
| `orderItem.variation.item.free14`
| $Free

| `Freitextfeld 15`
|
| `orderItem.variation.item.free15`
| $Free

| `Freitextfeld 16`
|
| `orderItem.variation.item.free16`
| $Free

| `Freitextfeld 17`
|
| `orderItem.variation.item.free17`
| $Free

| `Freitextfeld 18`
|
| `orderItem.variation.item.free18`
| $Free

| `Freitextfeld 19`
|
| `orderItem.variation.item.free19`
| $Free

| `Freitextfeld 20`
|
| `orderItem.variation.item.free20`
| $Free

| `GTIN`
|Global Trade Item Number (GTIN) des Artikels
| `orderItem.formattedBarcodes.GTIN`
| $ItemEAN

| `GTIN-Bild`
|Gibt den Barcode basierend auf dem GTIN-Code des Artikels als Bild aus. GTIN = Global Trade Item Number.
| `orderItem.formattedBarcodes.GTINImage`
| - 

| `ISBN`
|ISBN-Code des Artikels
| `orderItem.formattedBarcodes.ISBN`
| $ItemISBN

| `Artikel-ID`
|ID des xref:artikel:artikelsuche.adoc#580[Artikels]. Die ID wird automatisch vergeben und kann nicht geändert werden.
| `orderItem.variation.itemId`
| $ItemID

| `URL zum Artikel`
|Gibt die URL zum Artikel im Webshop aus.
| `orderItem.formattedLink`
| 

| `Artikelname`
|Name des des xref:artikel:artikelsuche.adoc#580[Artikels].
| `orderItem.orderItemName`
| $ItemName

| `Artikelnummer`
|
| `orderItem.variation.item.ArtNo`
| $ItemNumber

| `Wert der Bestelleigenschaft`
|
| `orderItem.formattedOrderProperty.value`
| $OrderItemOrderPropertyValue

| `Bruttopreis`
|Bruttopreis des Artikels.
| `orderItem.formattedAmounts.grossPrice`
| $ItemPrice

| `Artikeleigenschaften`
|
| `orderItem.formattedProperties.all`
| $OrderProperties

| `Artikelmenge`
|
| `orderItem.quantity`
| $ItemQuantity

| `Artikeltyp`
|Gibt den Artikeltypen aus, der im Artikel im Tab *Global* gespeichert ist. Mögliche Werte: Standard, Set, Multipack.
| `orderItem.formattedStockType`
|

| `Herstellername`
|Name des xref:artikel:hersteller.adoc#[Herstellers.]
| `orderItem.variation.item.producer`
| $ItemProducerName

| `Modell`
|Modellbezeichnung des Artikels
| `orderItem.variation.model`
| $ItemModel

| `Nettopreis`
|Nettopreis des Artikels.
| `orderItem.formattedAmounts.netPrice`
| $ItemPriceNet

| `Herkunft`
|
| `orderItem.formattedReferrer.referrerName`
| $ItemReferrer

| `Erscheinungsdatum`
|
| `orderItem.variation.releasedAt`
| -

| `Retourenkommentar`
|
| `orderItem.formattedReturn.comment`
| $ReturnItemComment

| `Status-ID des retournierten Artikels`
|
| `orderItem.formattedReturn.statusId`
| $ReturnItemStatusID

| `Statusname des retournierten Artikels`
|
| `orderItem.formattedReturn.statusLabel`
| $ReturnItemStatusLabel

| `ID des Retourengrunds`
|ID des xref:auftraege:order-type-return.adoc#edit-return-reason[Retourengrunds] wie im Menü *Einrichtung » Aufträge » Auftragstypen » Retoure* gespeichert.
| `orderItem.formattedReturn.reasonId`
| $ReturnReasonID

| `Retourengrund`
|Name des xref:auftraege:order-type-return.adoc#edit-return-reason[Retourengrunds] wie im Menü *Einrichtung » Aufträge » Auftragstypen » Retoure* gespeichert.
| `orderItem.formattedReturn.reasonLabel`
| $ReturnReasonLabel

| `Wert der Retoure in Prozent`
|
| `orderItem.formattedReturn.percentage`
| $ReturnItemValuePercentage

| `Zolltarifnummer`
|
| `orderItem.variation.customsTariffNumber`
|

| `Gesamtpreis (Einzelpreis x Menge)`
|
| `orderItem.formattedAmounts.totalPrice`
| -

| `URL zum Variantenbild`
|Gibt die URL zum Variantenbild aus.
| `orderItem.formattedImageUrl`
| $ItemImageURL

| `Einheit`
|
| `orderItem.formattedUnit.unitName`
| -

| `Grundpreis`
|
| `orderItem.formattedUnit.unitPrice`
|-

| `Mehrwertsteuersatz`
|
| `orderItem.vatRate`
| $ItemVatRate

| `Varianten-ID`
|
| `orderItem.variation.id`
| $VariationId

| `Variantenname`
|
| `orderItem.variation.name`
| $VariationName

| `Variantennummer`
|
| `orderItem.variation.number`
| $VariationNumber

| `Lager-ID`
|ID des xref:warenwirtschaft:lager-einrichten.adoc#[Lagers] wie im Menü *Einrichtung » Waren » Lager* gespeichert.
| `orderItem.warehouseId`
| $ItemWarehouseID

|====

////
[TIP]
.Weitere twig expressions für das Artikellisten-Widget
====
Du kannst zusätzlich die im Folgenden aufgelisteten twig expressions im Artikellisten-Widget verwenden. Beachte, dass diese Werte nur als twig expression verfügbar sind und deshalb _nicht_ in der Liste der verfügbaren Variablen für das Artikellisten-Widget im EmailBuilder gesucht werden können.

* &#123;&#8288;&#123;order.formattedSubtotals.totalDiscountGross&#125;&#8288;&#125; 
// ** gibt den Bruttogesamtbetrag des Rabatts aus

* &#123;&#8288;&#123;order.formattedSubtotals.totalDiscountNet&#125;&#8288;&#125;
// ** gibt den Nettogesamtbetrag des Rabatts aus

* &#123;&#8288;&#123;order.formattedSubtotals.subtotalPriceGross&#125;&#8288;&#125;
// ** gibt den Bruttopreis aus

* &#123;&#8288;&#123;order.formattedSubtotals.subtotalPriceNet&#125;&#8288;&#125;
// ** gibt den Nettopreis aus

* &#123;&#8288;&#123;order.formattedSubtotals.shippingCostsGross&#125;&#8288;&#125;
// ** gibt die Bruttoversandkosten aus

* &#123;&#8288;&#123;order.formattedSubtotals.shippingCostsNet&#125;&#8288;&#125;
// ** gibt die Nettoversandkosten aus

* &#123;&#8288;&#123;order.formattedSubtotals.vats&#125;&#8288;&#125;
// ** gibt die Mehrwersteuersätze aus

====
////

[#variablen-auftrag-versand]
==== Variablen: Auftrag / Versand

[[table-variables-order-shipping]]
.Variablen in der Unterkategorie *Auftrag / Versand*
[cols="2,4,3,2"]
|====
|Name der Variable |Erläuterung |Twig expression |Name der alten Variablefootnote:1[]

| `Lieferschein-ID`
|ID des xref:auftraege:lieferscheine-erzeugen.adoc#[Lieferscheins].
| `order.formattedDocuments.deliveryNote`
| -

| `Voraussichtliches Lieferdatum`
|
| `order.formattedDates.estimatedDeliveryDate`
| $OrderEstimatedDeliveryDate

| `Voraussichtliches Versanddatum`
|
| `order.formattedDates.estimatedShippingDate`
| $OrderEstimatedShipmentDate

| `Paketnummernliste`
|Paketnummern bzw. Tracking-Nummern werden nach erfolgreicher Auftragsanmeldung beim Versanddienstleister im Auftrag gespeichert.
| `order.formattedShipping.packageNumberList`
|$PackageCount

| `Paketgewicht`
|Paketgewicht und Einheit wie im Menü *Aufträge » Versand-Center* im Bereich *Versandpakete* gespeichert.
| `order.formattedShipping.packageWeight`
| -

| `Mögliches Lieferdatum`
|
| `order.formattedDates.earliestDeliveryDate`
| $OrderEarliestDeliveryDate

| `Nachbestellung Lieferdatum`
|
| `order.formattedReorder.estimatedDeliveryDate`
| $ReorderDeliveryDate

| `Datum des Retoureneingangs`
|
| `order.formattedDates.returnDate`
| $OrderReturnDate

| `Retourenpaketnummer`
|
| `order.returns_code`
| $ReturnsCode

| `Versandkosten (Brutto)`
|
| `order.formattedSubtotals.shippingCostsGross`
| $ShippingCosts

| `Versandkosten (Netto)`
|
| `order.formattedSubtotals.shippingCostsNet`
| -

| `Warenwert (Netto)`
|
| `order.formattedSubtotals.subtotalPriceNet`
| -

| `Warenwert (Brutto)`
|
| `order.formattedSubtotals.subtotalPriceGross`
| -

| `Versandprofil`
| Name des xref:fulfillment:versand-vorbereiten.adoc#1000[Versandprofils] wie im Menü *Einrichtung » Aufträge » Versand » Optionen* im Tab *Versandprofile* gespeichert.
| `order.formattedShipping.profileName`
| $ShippingProfileName

| `Versandprofil-ID`
|Wird automatisch vom System vergeben. Die ID des xref:fulfillment:versand-vorbereiten.adoc#1000[Versandprofils] findest du im Menü *Einrichtung » Aufträge » Versand » Optionen* im Tab *Versandprofile*.
| `order.formattedShipping.profileId`
| $ShippingProfileID

| `Versanddienstleister`
|Name des xref:fulfillment:versand-vorbereiten.adoc#800[Versanddienstleisters] wie im Menü *Einrichtung » Aufträge » Versand » Optionen* im Tab *Versanddienstleister* gespeichert.
| `order.formattedShipping.providerName`
| $ShippingServiceProviderName

| `Versanddienstleister-ID`
|Wird automatisch vom System vergeben. Die ID des xref:fulfillment:versand-vorbereiten.adoc#800[Versanddienstleisters] findest du im Menü *Einrichtung » Aufträge » Versand » Optionen* im Tab *Versanddienstleister*.
| `order.formattedShipping.providerId`
| $ShippingServiceProviderID

| `Tracking-URL`
|Gibt den Link zur Sendungsverfolgungsseite des Versanddienstleisters aus. Die xref:fulfillment:versand-vorbereiten.adoc#840[Tracking-URL] des Versanddienstleisters wird im Menü *Einrichtung » Aufträge » Versand » Optionen* im Tab *Versanddienstleister* gespeichert. +
*_Hinweis:_* Schau auch in unser xref:crm:praxisbeispiel-tracking-url-senden.adoc#[Praxisbeispiel zu diesem Thema]. Dort wird beschrieben, welche Einstellungen du vornehmen musst, um die Tracking-URL an deine Kund:innen zu senden.
| `order.formattedShipping.trackingURL \| raw`
| $TrackingURL

|====

[#variablen-auftrag-abonnement]
==== Variablen: Auftrag / Abonnement

[[table-variables-order-subscription]]
.Variablen in der Unterkategorie *Auftrag / Abonnement*
[cols="2,4,3,2"]
|====
|Name der Variable |Erläuterung |Twig expression |Name der alten Variablefootnote:1[]

| `Enddatum des Abonnements`
|Ende des Abonnements.
| `order.formattedSubscription.endDate`
| $SchedulerEndDate

| `Abonnement-ID`
|ID des Abonnements. Wird automatisch vom System vergeben und kann _nicht_ geändert werden.
| `order.formattedSubscription.id`
| $SchedulerID

| `Abonnementintervall`
|Intervall des Abonnements wie im Menü *Einrichtung » Aufträge » Abonnement* festgelegt. Das Intervall legt fest, in welchen Zeitabständen Artikel an Kund:innen versendet werden. + 
Mögliche Werte: *1 Monat*, *3 Monate*, *6 Monate*, *12 Monate*.
| `order.formattedSubscription.interval`
| $SchedulerInterval

| `Abonnement: Anzahl der Ausführungen`
|Anzahl der Aufträge, die basierend auf einem Abonnement, angelegt wurde. +
*_Beispiel:_* Wenn das Abonnement im Mai 2021 mit einem Intervall von 3 Monaten gestartet hat, wurden bis Mai 2022 4 Aufträge angelegt. In diesem Fall würde für diese Variable der Wert `4` in der E-Mail-Vorlage ausgegeben werden.
| `order.formattedSubscription.numberOfExecutions`
| $SchedulerExecutionCount

| `Startdatum des Abonnements`
|Beginn des Abonnements.
| `order.formattedSubscription.startDate`
| $SchedulerStartDate

| `Gesamtbetrag des Abonnements`
|
| `order.formattedSubscription.totalAmount`
| $SchedulerTotalAmount

|====

[#variablen-kontakt-allgemein]
==== Variablen: Kontakt allgemein

[[table-variables-order-contact]]
.Variablen in der Kategorie *Kontakt*
[cols="2,4,3,2"]
|====
|Name der Variable |Erläuterung |Twig expression |Name der alten Variablefootnote:1[]

| `Kontoinhaber (Kontakt)`
| xref:crm:kontakt-bearbeiten.adoc#bankdaten[Kontoinhaber:in] wie im Kontaktdatensatz gespeichert.
| `contact.formattedBanks.accountOwner`
|

| `BIC des Kontakts`
| xref:crm:kontakt-bearbeiten.adoc#bankdaten[BIC] wie im Kontaktdatensatz gespeichert.
| `contact.formattedBanks.bic`
| $CustomerBIC

| `Bankname des Kontakts`
| xref:crm:kontakt-bearbeiten.adoc#bankdaten[Bankname] wie im Kontaktdatensatz gespeichert.
| `contact.formattedBanks.bankName`
| $CustomerBankName

| `Klasse`
| Kundenklasse, die dem Kontakt zugeordnet ist. xref:crm:vorbereitende-einstellungen.adoc#kundenklasse-erstellen[Klassen] erstellst du im Menü *Einrichtung » CRM » Klassen*.
| `contact.formattedClass.name`
| $CustomerClass

| `Firmenname`
|Name der xref:crm:kontakt-bearbeiten.adoc#firma[Firma].
| `contact.formattedAccounts.companyName`
| $CustomerCompany

| `Kontakt-ID`
|ID des xref:crm:kontakt-bearbeiten.adoc#[Kontakts]. Die ID wird automatisch vergeben und kann nicht geändert werden.
| `contact.id`
| $CustomerID

| `Vorname`
|
| `contact.firstName`
| $CustomerFirstName

| `Vorname und Nachname des Systembenutzers`
|Vorname und Nachname des Systembenutzers, der als xref:crm:kontakt-bearbeiten.adoc#kontaktdetails[Eigner] am Kontaktdatensatz gespeichert ist.
| `contact.formattedUser.realName`
|

| `Vollständiger Name`
|
| `contact.fullName`
| $CustomerFullName

| `Geschlecht`
|Anzeige, wenn männlich: *male* +
Anzeige, wenn weiblich: *female* +
Anzeige, wenn divers: leere Option
| `contact.gender is same as ('diverse') ? '' : contact.gender`
|

| `IBAN des Kontakts`
|IBAN wie im Kontaktdatensatz gespeichert.
| `contact.formattedBanks.iban`
| $CustomerIBAN

| `Sprache`
|Sprache wie im Kontaktdatensatz gespeichert. Wenn du eine E-Mail-Vorlage in der gewählten Sprache erstellt hast, werden E-Mail-Vorlagen in dieser Sprache an den Kontakt versendet.
| `contact.lang`
| $CustomerLang

| `Nachname`
|
| `contact.lastName`
| $CustomerLastName

| `Newsletter-Empfang: Zustimmung durch Kontakt`
|Datum, wann der Kontakt dem Newsletter-Empfang zugestimmt hat. +
Datumsformat in der E-Mail: `mm-tt-jjjj`. +
Im Kontaktdatensatz wird zusätzlich zum Datum im Format `tt-mm-jjjj` der Zeitstempel im Format `00:00:00` gespeichert.
| `contact.newsletterAllowanceAt`
| $IsNewsletterActive

| `Nummer`
|Zusätzliche Nummer für den Kontakt
| `contact.number`
| $CustomerNumber

| `Anzahl der Aufträge`
|
| `contact.formattedOrdersCount`
| $OrderCount

| `Anrede geschäftlich`
|
| `contact.formattedOptions.salutationWork`
| $CustomerSalutationLabel

| `Anrede`
|
| `contact.formattedSalutation.label`
| $CustomerSalutationKey

| `Anrede privat`
|
| `contact.formattedOptions.salutationPrivate`
| $CustomerSalutationLabel

| `Signatur des Systembenutzers`
|Signatur des Systembenutzers, der als xref:crm:kontakt-bearbeiten.adoc#kontaktdetails[Eigner] am Kontaktdatensatz gespeichert ist, im Textformat.
| `contact.formattedUser.signatureNoHtml`
| $ContactOwnerSignature

| `Signatur des Systembenutzers im HTML-Format`
|Signatur des Systembenutzers, der als xref:crm:kontakt-bearbeiten.adoc#kontaktdetails[Eigner] im Kontaktdatensatz gespeichert ist, im HTML-Format.
| `contact.formattedUser.signatureHtml`
| $ContactOwnerSignatureHtml

| `Titel`
|
| `contact.title`
| $CustomerTitle

|====

[#variablen-kontakt-lieferadresse]
==== Variablen: Kontakt / Lieferadresse

[TIP]
*_Hinweis:_* Wenn es sich um eine Nachbestellung handelt, werden einige der folgenden Variablen für die Adressoptionen der Lieferadresse nicht in der E-Mail an deine Kund:innen ausgegeben. Das liegt daran, dass die Adressen, die an einem Lieferanten gespeichert werden, nicht berücksichtigt werden, weil du einen Lieferanten auch ohne Adresse in deinem System speichern kannst.

[[table-variables-order-contact-delivery-address]]
.Variablen in der Unterkategorie *Kontakt / Lieferadresse*
[cols="1,3,2"]
|====
|Name der Variable |Twig expression |Name der alten Variablefootnote:1[]

| `Lieferadresse Adresszusatz`
| `contact.formattedAddresses.deliveryAddress.address3 ~ ' ' ~ contact.formattedAddresses.deliveryAddress.address4`
| $DeliveryAddressAdditionalAddress

| `Lieferadresse Firmenname`
| `contact.formattedAddresses.deliveryAddress.name1`
| $DeliveryAddressCompany

| `Lieferadresse Land`
| `contact.formattedAddresses.deliveryAddress.country.name`
| $DeliveryAddressCountry

| `Lieferadresse Länder-ID`
| `contact.formattedAddresses.deliveryAddress.country.id`
| $DeliveryAddressCountryID

| `Lieferadresse Länder-ISO-Code 2`
| `contact.formattedAddresses.deliveryAddress.country.isoCode2`
| $DeliveryAddressCountryIsoCode

| `Lieferadresse Länder-ISO-Code 3`
| `contact.formattedAddresses.deliveryAddress.country.isoCode3`
| $DeliveryAddressCountryIsoCode

| `Lieferadresse Vorname`
| `contact.formattedAddresses.deliveryAddress.name2`
| $DeliveryAddressFirstName

| `Lieferadresse Vorname und Nachname`
| `contact.formattedAddresses.deliveryAddress.name2 ~ ' ' ~ contact.formattedAddresses.deliveryAddress.name3`
| $DeliveryAddressFullName

| `Lieferadresse Hausnummer`
| `contact.formattedAddresses.deliveryAddress.address2`
|

| `Lieferadresse Nachname`
| `contact.formattedAddresses.deliveryAddress.name3`
| $DeliveryAddressLastName

| `Lieferadresse Telefon`
| `contact.formattedAddresses.deliveryAddress.formattedOptions.telephone`
| $DeliveryAddressPhone

| `Lieferadresse Postleitzahl`
| `contact.formattedAddresses.deliveryAddress.postalCode`
| $DeliveryAddressZip

| `Lieferadresse Postleitzahl und Ort`
| `contact.formattedAddresses.deliveryAddress.postalCode ~ ' ' ~ contact.formattedAddresses.deliveryAddress.town`
| $DeliveryAddressCityWithZip

| `Lieferadresse Bundesland`
| `contact.formattedAddresses.deliveryAddress.state.name`
| $DeliveryAddressState

| `Lieferadresse Straße`
| `contact.formattedAddresses.deliveryAddress.address1 ~ ' ' ~ contact.formattedAddresses.deliveryAddress.address2`
| $DeliveryAddressStreet

| `Lieferadresse Ort`
| `contact.formattedAddresses.deliveryAddress.town`
| $DeliveryAddressCity

|====

[#variablen-kontakt-rechnungsadresse]
==== Variablen: Kontakt / Rechnungsadresse

[TIP]
*_Hinweis:_* Wenn es sich um eine Nachbestellung handelt, werden einige der folgenden Variablen für die Adressoptionen der Rechnungsadresse nicht in der E-Mail an deine Kund:innen ausgegeben. Das liegt daran, dass die Adressen, die an einem Lieferanten gespeichert werden, nicht berücksichtigt werden, weil du einen Lieferanten auch ohne Adresse in deinem System speichern kannst.

[[table-variables-order-contact-invoice-address]]
.Variablen in der Unterkategorie *Kontakt / Rechnungsadresse*
[cols="1,3,2"]
|====
|Name der Variable |Twig expression |Name der alten Variablefootnote:1[]

| `Rechnungsadresse Adresszusatz`
| `contact.formattedAddresses.invoiceAddress.address3 ~ ' ' ~ contact.formattedAddresses.invoiceAddress.address4`
|

| `Rechnungsadresse Firmenname`
| `contact.formattedAddresses.invoiceAddress.name1`
|

| `Rechnungsadresse Land`
| `contact.formattedAddresses.invoiceAddress.country.name`
|

| `Rechnungsadresse Länder-ID`
| `contact.formattedAddresses.invoiceAddress.country.id`
|

| `Rechnungsadresse Länder-ISO-Code 2`
| `contact.formattedAddresses.invoiceAddress.country.isoCode2`
|

| `Rechnungsadresse Länder-ISO-Code 3`
| `contact.formattedAddresses.invoiceAddress.country.isoCode3`
|

| `Rechnungsadresse Vorname`
| `contact.formattedAddresses.invoiceAddress.name2`
|

| `Rechnungsadresse Vorname und Nachname`
| `contact.formattedAddresses.invoiceAddress.name2 ~ ' ' ~ contact.formattedAddresses.invoiceAddress.name3`
|

| `Rechnungsadresse Hausnummer`
| `contact.formattedAddresses.invoiceAddress.address2`
|

| `Rechnungsadresse Nachname`
| `contact.formattedAddresses.invoiceAddress.name3`
|

| `Rechnungsadresse Telefon`
| `contact.formattedAddresses.invoiceAddress.formattedOptions.telephone`
|

| `Rechnungsadresse Postleitzahl`
| `contact.formattedAddresses.invoiceAddress.postalCode`
|

| `Rechnungsadresse Postleitzahl und Ort`
| `contact.formattedAddresses.invoiceAddress.postalCode ~ ' ' ~ contact.formattedAddresses.invoiceAddress.town`
|

| `Rechnungsadresse Bundesland`
| `contact.formattedAddresses.invoiceAddress.state.name`
|

| `Rechnungsadresse Straße`
| `contact.formattedAddresses.invoiceAddress.address1 ~ ' ' ~ contact.formattedAddresses.invoiceAddress.address2`
|

| `Rechnungsadresse Ort`
| `contact.formattedAddresses.invoiceAddress.town`
|

|====

[#variablen-kontakt-optionen]
==== Variablen: Kontakt / Optionen

[[table-variables-order-contact-options]]
.Variablen in der Unterkategorie *Kontakt / Optionen*
[cols="1,3,2"]
|====
|Name der Variable |Twig expression |Name der alten Variablefootnote:1[]

| `Zusätzlicher Ansprechpartner`
| `contact.formattedOptions.additionalContactPerson`
|

| `E-Mail geschäftlich`
| `contact.formattedOptions.emailWork`
| $CustomerEmail

| `E-Mail PayPal`
| `contact.formattedOptions.emailPayPal`
| $CustomerEmail

| `E-Mail privat`
| `contact.formattedOptions.emailPrivate`
| $CustomerEmail

| `Fax geschäftlich`
| `contact.formattedOptions.telefaxWork`
| $CustomerFax

| `Fax privat`
| `contact.formattedOptions.telefaxPrivate`
| $CustomerFax

| `Mobiltelefon geschäftlich`
| `contact.formattedOptions.telephoneMobileWork`
| $CustomerMobilePhone

| `Mobiltelefon privat`
| `contact.formattedOptions.telephoneMobilePrivate`
| $CustomerMobilePhone

| `Telefon geschäftlich`
| `contact.formattedOptions.telephoneWork`
| $CustomerPhone

| `Telefon privat`
| `contact.formattedOptions.telephonePrivate`
| $CustomerPhone

| `eBay-Name`
| `contact.formattedOptions.marketplaceEbay`
| $CustomerEbayName

|====

[#variablen-global]
==== Variablen: Global

[TIP]
.Werden die Rechtstexte nicht korrekt in der versendeten E-Mail dargestellt?
====
Wenn deine über twig expressions eingebundenen Rechtstexte, die du im Code-Widget eingefügt hast, nicht korrekt in der gesendeten E-Mail dargestellt werden, ist die Lösung `| raw` am Ende der Twig expression einzufügen.
====

[[table-variables-global]]
.Variablen in der Kategorie *Global*
[cols="2,4,3,2"]
|====
|Name der Variable |Erläuterung |Twig expression |Name der alten Variablefootnote:1[]

| `Kontoinhaber (Stammdaten)`
|Kontoinhaber:in aus den xref:willkommen:schnelleinstieg-basiseinstellungen.adoc#100[Stammdaten] deines Systems. Wird im Menü *Einrichtung » Einstellungen » Bank* gespeichert.
| `globals.bank.owner`
|

| `BIC (Stammdaten)`
|BIC aus den xref:willkommen:schnelleinstieg-basiseinstellungen.adoc#100[Stammdaten] deines Systems. Wird im Menü *Einrichtung » Einstellungen » Bank* gespeichert.
| `globals.bank.bic`
|

| `Bankname (Stammdaten)`
|Bankname aus den xref:willkommen:schnelleinstieg-basiseinstellungen.adoc#100[Stammdaten] deines Systems. Wird im Menü *Einrichtung » Einstellungen » Bank* gespeichert.
| `globals.bank.name`
| $BankName

| `Widerrufsrecht im HTML-Format`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Widerrufsrecht* und dort im Tab *HTML* gespeichert.
| `globals.legalInformation.cancellationRights.html \| raw`
| $CancellationRightsHTML

| `Widerrufsrecht im reinen Textformat`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Widerrufsrecht* und dort im Tab *Text* gespeichert.
| `globals.legalInformation.cancellationRights.plain`
| $CancellationRightsText

| `Mandanten-ID`
|Gibt die ID des Mandanten (Shops) aus.
| `globals.webshopId`
| -

| `Mandantenname`
|Gibt den Namen des Mandanten (Shops) aus.
| `globals.clientName`
| -

| `Gutschein-Code (1)`
| xref:auftraege:gutscheine.adoc#[Gutschein-Codes] werden in der Kampagne im Menü *Aufträge » Gutscheine* generiert. Ein Gutschein-Code kann immer nur jeweils einer Kampagne zugeordnet werden, um diesen Gutschein-Code aus der Kampagne in der E-Mail-Vorlage zu versenden.
| `globals.coupons.couponCode1`
| $CouponCode1

| `Gutschein-Code (2)`
|
| `globals.coupons.couponCode2`
| $CouponCode2

| `Gutschein-Code (3)`
|
| `globals.coupons.couponCode3`
| $CouponCode3

| `Gutschein-Code (4)`
|
| `globals.coupons.couponCode4`
| $CouponCode4

| `Gutschein-Code (5)`
|
| `globals.coupons.couponCode5`
| $CouponCode5

| `Gutschein-Code (6)`
|
| `globals.coupons.couponCode6`
| $CouponCode6

| `Gutschein-Code (7)`
|
| `globals.coupons.couponCode7`
| $CouponCode7

| `Gutschein-Code (8)`
|
| `globals.coupons.couponCode8`
| $CouponCode8

| `Gutschein-Code (9)`
|
| `globals.coupons.couponCode9`
| $CouponCode9

| `Gutschein-Code (10)`
|
| `globals.coupons.couponCode10`
| $CouponCode10

| `EORI-Nummer`
|Eindeutige Identifizierungsnummer, die für Zollzwecke benötigt wird.
| `globals.account.EORINumber`
|

| `Allgemeine Geschäftsbedingungen im HTML-Format`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *AGB* und dort im Tab *HTML* gespeichert.
| `globals.legalInformation.termsConditions.html \| raw`
|

| `Allgemeine Geschäftsbedingungen im reinen Textformat`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *AGB* und dort im Tab *Text* gespeichert.
| `globals.legalInformation.termsConditions.plain`
|

| `IBAN (Stammdaten)`
|IBAN aus den xref:willkommen:schnelleinstieg-basiseinstellungen.adoc#100[Stammdaten] deines Systems. Wird im Menü *Einrichtung » Einstellungen » Bank* gespeichert.
| `globals.bank.iban`
| $BankIBAN

| `Impressum im HTML-Format`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Impressum* und dort im Tab *HTML* gespeichert.
| `globals.legalInformation.legalDisclosure.html \| raw`
| $LegalDisclosureHTML

| `Impressum im reinen Textformat`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Impressum* und dort im Tab *Text* gespeichert.
| `globals.legalInformation.legalDisclosure.plain`
| $LegalDisclosureText

| `Datenschutzerklärung im HTML-Format`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Datenschutzerklärung* und dort im Tab *HTML* gespeichert.
| `globals.legalInformation.privacyPolicy.html \| raw`
| $PrivacyPolicyHTML

| `Datenschutzerklärung im reinen Textformat`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Datenschutzerklärung* und dort im Tab *Text* gespeichert.
| `globals.legalInformation.privacyPolicy.plain`
| $PrivacyPolicyText

| `Signatur im HTML-Format`
|Die Signatur wird im Assistenten *E-Mail-Konten* im Schritt *Signatur* gespeichert. Du findest den Assistenten im Menü *Einrichtung » Mandant » Global » E-Mail-Konten*.
| `globals.account.signatureHTML \| raw`
| $SignatureHTML

| `Signatur im reinen Textformat`
|Die Signatur wird im Assistenten *E-Mail-Konten* im Schritt *Signatur* gespeichert. Du findest den Assistenten im Menü *Einrichtung » Mandant » Global » E-Mail-Konten*.
| `globals.account.signatureText \| raw`
| $SignatureText

| `Heutiges Datum`
|Gibt das heutige Datum im Format `tt-mm-jjjj` aus.
| `"now"\|date("d-m-Y")`
| $TodaysDate

| `URL zum Warenkorb`
|Gibt die URL zum Warenkorb im Webshop aus.
| `globals.links.linkBasket`
|

| `URL zum Ändern des Passworts`
|Gibt die URL zum Bereich *Passwort ändern* im Webshop aus. Dort können Kund:innen ein neues Passwort eingeben.
| `globals.links.linkChangePassword`
| $CustomerPassword

| `URL zur Auftragsübersicht`
|Gibt die URL zur Auftragsübersicht im Webshop aus.
| `globals.links.linkCheckout`
|

| `URL zum Bestätigen der E-Mail-Adresse`
|Gibt die URL zum Bestätigen der E-Mail-Adressänderung des Kontakts aus.
| `globals.account.newCustomerEmail`
|$NewCustomerEmail

| `URL zum neuen Passwort`
|Gibt die URL zu einem Formular zum Erstellen eines neuen Passworts aus. Dort geben Kund:innen ihre E-Mail-Adresse ein.
| `globals.links.linkNewPassword`
|

| `URL zum Webshop`
|Gibt die URL zum Webshop aus.
| `globals.links.linkWebstore`
|

| `URL zu den Geschäftsbedingungen`
|Gibt die URL zu den AGB aus.
| `globals.links.linkTermsConditions`
|

| `Widerrufsformular im HTML-Format`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Widerrufsformular* und dort im Tab *HTML* gespeichert.
| `globals.legalInformation.withdrawalForm.html \| raw`
| $WithdrawalFormHTML

| `Widerrufsformular im reinen Textformat`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Widerrufsformular* und dort im Tab *Text* gespeichert.
| `globals.legalInformation.withdrawalForm.plain`
| $WithdrawalFormText

|====

[#variablen-newsletter]
==== Variablen: Newsletter

[[table-variables-newsletter]]
.Variablen in der Kategorie *Newsletter*
[cols="2,5,2,2"]
|====
|Name der Variable |Erläuterung |Twig expression |Name der alten Variablefootnote:1[]

| `Newsletter Vorname`
|Vorname der Person, die den xref:crm:newsletter-versenden.adoc#[Newsletter] abonnieren möchte.
| `newsletter.firstName`
| -

| `Newsletter Nachname`
|Nachname der Person, die den xref:crm:newsletter-versenden.adoc#[Newsletter] abonnieren möchte.
| `newsletter.lastName`
| -

| `URL zur Bestätigung des Newsletter-Abonnements`
|Gibt die URL zum Bestätigen des xref:crm:newsletter-versenden.adoc#[Newsletter-Abonnements] aus.
| `newsletter.formattedConfirmUrl`
| $NewsletterConfirmURL

|====

[#variablen-ticket]
==== Variablen: Ticket

[[table-variables-ticket]]
.Variablen in der Kategorie *Ticket*
[cols="2,5,2,2"]
|====
|Name der Variable |Erläuterung |Twig expression |Name der alten Variablefootnote:1[]

| `Ticket Backend-URL`
|Verlinkt zum Ticket im Menü xref:crm:ticketsystem-nutzen.adoc#[CRM » Ticketsystem].
| `ticket.formattedUrl.backendUrl`
| $TicketBackendURL

| `Ticket: Nachrichtenhistorie`
|Gibt den zuletzt gespeicherten Text im Ticket aus. Das ist entweder der Text eines Kommentars oder einer Nachricht.
| `ticket.formattedMessage.history`
| $TicketHistory

| `Ticket-ID`
|Gibt die ID des Tickets aus, aus dem die E-Mail versendet wurde.
| `ticket.id`
| $TicketID

| `Ticket: Letzter Kommentar`
|Gibt den Text des letzten xref:crm:ticketsystem-nutzen.adoc#2500[Kommentars] aus. +
*_Hinweis:_* Kommentare dienen der internen Kommunikation und sind für deine Kund:innen _nicht_ sichtbar.
| `ticket.formattedMessage.lastComment`
| $TicketLastComment

| `Ticket: Letzte Nachricht`
|Gibt den Text der letzten xref:crm:ticketsystem-nutzen.adoc#2400[Nachricht] aus.
| `ticket.formattedMessage.lastMessage`
| $TicketLastMessage

| `Ticket-Priorität`
|Gibt die Priorität des Tickets als ID aus. Die Werte der Sterne werden aufsteigend mit Zahlen von `0` (grauer Stern, niedrigste Priorität) bis `5` (2 gelbe Sterne, höchste Priorität) angezeigt.
| `ticket.priorityId`
| $TicketPriority

| `Ticket-Status`
|Gibt den Status des Tickets aus.
| `ticket.formattedStatus`
| $TicketStatus

| `Ticket-Tags`
|Gibt die Tags des Tickets aus.
| `ticket.formattedTags`
| $TicketTags

| `Ticket-Titel`
|Gibt den Titel des Tickets aus.
| `ticket.title`
| $TicketTitle

| `Ticket-URL`
|Verlinkt zum Ticket im Bereich *Mein Konto* des Kunden. Kund:innen können dann dort die Nachricht lesen und direkt eine Antwortnachricht eingeben und versenden. +
Beachte dazu das Kapitel xref:crm:ticketsystem-nutzen.adoc#5500[Tickets im Mein Konto-Bereich erstellen] auf der Handbuchseite xref:crm:ticketsystem-nutzen.adoc#[Ticketsystem].
| `ticket.formattedUrl.url`
| $TicketURL

|====

[#variablen-messenger]
==== Variablen: Messenger

[IMPORTANT]
.Automatische Zuordnung
====
Die E-Mails, die über den Messenger in dein System kommen, werden nach Stichworten bzw. textlichen Parametern, die von deinem System automatisch erkannt werden, zugeordnet. +
Weitere Informationen, wie die Zuordnung erfolgt, findest du auf der Handbuchseite xref:crm:messenger.adoc#[Messenger] im Kapitel xref:crm:messenger.adoc#nachrichten-zuordnen[Nachrichten im Messenger zuordnen].
====

[[table-variables-messenger]]
.Variablen in der Kategorie *Messenger*
[cols="2,5,2"]
|====
|Name der Variable |Erläuterung |Twig expression

| `Erste Nachricht der Konversation`
|Gibt den Text der ersten Nachricht innerhalb der Konversation aus.
| `messenger.formattedMessage.conversationFirstMessage \| raw`

| `Erste geflüsterte Nachricht der Konversation`
|Gibt den Text der ersten geflüsterten Nachricht innerhalb der Konversation aus.
| `messenger.formattedMessage.conversationFirstWhisperedMessage \| raw`

| `Konversationshistorie`
|
| `messenger.formattedMessage.conversationHistory \| raw`

| `ID der Konversation`
|Gibt die ID der Konversation aus.
| `messenger.uuid`

| `Letzte Nachricht der Konversation`
|Gibt den Text der letzten Nachricht innerhalb der Konversation aus.
| `messenger.formattedMessage.conversationLastMessage \| raw`

| `Letzte geflüsterte Nachricht der Konversation`
|Gibt den Text der letzten geflüsterten Nachricht innerhalb der Konversation aus.
| `messenger.formattedMessage.conversationLastWhisperedMessage \| raw`

| `Abgekürzte ID der Konversation`
| Gibt die abgekürzte ID der Konversation aus.
| `messenger.shortId`

| `Titel der Konversation`
|Gibt den Betreff der Konversation aus.
| `messenger.title`

|====

[#code-beispiele-code-widget]
== Code-Beispiele für das Code-Widget

Setze in deinen E-Mail-Vorlagen Fallunterscheidungen nach den Prinzipien der if-Abfragen ein oder verwende for-Schleifen. In den folgenden Unterkapiteln findest du einige if-Abfragen und for-Schleifen, die du einfach in dein <<#intable-widget-code, Code-Widget>> kopieren kannst.

[#code-beispiel-versandprofil]
=== Code-Beispiel: Versandprofil

Füge in das <<#intable-widget-code, Code-Widget>> einen Code ein, der bewirkt, dass ein Hinweis bezüglich der Spedition und Kontaktaufnahme in der E-Mail an deine Kund:innen nur angezeigt wird, wenn der Versanddienstleister im Versandprofil eine Spedition ist. In unserem Beispiel hat das Versandprofil mit der Spedition die ID `6`.

Das Code-Beispiel findest du link:https://raw.githubusercontent.com/plentymarkets/plenty-manual-docs/main/docs/de-de/modules/crm/examples/emailbuilder-code-beispiel-versandprofil.txt[unter diesem Link^].

[#code-beispiel-bankdaten]
=== Code-Beispiel: Bankdaten

Füge in das <<#intable-widget-code, Code-Widget>> einen Code ein, der bewirkt, dass deine Bankdaten in der E-Mail an deine Kund:innen nur angezeigt werden, wenn sie im plentyShop die Zahlungsart *Vorkasse* (ID `0`) gewählt haben.

Das Code-Beispiel findest du link:https://raw.githubusercontent.com/plentymarkets/plenty-manual-docs/main/docs/de-de/modules/crm/examples/emailbuilder-code-beispiel-bankdaten.txt[unter diesem Link^].

[#code-beispiel-auftragspositionen]
=== Code-Beispiel: Auftragspositionen

Füge in das <<#intable-widget-code, Code-Widget>> einen Code ein, der bewirkt, dass die Auftragspositionen mit den Varianten-IDs, den Artikelnamen, der Artikelanzahl und dem Preis in einer Tabelle angezeigt werden.

Das Code-Beispiel findest du link:https://raw.githubusercontent.com/plentymarkets/plenty-manual-docs/main/docs/de-de/modules/crm/examples/emailbuilder-code-beispiel-auftragspositionen.txt[unter diesem Link^].

[#code-beispiel-artikel-liste]
=== Code-Beispiel: Artikel des Auftrags als Liste

Füge in das <<#intable-widget-code, Code-Widget>> einen Code ein, der bewirkt, dass die Artikel-IDs und die Artikelmenge aller Artikel, die im Auftrag enthalten sind, als Liste angezeigt werden.

Das Code-Beispiel findest du link:https://raw.githubusercontent.com/plentymarkets/plenty-manual-docs/main/docs/de-de/modules/crm/examples/emailbuilder-code-beispiel-artikel-liste.txt[unter diesem Link^].

[#code-beispiel-artikel-liste-kommasepariert]
=== Code-Beispiel: Artikel des Auftrags kommasepariert in einer Zeile

Füge in das <<#intable-widget-code, Code-Widget>> einen Code ein, der bewirkt, dass die Artikel-IDs aller Artikel, die im Auftrag enthalten sind, hintereinander kommasepariert in einer Zeile angezeigt werden.

Das Code-Beispiel findest du link:https://raw.githubusercontent.com/plentymarkets/plenty-manual-docs/main/docs/de-de/modules/crm/examples/emailbuilder-code-beispiel-artikel-liste-kommasepariert.txt[unter diesem Link^].

[#code-beispiel-header-mandantenabhaengig]
=== Code-Beispiel: Header abhängig vom Mandanten anzeigen

Füge in das <<#intable-widget-code, Code-Widget>> im Header einen Code ein, der bewirkt, dass der Header abhängig von der plenty ID für den von dir gewählten Mandanten angezeigt wird. +
*_Hinweis:_* Vergiss nicht, die plenty IDs im Code-Beispiel durch deine korrekten IDs zu ersetzen und die korrekten Logos einzufügen.

Das Code-Beispiel findest du link:https://raw.githubusercontent.com/plentymarkets/plenty-manual-docs/main/docs/de-de/modules/crm/examples/emailbuilder-code-beispiel-header-mandantenabhaengig.txt[unter diesem Link^].

[IMPORTANT]
.Gleiche Vorgehensweise beim Footer
====
Gehe anhand des Code-Beispiels genauso vor und füge den Code in das Code-Widget im Footer ein, wenn du auch unterschiedliche Footer abhängig von der plenty ID anzeigen möchtest.
====

[#code-beispiel-datumsformat]
=== Code-Beispiel: Datumsformat

Die Einstellung für das Datumsformat, die du im Bereich *Spracheinstellungen* vorgenommen hast, greifen _nicht_ für datumsbezogene twig expressions, die du im Code-Widget verwendest. Hier musst du die Formatierung also selbst vornehmen.

*_Beispiel:_* Wenn du für die englische Datumsschreibweise in den Spracheinstellungen einen Bindestrich gewählt hast, im Code-Widget aber eine der folgenden twig expressions für das Auftragsdatum einfügst, wird in der E-Mail-Vorlage die im Code-Widget verwendete Schreibweise für das Datum ausgegeben. Die Einstellung aus dem Bereich *Spracheinstellungen* wird hier also überschrieben.

* `&#123;&#8288;&#123; order.formattedDates.createdOnDateAndTime &#125;&#8288;&#125;`
** Angezeigtes Ergebnis: 2023-04-24 07:28:54

* `&#123;&#8288;&#123; order.formattedDates.createdOnDateAndTime | date('d.m.Y') &#125;&#8288;&#125;`
** Angezeigtes Ergebnis: 24.04.2023

* `&#123;&#8288;&#123; order.formattedDates.createdOnDateAndTime | date('d.m.Y H:i') &#125;&#8288;&#125;`
** Angezeigtes Ergebnis: 24.04.2023 07:28

[#code-beispiel-zahlenformat]
=== Code-Beispiel: Zahlenformat

Die Einstellung für das Zahlenformat, die du im Bereich *Spracheinstellungen* vorgenommen hast, greifen _nicht_ für Zahlenwerte in twig expressions, die du im Code-Widget verwendest. Hier musst du die Formatierung also selbst vornehmen.

*_Beispiel:_* Wenn du für die englische Zahlenschreibweise in den Spracheinstellungen einen Punkt als Dezimaltrennzeichen gewählt hast, im Code-Widget aber eine der folgenden twig expressions für den Gesamtrechnungsbetrag einfügst, wird in der E-Mail-Vorlage die im Code-Widget verwendete Schreibweise für den Betrag ausgegeben. Die Einstellung aus dem Bereich *Spracheinstellungen* wird hier also überschrieben.

* `&#123;&#8288;&#123; order.formattedGeneral.invoiceTotal &#125;&#8288;&#125;`
** Angezeigtes Ergebnis: 3,141.59

* `&#123;&#8288;&#123; order.formattedGeneral.invoiceTotal | number_format(2, ',', '.') &#125;&#8288;&#125;`
** Angezeigtes Ergebnis: 3.141,59

* `&#123;&#8288;&#123; order.formattedGeneral.invoiceTotal | number_format(2, ',', '') &#125;&#8288;&#125;`
** Angezeigtes Ergebnis: 3141,59

[#code-beispiele-betreff]
== Code-Beispiele für den Betreff

Füge in den Betreff deiner Vorlage einen Code ein, der bewirkt, dass ein bestimmtes Wort am Anfang des Betreffs angezeigt wird, wenn es sich um bestimmte Auftragsherkünfte handelt. In unserem Beispiel wird immer der Begriff `[WICHTIG]` am Anfang des Betreffs eingefügt, wenn die Herkünfte zwischen `9` und `11` liegen.

Das Code-Beispiel findest du link:https://raw.githubusercontent.com/plentymarkets/plenty-manual-docs/main/docs/de-de/modules/crm/examples/emailbuilder-code-beispiel-betreff.txt[unter diesem Link^].
