= Aufträge (Testphase)
:keywords: Auftrag, Auftrag, Auftrag, Aufträge, Aufträge,...
:description: Erfahre, wie du mit der neuen Aufträge-UI (Testphase) in plentymarkets arbeitest.
:author: team-order-core

// TODO: neue Struktur überlegen
//// 
Prüfen, was geblieben ist, was neu ist, alle Änderungen dokumentieren. Siehe Aufgaben in Themen/Veranwortung.
https://forum.plentymarkets.com/t/changelog-closed-beta/677887/3

1. Übersicht und Einleitung

2. Grundeinstellungen Aufträge
Warenhauszuordnung
Buchhaltung
Auftragsherkunft
Auftragsstatus

3. Aufträge verwalten/bearbeiten
Auftragsanlage
Auftragsübersicht (neue UI)
Detailansicht (neue UI) und myview

Auftragstypen, darunter
Lieferauftrag
Angebot (neu schreiben)
Retoure
Gutschrift
Gewährleistung
Reparatur
Sammelauftrag
Vorbestellung
Aufträge verwalten (alte UI), verweisen

4. Auftragsdokumente
Dokumenten einrichten
Dokumentenarchiv
Rechnungen
Korrekturbelege
Lieferscheine
Gutschriften
Auftragsbestätigungen
Angebote
Mahnungen
Reparaturscheine
Abhollieferung
Rücksendescheine
Gelangensbestätigungen
Proformarechnungen
Lager-Picklisten
Packlisten
Picklisten
Best Practice: Sammel-PDF erstellen

weitere Punkte siehe Doc
////


== Einleitung
//  TODO: Text ergänzen und anpassen; hat sie vollen Funktionsumfang?
Dieses Kapitel beschreibt die neue Aufträge-UI, die im Monat 2022 in einer offenen Betaphase veröffentlicht wurde.

* UI steht für [.underline]##U##ser [.underline]##I##nterface (auf Deutsch: Benutzeroberfläche).
Mit der Formulierung "neue Aufträge-UI" meinen wir also, dass es in plentymarkets jetzt ein neues Menü zur Verwaltung und Abwicklung von Aufträgen gibt.
* "Offene Beta" bedeutet, dass du die neue Order-UI sehen und ausprobieren kannst. Die neue UI hat allerdings noch nicht den vollen Funktionsumfang.

// TODO: Video?

[#creating-orders-in-plentymarkets]
== Allgemeines zur Auftragsanlage in plentymarkets

// TODO: alle xref prüfen und anpassen
In plentymarkets wird ein Auftrag automatisch angelegt, wenn Kund:innen Bestellungen in deinem Webshop oder auf einem angebundenen Marktplatz tätigen. Unterschiedliche Geschäftsvorfälle wie xref:auftraege:auftraege-verwalten.adoc#300[Lieferaufträge], xref:auftraege:auftraege-verwalten.adoc#400[Retouren], xref:auftraege:auftraege-verwalten.adoc#500[Gutschriften], xref:auftraege:auftraege-verwalten.adoc#600[Gewährleistungen] und xref:auftraege:auftraege-verwalten.adoc#700[Reparaturen] werden mithilfe eigener Aufträge verschiedener Typen abgebildet, die immer mit dem Hauptauftrag verbunden sind. Über die xref:auftraege:auftraege-verwalten.adoc#1400[Auftragsübersicht] lassen sich Aufträge ungeachtet der xref:auftraege:auftragsherkunft.adoc#[Auftragsherkunft] öffnen und bearbeiten. Für viele Auftragstypen, wie zum Beispiel xref:auftraege:auftraege-verwalten.adoc#300[Lieferaufträge], ist das Einrichten von xref:automatisierung:ereignisaktionen.adoc#[Ereignisaktionen] sinnvoll, um Vorgänge zu automatisieren. Einige Beispiele für die Nutzung von Ereignisaktionen für die Auftragsabwicklung werden in den folgenden Kapiteln erläutert. +
Aufträge, die nicht über den Webshop oder einen Marktplatz bei dir eingehen, legst du xref:auftraege:auftraege-verwalten.adoc#200[manuell] im System an. Das ist beispielsweise bei telefonischen oder E-Mail-Bestellungen sowie bei Barverkäufen der Fall.

Passe die xref:auftraege:grundeinstellungen.adoc#[Grundeinstellungen] im Menü *Einrichtung » Aufträge » Einstellungen* an, bevor du die ersten Aufträge in deinem plentymarkets System abwickelst. Speichere die Grundeinstellungen auch dann einmalig ab, wenn du die voreingestellten Werte nicht verändert hast.


== Grundeinstellungen Aufträge
// TODO: siehe grundeinstellungen.adoc, plus Warenhauszuordnung und Fallback

Im Menü *Einrichtung » Aufträge » Einstellungen* wählst du die Einstellungen, die für Aufträge automatisch eingestellt werden bzw. bei bestimmten Auftragsstatus oder Bedingungen gelten sollen. Zum Beispiel wählst du Standard-Einstellungen für die Auftragsherkunft und den Status von Aufträgen.
[...]

[#important-preconditions]
== Wichtige Vorbedingungen beachten

Bei neuen Systemen sind Standardstatus eingestellt, z.B. für Retouren der Status [9] und für Gutschriften der Status [11]. Diese Einstellungen sind änderbar. Wähle dazu einen anderen Status. Alternativ legst du im Menü *Einrichtung » Aufträge » Auftragsstatus* einen neuen xref:auftraege:auftraege-verwalten.adoc#1200[Auftragsstatus] an. Ein dort angelegter Status wird hier im Menü *Grundeinstellungen* angezeigt und ist auch als Standardstatus einstellbar.
// TODO: xref

[IMPORTANT]
.Grundeinstellungen speichern
====
Die Grundeinstellungen des Menüs *Einrichtung » Aufträge » Einstellungen* müssen bei Inbetriebnahme des Systems gespeichert werden, damit die Einstellungen wirksam sind. Speichere daher die Einstellungen auch, wenn du sie nicht verändert hast, also die Standardkonfiguration verwenden möchtest.
====

[WARNING]
.Wichtig: Benutzer-Login
====
Wenn du in diesem Menü Änderungen vornimmst, werden andere Benutzer:innen automatisch ausgeloggt und müssen sich neu einloggen, damit die Änderungen auch für diese Benutzerprofile greifen. Kündige Änderungen daher ggf. weiteren Benutzer:innen an.
====

////
Buchhaltung
siehe buchhaltung.adoc
siehe auftrage.adoc

Auftragsherkunft
siehe auftragsherkunft.adoc

Auftragsstatus
siehe auch grundeinstellungen.adoc
////

== Aufträge verwalten und bearbeiten

Auftragsanlage
// TODO: verschiedene Möglichkeiten

[#creater-order-or-offer]
=== Auftrag oder Angebot anlegen

Der Auftrag oder das Angebot wird individuell für Kund:innen im Menü *CRM » Kontakte* erstellt. Die Anlage verläuft in drei Schritten. Im ersten Schritt werden Auftragsdetails erfasst, im zweiten Schritt werden Artikel hinzugefügt und im dritten Schritt wird der Auftrag abgeschlossen. Wähle zunächst aus den Kontakten aus, für wen der Auftrag oder das Angebot angelegt werden soll. Gehe dabei wie im Folgenden beschrieben vor.

[.instruction]
Auftrag oder Angebot über Kontakt anlegen:

. Öffne das Menü *CRM » Kontakte*.
. Suche den Kontakt anhand der Filtereinstellungen wie im Kapitel xref:crm:kontakte-verwalten.adoc#200[Kontakt suchen] beschrieben. +
→ Die Kontakte, die den Suchkriterien entsprechen, werden angezeigt.
. Klicke in der Zeile des Kontaktes auf *Aktionen* (icon:bars[]). +
→ Eine Auswahl der verfügbaren Optionen wird geöffnet.
. Wähle entweder *Neuer Auftrag [Beta]* oder *Neues Angebot [Beta]*. +
→ Du wirst automatisch zu den Auftragsdetails für den neuen Auftrag bzw. des neuen Angebotes weitergeleitet. +
// TODO: alle xref prüfen/anpassen

Über den Auftragsdetails kannst du aus Dropdown-Liste auch nachträglich zwischen Auftrag und Angebot wählen. Zudem kannst du optional eine xref:auftraege:auftraege-verwalten.adoc#295[Auftragsvorlage] aus der Dropdown-Liste auswählen, die auf diesen Auftrag angewendet werden soll. In der Standardeinstellung ist hier keine Auftragsvorlage ausgewählt.

Die im Folgenden beschriebenen Schritte sind für Auftrag und Angebot gleich.
// TODO: siehe angebot.adoc

Die Ansichten der neuen Benutzeroberfläche sind so gestaltet, dass sich Aufträge schnell und übersichtlich anlegen lassen. Dies ist vor allem bei der telefonischen Aufnahme von Bestellungen von Vorteil. Zunächst werden die Auftragsdetails wie z.B. Adressen oder die Zahlungsart abgefragt. Danach werden dem Auftrag Artikel hinzugefügt, um ihn im letzten Schritt zu überprüfen und anzulegen.

Auftragsübersicht (neue UI)
Aufträge suchen und Gruppenfunktion

Detailansicht

= Detailansicht Gestaltung
include::{includedir}/_header.adoc[]
// TODO: header

Die Detailansicht eines Auftrags enthält alle relevanten Auftragsinformationen. Diese Informationen sind thematisch in Portlets angeordnet. Über die MyView Funktionalität kannst du die Portlets selbst und auch ihre Anordnung in der Detailansicht individuell einrichten. Das bedeutet, dass du selbst bestimmen kannst, welche Auftragsinformationen und damit verbundene Funktionen für dich am wichtigsten sind. Gestalte deine Auftragsbearbeitung effizienter, indem du dir eigene Ansichten einrichtest. Wie du dabei vorgehst, wird auf dieser Seite erklärt.

// TODO: MyView als Include einfügen

[#customise-ui]
== Benutzeroberfläche anpassen

Du öffnest die Detailansicht eines Auftrags von der Auftragsübersicht aus. Gehe ins Menü *Aufträge » Aufträge [Testphase]* und <<LINK#, suche den Auftrag>>, den du öffnen und bearbeiten möchtest.
Wenn du noch keine eigene Ansicht erstellt hast, wird der Auftrag mit der Standardansicht geöffnet. Du kannst die Standardansicht nutzen, um den Auftrag zu bearbeiten. Wenn du die Detailansicht individuell anpassen möchtest, kannst du eine eigene Ansicht erstellen. In den folgenden Kapiteln wird dir erklärt, wie du dafür vorgehst.


[#create-new-view]
=== Eine neue Ansicht erstellen

. Gehe ins Menü *Aufträge » Aufträge [Testphase]*.
. Klicke oben rechts auf die Dropdown-Liste der Ansichten (icon:caret-down[role="darkGrey"]).
. Klicke oben auf icon:plus[role="darkGrey"] *Neue Ansicht erstellen ...*.
. Gib einen Namenim Pop up-Fenster ein.
. Klicke auf *Ansicht erstellen*. +
→ Die neue Ansicht wird erstellt und automatisch geöffnet, d.h. sie wird angewendet.
Es ist jetzt möglich, zwischen den Ansichten zu wechseln.

image::artikel/neue-ui/assets/detailansicht-neue-ansicht.gif[]
// TODO: image anpassen


[#create-grid]
=== Ein Raster erstellen

. Klicke auf *Ansicht bearbeiten* (icon:design_inline_edit[set=plenty]).
. Füge Zeilen und Spalten hinzu, um ein Raster zu erstellen.
.. Klicke auf icon:ellipsis-v[role="blue"] und dann auf icon:plus[role="darkGrey"] *Zeile hinzufügen*.
.. Klicke auf *Spalte hinzufügen* (icon:plus[role="darkGrey"]).
.. Ziehe die Spalten, um sie größer oder kleiner zu machen.

image::artikel/neue-ui/assets/detailansicht-raster-erstellen.gif[]
// TODO: image prüfen anpassen

[#place-elements]
=== Elemente platzieren

. Füge Elemente per Drag & Drop hinzu.
. Klicke auf icon:pencil[role="blue"] und passe die Einstellungen für das Element an.
.. Ändere den Namen.
.. Entscheide, welche Datenfelder das Element enthalten soll.
.. Lege die Reihenfolge der Datenfelder per Drag & Drop fest.
. Klicke auf icon:close[role="blue"]

image::artikel/neue-ui/assets/detailansicht-elemente.gif[]
// TODO: image anpassen

[cols="1,4a"]
|====
|Symbol |Erläuterung

| icon:pencil[role="blue"]
|Führt eine Ebene tiefer.

| icon:trash[role="blue"]
|Löscht das Element.

| icon:close[role="blue"]
|Führt eine Ebene höher.
|====

// TODO: ergänzen um Bearbeitung abschließen

[TIP]
.Kann ich Elemente mehrfach hinzufügen?
======
Die Zahl im grauen Kreis gibt an, wie oft du das Element verwenden kannst.

* Die meisten Elemente können nur einmal hinzugefügt werden.
* Das Element *Eigenes Portlet* kann beliebig oft hinzugefügt werden.
Die einzelnen Datenfelder innerhalb des Portlets können jedoch nicht mehrfach hinzugefügt werden.
======

// TODO: struktur
Portlets
Einleitung

[#individual-portlets]
=== Eigene Portlets

Das eigene Portlet unterscheidet sich von den vorgefertigten Portlets in zwei wichtigen Punkten. Das eigene Portlet:

* kann beliebig oft hinzugefügt werden.
* enthält alle Artikeldatenfelder und nicht nur eine Teilmenge, wie es bei den vorgefertigten Portlets der Fall ist.

Dank eigener Portlets bist du nicht auf die vorgefertigten Einstellungen angewiesen. Du kannst stattdessen selbst entscheiden, welche Einstellungen ein Portlet enthalten soll.

[discrete]
==== Anwendungsbeispiel

Stell dir vor, du bist mit der Standardanordnung der globalen Einstellungen nicht zufrieden. Du würdest lieber die Herstellereinstellungen und die Zustände separat gruppieren. Ein solches Szenario kann mit eigenen Portlets realisiert werden.

. Füge beliebig viele eigene Portlets hinzu.
. Gib den Portlets aussagekräftige Namen.
. Füge die passenden Artikeldatenfelder zu den Portlets hinzu.

image::artikel/neue-ui/assets/detailansicht-eigene-portlets.png[]
// TODO: image

////
einfügen 1.5 Bearbeitung abschließen
Erklärung für Speicherlogik nutzbar

Portlets Standard
////

[#portlet-overview]
==== Portlet Übersicht

Im Portlet *Übersicht* siehst du allgemeine Informationen zum Auftrag.

[[table-portlet-overview]]
.Portlet: Übersicht
[cols="1,3"]
|====
|Einstellung |Erläuterung

| *Zahlungsart*
|Wähle die gewünschte Zahlungsart aus der Dropdown-Liste.

| *Sprache*
|Wähle die gewünschte Zahlungsart aus der Dropdown-Liste.

| *Währung*
|Wähle 

| *Wechselkurs*
|Der Wechselkurs wird angezeigt.

| *Versanddatum*
|Gib ein Datum ein oder wähle über den Kalender eines aus, um alle Aufträge zu suchen, die an diesem Datum erstellt wurden.

| *Versandprofil*
|

| *Paketnummern*
|

| *Herkunft*
|

| *Rückgabedatum*
|

| *Lager
| 

| *Eigner*
|






|====



[[table-portlets]]
.Portlet: Übersicht
[cols="1,3"]
|====
|Einstellung |Erläuterung

// TODO: Beschreibung der Standardansicht, weil alles individualisierbar ist




[#portlet-overview]
Portlet Allgemein
Im Portlet *Allgemein* siehst du...

| *Warenwert netto*
| Der Warenwert netto wird angezeigt.

| *Rechnungsbetrag*
| Der Rechnungsbetrag wird angezeigt.

| *Versandkosten netto*
| Die Versandkosten netto werden angezeigt.

| *MwSt.*
| Die Mehrwertsteuer wird in Euro angezeigt.

| *Artikelmenge*
| Die Anzahl der Artikel wird angezeigt

| *Steuerfreier Betrag*
| Der Steuerfreie Betrag wird angezeigt.

2+^ Portlet Status und Tags

| *Status*
| Der Status der Bestellung wird angezeigt.
| Wähle den Auftragsstatus aus Dropdown-Liste.

| *Tags*
| Wähle den Tag des Auftrags. Es können mehrere Tags per Dropdown-Liste ausgewählt werden.

Auswahl:
* Auftrags-Tag
* Lieferdatum: gesetzt
* Status: Geliefert
* Status: Offen
* Zahlung: bezahlt

| *Adressen*
| Rechnung - Rechnungsadresse und ID
| Lieferung - Lieferadresse und ID
Über die 3 Punkte rechts öffnet sich Bearbeiten

// TODO: Verweis möglich?
Adressangaben
Anrede
Firma (Name 1)
Vorname
Nachname
Zusatz
Adresse 1 (Straße)
Adresse 2 (Hausnummer)
Adresse 3 (Adresszusatz?
Adresse 4 (Frei)
Postleitzahl
Ort
Land - Dropdown
Region/Bezirk - Dropdown

Adressoptionen:
E-Mail
Telefon
Typ: Umsatzsteuernummer, Externe Adress-ID, Gelangensbestätigung, Postnummer, Personennummer, FSK, Geburtstag, Titel, Ansprechpartner, Externe Kunden-ID
eingeben und speichern

2+^ Portlet Übersicht


2+^


2+^


|====

[#order-details]
==== Auftragsdetails

Da der neue Auftrag oder das neue Angebot über die Kontaktübersicht angelegt wird, werden in den Auftragsdetails bereits einige der im Kontakt hinterlegten Daten übernommen. Welche Informationen übernommen werden, hängt davon ab, welche Daten im Kontakt gespeichert sind. Ansonsten greifen die xref:auftraege:auftraege-verwalten.adoc#250[Standardeinstellungen]. Beachte dazu auch <<table-order-details-new-order>>. Alle Angaben in den Auftragsdetails sind Pflichtfelder.

// TODO: alle xref prüfen/anpassen

[[table-order-details-new-order]]
.Neuer Auftrag: Auftragsdetails
[cols="1,3"]
|====
|Einstellung |Erläuterung

|*Rechnungsadresse*
|Die im Datensatz des Kontaktes hinterlegte Rechnungsadresse wird übernommen. Sind mehrere Rechnungsadressen hinterlegt, wird die als primär definierte übernommen. Wenn keine Rechnungsadresse als primäre definiert ist, kann man aus der Dropdown-Liste die gewünschte auswählen. +
Über die Vorschau (icon:visibility[set=material]) gelangst du direkt in den Kontaktatensatz. Die bereits gewählten Einstellungen in den Auftragsdetails gehen nicht verloren.

|*Lieferadresse*
|Wenn du die Option *Wie Rechnung* auswählst, wird die unter *Rechnungsadresse* eingegebene Adresse auch als Lieferadresse übernommen. Ansonsten wird die im Datensatz des Kontaktes hinterlegte Lieferadresse übernommen. Sind mehrere Lieferadressen hinterlegt, wird die als primär definierte übernommen. Wenn keine Lieferadresse als primäre definiert ist, kann man aus der Dropdown-Liste die gewünschte auswählen. +
In der Dropdown-Liste hast du auch die Möglichkeit eine neue Lieferadresse einzugeben und im Kontaktdatensatz zu speichern. Beachte dazu die Erläuterungen in der ausklappbaren Box unterhalb am Ende dieses Abschnitts. +
Über die Vorschau (icon:visibility[set=material]) gelangst du direkt in den Kontaktdatensatz. Die bereits gewählten Einstellungen in den Auftragsdetails gehen nicht verloren.

|*Zahlungsart*
|Wenn im Kontakt eine Zahlungsart definiert ist, zum Beispiel über eine xref:ccrm:kontakte-verwalten.adoc#15[Kundenklasse], ist diese vorausgewählt. Ansonsten kannst du eine Zahlungsart eingeben und dann auswählen. Angeboten werden dir alle Zahlungsarten, die bereits in deinem plentymarkets-System integriert sind. +
Nutzt du eine xref:auftraege:auftraege-verwalten.adoc#295[Auftragsvorlage], wird die Zahlungsart der Auftragsvorlage genommen, sobald du die Vorlage für den Auftrag auswählst. Danach ist die Zahlungsart manuell anpassbar.
// TODO: alle xref prüfen/anpassen

|*Rabatt in %*
|Du kannst hier manuell einen prozentualen Rabatt eingeben, der auf alle Auftragspositionen des Auftrags angewendet wird. Der eingegebene Wert muss zwischen 0 und 100 liegen, Werte im Minusbereich sind nicht erlaubt. +
Es ist ein Rabatt voreingetragen, wenn der Kontakt zu einer Kundenklasse gehört, in der die Option *Standardrabatt für manuelle Aufträge* mit einem Wert gefüllt ist. Du findest diese Option im Bereich xref:crm:kontakte-verwalten.adoc#intable-kundenklasse-rabattart[Rabattart] im Menü *Einrichtung » CRM » Kundenklassen*. Der voreingetragene Wert in den Auftragsdetails ist anpassbar.
// TODO: alle xref prüfen/anpassen

|*Währung*
|Die xref:payment:waehrungen.adoc#30[Systemwährung] ist vorausgewählt. Über die Dropdown-Liste kannst du die Währung für den Auftrag anpassen.

|*Lager*
|Welche Optionen dir angezeigt werden, hängt von den Grundeinstellungen ab, die du für die xref:auftraege:grundeinstellungen.adoc#intable-warehouse-assignment[Zuordnung von Lagern] gewählt hast: +
- Ist *a) pro Auftrag kann ein Lager zugeordnet werden* ausgewählt, kannst du in den Auftragsdetails aus einer Dropdown-Liste ein Lager für den Auftrag auswählen. +
- Ist *b) pro Artikelposition kann ein Lager zugeordnet werden* ausgewählt, wird dir *Abhängig vom Warenbestand* angezeigt. In der nächsten Ansicht werden dem Auftrag Artikel hinzugefügt, dort kannst du dann für jede Variation ein Lager aus einer Dropdown-Liste auswählen.

|*Mandant*
|Wähle aus der Dropdown-Liste den Mandanten aus, für den dieser Auftrag gelten soll. Vorausgewählt ist entweder der Mandant aus den Kontaktdaten oder als nächste Option ein xref:auftraege:auftraege-verwalten.adoc#intable-standard-mandant[Standard-Mandaten], wenn du diesen festgelegt hast.
// TODO: alle xref prüfen/anpassen

|*Eigner*
|Wähle aus der Dropdown-Liste den Eigner für diesen Auftrag aus. Hast du einen xref:auftraege:auftraege-verwalten.adoc#intable-standard-eigner[Standard-Eigner] gesetzt, ist dieser vorausgewählt. Ansonsten werden dir in der Dropdown-Liste nur Eigner angezeigt, die das Benutzerrecht Aufträge zu erstellen und zu bearbeiten haben.

|*Herkunft*
|Wähle aus der Dropdown-Liste die Herkunft für diesen Auftrag aus. Vorausgewählt ist entweder die Herkunft aus den Kontaktdaten oder als nächste Option eine xref:auftraege:auftraege-verwalten.adoc#intable-standard-herkunft[Standard-Herkunft] , wenn du diese festgelegt hast. Darüber hinaus werden nur die xref:auftraege:auftragsherkunft.adoc#[Herkünfte] angezeigt, die aktiv geschaltet sind.

|====

[#shopping-cart]
==== Warenkorb

Am Warenkorb-Symbol (icon:shopping_cart[set=material]) über der Tabelle wird dir die Anzahl der bereits hinzugefügten Artikel angezeigt. Möchtest du während des Hinzufügens von Artikeln den Warenkorb überprüfen oder hinzugefügte Artikel löschen, klicke auf diesen Warenkorb (icon:shopping_cart[set=material]).

Nachdem du alle Einstellungen vorgenommen hast, gehe zum nächsten Schritt weiter indem du auf *Artikel hinzufügen* klickst. Die Auftragsdetails werden gespeichert und du wirst zum nächsten Arbeitsschritt geleitet. In diesem Schritt fügst du dem Auftrag Artikel hinzu.

[#create-orders-manually]
=== Aufträge manuell anlegen

Du kannst Aufträge manuell im System anlegen, z.B. wenn eine Bestellung per Telefon getätigt wird. Es gibt verschiedene Möglichkeiten, die du dafür nutzen kannst:

// TODO: alle xref prüfen/anpassen
* In der xref:auftraege:auftraege-verwalten.adoc#240[Kontaktübersicht]
* In den xref:auftraege:auftraege-verwalten.adoc#210[Kontaktdaten]
* In einem bestehenden xref:auftraege:auftraege-verwalten.adoc#220[Auftrag]
* Über einen xref:auftraege:auftraege-verwalten.adoc#230[Barverkauf]
* In einem bestehenden Angebot

Diese verschiedenen Vorgehensweisen werden nachfolgend beschrieben.

[IMPORTANT]
.E-Mail-Versand
====
Bei manuell angelegten Aufträgen wird keine automatische E-Mail, z.B. als Auftragsbestätigung, an Kund:innen versendet. Grund dafür ist, dass das System nicht wissen kann, wann alle Einstellungen zu diesem Auftrag vorgenommen wurden. Stoße daher den Versand einer E-Mail-Vorlage manuell im Auftrag im Tab xref:auftraege:auftraege-verwalten.adoc#1550[Mail] an.
====

////
Hier ergänzen um das Vorgehen über Kontakt, aus einem Auftrag, über Barverkauf, aus Angebot
////

[#create-order-or-offer-from-contact]
=== beta: Auftrag oder Angebot aus der Kontaktübersicht anlegen

Dieses Kapitel beschreibt das Anlegen von Aufträgen oder Angeboten über die Kontaktübersicht im Menü *CRM » Kontakte*. Hierbei handelt es sich um eine neue Benutzeroberfläche, die zunächst nur in _beta_ zur Verfügung steht und ständig weiterentwickelt wird. Alle anderen Methoden Aufträge anzulegen sind ebenfalls weiterhin möglich.

[#default-settings]
==== Standardeinstellungen vornehmen

Beim Anlegen von Aufträgen und Angeboten über die Kontaktübersicht werden Daten, wie zum Beispiel Adressen oder Mandanten, direkt aus dem Kontakt übernommen, wenn sie dort hinterlegt sind. Die Kontaktdaten haben in der Regel also Priorität. Zusätzlich stehen dir einige Standardeinstellungen zur Verfügung, auf die zurückgegriffen wird, wenn eine Information nicht aus dem Kontakt genommen wird. +
Um die Auftragsanlage zu erleichtern und schneller vorgehen zu können, solltest du zunächst diese Standardeinstellungen festlegen. *_Beachte_*, dass die Standardeinstellungen auch für über diese Benutzeroberfläche angelegte Angebote gelten.

[.instruction]
Gehe folgendermaßen vor, um die Standardeinstellungen vorzunehmen:

. Öffne das Menü *Einrichtung » Aufträge » Auftragstypen » Auftrag [Beta]*.
. Nimm die Einstellungen vor. Beachte dazu die Erläuterungen in <<table-default-settings-order-contact>>.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

[[table-default-settings-order-contact]]
.Standardeinstellungen für die neue Auftragsanlage (beta)
[cols="1,3"]
|====
|Einstellung|Erläuterung

|[#intable-standard-eigner]*Standard-Eigner*
|Wählst du einen Standard-Eigner, ist dieser in den Auftragsdetails des neuen Auftrags oder Angebots standardmäßig vorausgewählt. Der Eigner wird generell nicht aus den Kontaktdaten übernommen.

|[#intable-standard-mandant]*Standard-Mandant*
|Der hier ausgewählte Standard-Mandant ist beim Anlegen des neuen Auftrags oder Angebots vorausgewählt, wenn in den Kontaktdaten kein Mandant hinterlegt ist. Ist in den Kontaktdaten ein Mandant hinterlegt, hat dieser Priorität.

|[#intable-standard-herkunft]*Standard-Herkunft*
|Die hier ausgewählte Standard-Herkunft ist beim Anlegen des neuen Auftrags oder Angebots vorausgewählt, wenn in den Kontaktdaten keine Herkunft hinterlegt ist. Ist in den Kontaktdaten eine Herkunft hinterlegt, hat dieser Priorität.

// TODO: alle xref prüfen/anpassen
|[#intable-standard-vorlage]*Standard-Auftragsvorlage*
|Wählst du eine xref:auftraege:auftraege-verwalten.adoc#295[Auftragsvorlage] als Standard-Auftragsvorlage, ist diese für den neuen Auftrag oder das Angebot standardmäßig vorausgewählt. Die Werte der ausgewählten Auftragsvorlage werden dann automatisch für den Auftrag oder das Angebot übernommen. Es können nur bereits angelegte Auftragsvorlagen ausgewählt werden. +
Standardmäßig ist *Keine Auftragsvorlage vorausgewählt* gesetzt. Wählst du eine Auftragsvorlage als Standard aus und wird diese zu irgendeinem Zeitpunkt gelöscht, wird als Standard für diese Einstellung wieder *Keine* gesetzt.

|[#intable-endpoint-after-completion]*Endpunkt nach Abschluss eines Auftrags*
|Wähle aus, wohin im System du nach Abschließen eines Auftrages geleitet werden möchtest. Du kannst wählen zwischen: +
*Auftragsübersicht des Kontaktes* = Leitet dich zur Auftragsübersicht im Kontaktdatensatz des Kontakts des gerade erstellten Auftrags. Dies ist die Standardeinstellung. +
*Auftragsübersicht* = Leitet dich zur allgemeinen Auftragsübersicht weiter. +
*Detailansicht des neuen Auftrags* = Leitet dich zur Detailansicht des gerade erstellten Auftrags.

|[#intable-shopping-cart-type]*Verwendeter Warenkorbtyp in der Auftragserstellung*
|Wähle aus, welchen Typ von Warenkorb du in der Auftragserstellung nutzen möchtest. Standardmäßig ist der Side cart ausgewählt. Die Funktionen im Warenkorb sind bei beiden Typen gleich. +
*Warenkorb als Side cart* = Der Warenkorb wird seitlich als Overlay dargestellt, wenn man ihn öffnet. +
*Warenkorb als Tabelle (unterhalb der Suchergebnisse)* = Der Warenkorb wird als Tabelle unterhalb der Artikeltabelle (generiert durch die Artikelsuche) dargestellt.

|*Filteroption ‚Nur vorrätige Artikel anzeigen‘ in der Artikelsuche vorausgewählt*
|Aktiviere diese Option, damit sie für die Artikelsuche vorausgewählt ist. Angezeigt werden in den Suchergebnissen dann nur Artikel, die einen physischen Warenbestand haben.

|*Filteroption ‚Nur Vertriebslager anzeigen‘ in der Artikelsuche vorausgewählt*
|Aktiviere diese Option, damit sie für die Artikelsuche vorausgewählt ist. Angezeigt werden in den Suchergebnissen dann nur Artikel, die in Vertriebslagern gelagert werden.

|*Filteroption ‚Nur aktive Artikel anzeigen‘ in der Artikelsuche vorausgewählt*
|Aktiviere diese Option, damit sie für die Artikelsuche vorausgewählt ist. Angezeigt werden in den Suchergebnissen dann nur xref:artikel:checkliste-artikel-anzeige.adoc#100[aktivierte Artikel].
// TODO: alle xref prüfen/anpassen

|*Filteroption ‚Nur Artikel mit gültigem Preis anzeigen‘ in der Artikelsuche vorausgewählt*
|Aktiviere diese Option, damit sie für die Artikelsuche vorausgewählt ist. Angezeigt werden in den Suchergebnissen dann nur Artikel, die einen gültigen Preis hinterlegt haben.

|*Änderung der Mehrwertsteuersätze in der Artikelübersichtstabelle im letzten Schritt der Auftragserstellung erlauben.*
|Durch Aktivierung dieser Option erlaubst du, dass vor dem Abschließen des Auftrages im letzten Schritt xref:auftraege:auftraege-verwalten.adoc#290[Übersicht] der Auftragsanlage Steuersätze geändert werden dürfen. Die Steuersätze richten sich dabei nach der Lieferadresse des Auftrages. +
Diese Option ist standardmäßig deaktiviert. Lass sie deaktiviert, wenn du die Mehrwertsteuersätze in der Übersicht nur sichtbar, aber nicht bearbeitbar lassen möchtest.
// TODO: alle xref prüfen/anpassen

|*Anzeige von hinzugefügten Artikeln im Warenkorb*
|Wähle aus, wie die Artikel zum Warenkorb hinzugefügt werden sollen. Die Standardeinstellung ist *Als eine Auftragsposition, Mengen werden erhöht*. +
*Als separate Auftragspositionen.* = Auch gleiche Artikel werden einzeln hinzugefügt, d.h. jeder Artikel wird in einer eigene Zeile dargestellt. +
*Als eine Auftragsposition, Mengen werden erhöht.* = Gleiche Artikel werden in einer Auftragsposition zusammengefasst und die Menge wird entsprechend angepasst.

|*Bei Auftragserstellung Preise nur im Warenkorb neu ermitteln*
|Durch Aktivierung dieser Option legst du fest, dass Preise von Artikeln nur dann neu ermittelt werden, wenn sie in den Warenkorb gelegt werden. Standardmäßig werden Preise schon in der Artikelsuche innerhalb der Auftragsanlage ermittelt und sind dort auswählbar.

|====


== Auftragsübersicht

Im Menü *Aufträge » Aufträge [Testphase]* steht dir die Übersicht deiner Aufträge zur Verfügung. Die Übersichtstabelle ist durchsuchbar und hat zwei Level. Im ersten Level werden dir grundlegende Auftragsinformationen angezeigt. Im zweiten Level werden dir grundlegende Informationen zu den Auftragspositionen angezeigt. Du kannst die Level ausklappen, indem du auf *Ausklappen* (icon:chevron_right[set=material]) klickst.

////
Auf dieser Handbuchseite erhältst du eine Übersicht über ...

Tabellen individualisieren
Auftragssuche
Auftragspositionen
// TODO: neue Ansicht und weitere Themen

außerdem wird dir erklärt wie du ...
// TODO: Filter und Operatoren
////

== Menüaufbau

Das Menü *Aufträge » Aufträge-UI* ist wie folgt aufgebaut:

image::auftraege:menue-uebersicht.png[]
// TODO: passenden Screenshot erstellen und Ablauf prüfen

* *Navigation*:
Hier navigierst du durch die einzelnen Bereiche des Menüs.
Der aktuell ausgewählte Bereich (blaue Schrift) wird im Hauptfenster rechts angezeigt.
Falls du mehrere Aufträge oder Varianten gleichzeitig offen hast, werden diese untereinander angezeigt.
Klicke auf icon:bars[role="darkGrey"], um die Navigationsleiste ein- und auszublenden.
Die neue Seitennavigation wird automatisch angepasst, wenn sich Einträge verschieben, Einträge entfernt oder hinzugefügt werden.

////
* *Toolbar*:
Hier führst du relevante Aktionen durch. Zum Beispiel:
** xref:artikel:suchen.adoc#100[nach Aufträgen und Varianten suchen].
** xref:artikel:detailansicht.adoc#1000[deine Änderungen an Aufträgen oder Varianten speichern].
////

* *Hauptfenster*:
Hier wird der aktuell geöffnete Bereich angezeigt.
** *Übersicht*:
Wenn du eine Suche ausführst, siehst du die xref:artikel:suchen.adoc#500[Ergebnisse in einer Übersicht].
Die Übersicht liefert Informationen zu den gefundenen Aufträgen auf einen Blick.
Zum Beispiel siehst du ein Bild des Auftrags, ob der ....
//TODO: xref


** *Detailansicht*:
Wenn du einen Auftrag öffnest, werden seine Details im Hauptfenster auf der rechten Seite angezeigt.
Was aber, wenn das Hauptfenster leer ist?
Oder was, wenn du mit der Anordnung der Auftragsdetails nicht zufrieden bist?
Du kannst eine xref:artikel:detailansicht.adoc#200[neue Detailansicht erstellen] und sie an deine Bedürfnisse anpassen.
//TODO: xref
// TODO: Zahnrad
Die Tabellenspalten sind für beide Level konfigurierbar. Beim ersten Öffnen wird dir jeweils die Standardansicht der Tabelle angezeigt. Durch Klicken auf Zahnrad (icon…) öffnet sich das Fenster mit der Auswahl Order table und Order item table. Darüber kannst über *Spalten konfigurieren* (icon:settings[set=material]) wählen, welche Spalten dir in welcher Reihenfolge angezeigt werden. Wähle

[.collapseBox]
.*Spalten konfigurieren*
--

Wenn du die Tabelle einmal angepasst hast, wird diese Auswahl gespeichert. Du kannst das Layout jederzeit ändern. Die zu Verfügung stehenden Spalten findest du in <<tabelle-auftragsuebersicht-auftragsinformationen>> sowie <<tabelle-auftragsuebersicht-auftragspositionen>>. Dort ist zu jeder Spalte auch die Information hinterlegt, ob es sich um eine Standardspalte handelt. Standardspalten werden angezeigt, wenn die Tabelle nicht konfiguriert ist. Gehe wie im Folgenden beschrieben vor, um die Tabelle anzupassen:
//TODO: Link prüfen/anpassen

[.instruction]
Tabelle individualisieren:

. Klicke auf *Spalten konfigurieren* (icon:settings[set=material]).
. Wähle aus, welches Tabellenlevel du konfigurieren möchtest. +
→ Das Fenster *Spalten konfigurieren* öffnet sich.
. Wähle aus, welche Spalten angezeigt werden sollen. Beachte dafür entsprechend <<tabelle-auftragsuebersicht-auftragsinformationen>> oder <<tabelle-auftragsuebersicht-auftragspositionen>>.
. Verschiebe (icon:sort[set=material]) die Spalten, so dass sie in der Reihenfolge angezeigt werden, in der du sie brauchst.
. Klicke auf *Bestätigen*, um deine Auswahl zu speichern.
//TODO: Links prüfen/anpassen

[TIP]
Du kannst die Reihenfolge per Drag-and-drop mit einem Klick auf *Verschieben* (icon:drag_indicator[set=material]) verändern. Durch “Haken setzen oder herausnehmen” kannst du die Anzahl der Spalten verändern.


--

Folgende Informationen werden dir in der Auftragstabelle angezeigt:

[[tabelle-auftragsuebersicht-auftragsinformationen]]
.Auftragsübersicht
[cols="1,3"]
|====
|Einstellung|Erläuterung

|*Sperrstatus*
|Zeigt, ob der Auftrag gesperrt ist oder nicht. Ein Auftrag wird gesperrt, sobald eine Rechnung erzeugt wurde. Eine Gutschrift wird gesperrt, sobald ein Gutschriftsdokument erzeugt wurde. Du kannst den Auftrag oder die Gutschrift entsperren, wenn du einen Stornobeleg für das jeweilige Dokument erzeugst. +
Schloss geöffnet = Entsperrt
Schloss geschlossen =  Reversibel gesperrt.
Diese Spalte ist eine Standardspalte.

|*Auftragstyp*
|Zeigt dir den Auftragstyp des Auftrags an. Zum Beispiel Gutschrift, Retoure oder Auftrag. +
Diese Spalte ist eine Standardspalte.

|*Auftrags-ID*
|Die ID des Auftrags wird angezeigt. Durch Klicken auf die ID öffnet sich die Detailansicht des Auftrags. Dort stehen dir Bearbeitungsmöglichkeiten für den Auftrag zur Verfügung. +
Diese Spalte ist eine Standardspalte.

|*Kontakt*
|Der Kontakt +
// TODO: nachfragen/probieren

|*Kontakt-ID*
|Die ID des Kontakts, d.h. der Käufer:in, wird angezeigt. Damit eine ID angezeigt wird, muss ein Kontaktdatensatz für diese Käufer:in angelegt sein. Handelt es sich um eine Gastbestellung, wird *Gast* angezeigt. +
Durch Klicken auf die ID wird der Kontaktdatensatz geöffnet. +
Dies ist eine Standardspalte.

|*Mandant*
|Der Mandant, über den der Auftrag erstellt wurde, wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Mandanten-ID*
|Die ID des Mandanten… wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Standort*
|Der Standort, zu dem der Mandant gehört über den der Auftrag erstellt wurde, wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Standort-ID*
|Die ID des Standortes, zu dem der Mandant gehört, über den der Auftrag erstellt wurde, wird angezeigt. +
Dies ist eine optionale Spalte.

|*Artikelmenge*
| Zeigt die Artikelmenge aller Artikel im Auftrag an. +
Diese Spalte ist eine Standardspalte.

|*Auftragssumme (netto)*
|Die Nettogesamtsumme des Auftrags wird in der Auftragswährung angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Auftragssumme (brutto)*
|Die Bruttogesamtsumme des Auftrags wird in der Auftragswährung angezeigt. +
Diese Spalte ist eine Standardspalte.

|*USt.*
|Der auf den Auftrag angewendete Umsatzsteuersatz wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Status*
|Der Bearbeitungsstatus des Auftrags wird durch einen farbigen Punkt dargestellt, dahinter Zahl Strich Status, wie Gutschrift, Storniert. +
Diese Spalte ist eine Standardspalte.

|*Warenausgangsdatum*
|Das Datum, an dem die Waren ausgebucht wurden, wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Auftragsdatum*
|Das Datum, an dem der Auftrag ins System kam, wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Zahlungsart*
|Die für diesen Auftrag gewählte Zahlungsart wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Rechnungsnummer*
|Wurde bereits eine Rechnung für den Auftrag erstellt, wird die Rechnungsnummer angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Zahlungsstatus*
|Der Zahlungsstatus des Auftrags wird angezeigt. +
Ausstehend = Der vollständige Betrag ist noch offen. +
Vorausbezahlt = Der Betrag oder ein Teilbetrag wurde bereits im Voraus bezahlt. +
Teilbezahlt = Der Betrag wurde teilweise bezahlt. +
Bezahlt = Der Betrag wurde vollständig bezahlt. +
Überbezahlt = Es wurde mehr als der ausstehende Betrag gezahlt. +
Diese Spalte ist eine Standardspalte.
// TODO: prüfen

|*Zahlungsdatum*
|Das Datum, an dem die Zahlung für diesen Auftrag eingegangen ist, wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Währung*
|Die Währung des Auftrags wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Lieferland*
|Das Land, in das dieser Auftrag versendet wird, wird angezeigt. Das angezeigte Lieferland wird der angegebenen Lieferadresse entnommen. +
Diese Spalte ist eine Standardspalte.

|*Lieferdatum*
|Das voraussichtliches Lieferdatum des Auftrags wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Quelle*
|Zeigt an, wie der Auftrag erstellt wurde, z.B. manuell oder über REST. ??? Auswahl ManualEntry oder webshop +
Diese Spalte ist eine Standardspalte.

|*Eigner*
| Die Eigner:in des Auftrags wird angezeigt. +
Dies ist eine optionale Spalte.

|*Herkunfts-ID*
| Die ID der Herkunft, über die der Auftrag erstellt wurde, wird angezeigt. Die <<Link zur Seite Auftragsherkunft einfügen#, Auftragsherkunft>> ist der Verkaufskanal, über den ein Auftrag generiert wird. +
Dies ist eine optionale Spalte.
// TODO: Link einfügen

|*Herkunft*
| Die Herkunft +
Dies ist eine optionale Spalte.
// TODO: ergänzen

|*Lager*
|Das Hauptlager des Auftrags wird angezeigt.  +
Diese Spalte ist eine Standardspalte.

|*Lager-ID*
| Die ID die Hauptlagers wird angezeigt. +
Dies ist eine optionale Spalte.

|*Versandkosten*
|Die Versandkosten des Auftrags werden angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Gewicht [Kg]*
| Das Gesamtgewicht des Auftrags wird angezeigt. +
Dies ist eine optionale Spalte.

|*Referenz*
| Die ID des referenzierten Auftrags wird angezeigt. Durch Klicken auf die ID öffnet sich der referenzierte Auftrag. +
Dies ist eine optionale Spalte.

|*Rechnungsadresse*
|Die Rechnungsadresse wird angezeigt.

|*Lieferadresse*
|Die Lieferadresse wird angezeigt.

// TODO: nicht in der Liste - prüfen
|*Auftragsherkunft*
|Die Auftragsherkunft, über die der Auftrag  erstellt wurde, wird angezeigt. Die <<Link zur Seite Auftragsherkunft einfügen#, Auftragsherkunft>> ist der Verkaufskanal, über den ein Auftrag generiert wird. +
Diese Spalte ist eine Standardspalte.
// TODO: Link

|*Kontaktname*
|Der Vor- und Nachname des Kontaktes bzw. der Käufer:in wird angezeigt. +
Dies ist eine optionale Spalte.

|*Mandanten-ID*
|Die ID des Mandanten, über den der Auftrag erstellt wurde, wird angezeigt. +
Dies ist eine optionale Spalte.

|*Tags*
|Dem Auftrag zugeordnete Tags werden angezeigt. +
Dies ist eine optionale Spalte.

|*Auftragsstatus*
|Der aktuelle <<Link zur Seite Auftragsstatus einfügen#, Auftragsstatus>> des Auftrags wird angezeigt. +
Diese Spalte ist eine Standardspalte.
// TODO: Link


|====

Klappst du den zweiten Level aus (icon:chevron_right[set=material]), werden dir Informationen zu den Auftragspositionen angezeigt.


[[tabelle-auftragsuebersicht-auftragspositionen]]
.Auftragspositionen
[cols="1,3"]
|====
|Einstellung|Erläuterung

|*Menge*
|Die bestellte Menge der Auftragsposition wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Variantennr.*
|Die Variantennummer der Auftragsposition wird angezeigt. +
Dies ist eine optionale Spalte.

|*Variantenname*
|Der Variantenname der Auftragsposition wird angezeigt. +
Dies ist eine optionale Spalte.

|*Varianten-ID*
|Die Varianten-ID der Auftragsposition wird angezeigt.  Durch Klicken auf die ID wird die Variation geöffnet. +
Diese Spalte ist eine Standardspalte.

|*Artikelname*
|Der Artikelname der Auftragsposition wird angezeigt. +
Dies ist eine optionale Spalte.

|*Attribute*
|Die Attribute der Auftragsposition werden angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Nettopreis*
|Der Nettopreis der Auftragsposition wird angezeigt.  +
Diese Spalte ist eine Standardspalte.

|*Bruttopreis*
|Der Bruttopreis der Auftragsposition wird angezeigt.  +
Diese Spalte ist eine Standardspalte.

|*Artikel-ID*
|Die Artikel-ID der Auftragsposition wird angezeigt. Durch Klicken auf die ID wird der Artikel geöffnet. +
Dies ist eine optionale Spalte.

|*Rabatt [%]*
| Der für die Auftragsposition gewährte Rabatt wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Aufpreis gesamt*
|Die Summe der Aufpreise der Bestelleigenschaften der Auftragsposition werden angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Gesamtbetrag (netto)*
|Die Nettogesamtsumme der Auftragsposition wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Gesamtbetrag (brutto)*
|Die Bruttogesamtsumme der Auftragsposition wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Lager*
|Das Lager der Auftragsposition wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*USt. [%]*
|Der Umsatzsteuersatz der Auftragsposition wird angezeigt. +
Diese Spalte ist eine Standardspalte.

|*Externe Artikel-ID*
|Die externe Artikel-ID wird angezeigt. +
Dies ist eine optionale Spalte.

|*Externe Auftragspositions-ID*
|Die vom Marktplatz übermittelte externe Auftragspositions-ID wird angezeigt. +
Dies ist eine optionale Spalte.


|====

[#order-search]
== Aufträge suchen

Mit der Auftragssuche kannst du sowohl alle Aufträge auflisten als auch bestimmte Aufträge gezielt finden. Beim Öffnen des Menüs wird standardmäßig keine Suche ausgeführt. Du musst die Suche erst ausführen, um Ergebnisse angezeigt zu bekommen. +

//// 
prüfen: Zwei Filter sind für diese initiale Suche standardmäßig gesetzt. Der Filter *Auftragstyp* steht auf ALLE, der Filter *Erstellungsdatum* ist standardmäßig für die letzten zwei Monate gesetzt. +
////

Du kannst Filter entfernen, wenn du sie nicht nutzen möchtest. Du kannst auch weitere Sucheinstellungen vornehmen, um die Suche einzuschränken.

Du hast mehrere Möglichkeiten, die Suche zu nutzen. Du kannst einen Wert im Suchfeld eingeben und dann den entsprechenden Filter auswählen. Bei Eingabe einer Zahl oder eines Buchstabens werden dir mögliche Filter vorgeschlagen. Gib den Wert vollständig ein und wähle den passenden Filter aus den Vorschlägen. Wiederhole dies, um Filter miteinander zu kombinieren. Klicke auf *Suchen* (icon:search[set=material]), um die Suche auszuführen. +

. Öffne das Menü *Aufträge (Testphase) » Aufträge*.
.. *_Möglichkeit 1_*: Klicke auf icon:search[role="darkGrey"], um direkt eine Liste aller Aufträge zu sehen.
.. *_Möglichkeit 2_*: Gib eine Zahl in das Suchfeld ein und klicke auf einen der automatischen Vorschläge.
Klicke dann auf icon:search[role="darkGrey"], um die Suche auszuführen.
.. *_Möglichkeit 3_*: Klicke auf icon:tune[set=material], um die Suchergebnisse mit Hilfe von Filtern einzugrenzen.

Möchtest du erst einen Filter aus der Filterliste wählen, klicke auf *Filter* (icon:tune[set=material]). Die verfügbaren Filter werden dir angezeigt. Gib einen Wert im gewünschten Filter ein. Hast du alle benötigten Filter gesetzt, klicke auf *Suchen*. +
Möchtest du einen gesetzten Filter löschen, entferne den Chip, indem du auf x klickst. In <<table-order-search-filters>> werden die verfügbaren Filter erläutert.
// TODO: Link prüfen/anpassen

Zudem kannst du mit der Komponente *Gespeicherte Filter* (icon:bookmarks[set=material]) ausgewählte Filter in der UI speichern. Gespeicherte Filtersets sind dann in dieser Komponente bei jedem Öffnen des Menüs auswählbar, ähnlich wie Lesezeichen. Jede:r Benutzer:in kann eigene Filter festlegen.

// TODO: Text prüfen - Datum Überschrift
Filtert nach einem bestimmten Datum, das du hier über den Kalender icon:today[set=material] wählen kannst. Dieser Filter ermöglicht es dir somit, Warenbestand zu einem bestimmten Zeitpunkt zu exportieren. +
*_Hinweis:_* Mit dem Datumsfilter kann lediglich die Bestandsmenge pro Lager, nicht aber pro Lagerort ausgegeben werden. Aktiviere deshalb die folgenden Datenfelder _nicht_: *Lagerort*, *Lagerort-ID*, *Lagerortmenge*, *Lagerortname*. +
Die Bestandsmenge für das gewählte Datum wird anschließend im Datenfeld *Physischer Bestand* des Ordners *Warenbestand* angezeigt.


=== Überschrift

Hier wird erklärt, welche Filter und Operatoren zur Verfügung stehen und je nach deinem Bedarf gewählt werden können.

[.instruction]
Filter wählen: 

. Öffne *Aufträge » Aufträge (Testphase)*.
. Gehe auf das Symbol Filter und öffne durch Klick auf das Symbol die Filterauswahl.
. neu: Viele Filter haben Operatoren, um die Auswahl zu verfeinern.
. Gehe auf *Standardansicht » Symbol Ansicht bearbeiten » Neue Ansicht erstellen* (Icon).
. Gib der neuen Ansicht einen *Namen* und gehe auf speichern (icon:save[role="green"]), um eine neue Ansicht zu erstellen.
→ Die *Neue Ansicht* wurde erfolgreich erstellt, wenn sich ...
. Öffne das Portlet *Auftragsübersicht* und wähle deine neue Ansicht.
. Klicke auf Filter-Einstellungen
→ Es öffnet sich die zweispaltige Filterauswahl
. Öffne die gewünschte Gruppe innerhalb der *Verfügbaren Filter*.
→ Die Auswahl öffnet sich.


=== Nach Aufträgen filtern

Wenn du eine Suche ausführst, siehst du deine gewählten Filter oben als Chips dargestellt. Die Filter in der Auftragssuche sind nun MyView-fähig und können per Drag & Drop von *Verfügbare Filter* in *Angezeigte Filter* verschoben werden. Auch die Reihenfolge innerhalb der Spalten kann per Drag & Drop geändert werden.

Um voreingestellte Filter zu sehen oder auszuwählen, gehe folgendermaßen vor.

[.instruction]
Nach Aufträgen filtern:

. Öffne das Menü *Aufträge » Aufträge (Testphase)*.
. Gehe in die Suchleiste und klicke auf den Filter (icon:tune[set=material]). +
→ Die Filtereinstellungen werden geöffnet..
. Wähle Filter, um nur ausgewählte Daten in der Auftragsübersicht zu sehen. Die Auswahl der Filter kann verändert werden.
. Klicke auf *SUCHEN*. +
→ Du erhältst eine Liste der gefilterten Daten.

// TODO: Filter weiterhin prüfen,Screenshots

=== Filteransicht anpassen

Die Filteransicht entspricht nicht deinen Vorstellungen und du möchtest diese gerne auf deine Bedürfnisse anpassen? Über den Bearbeitungsmodus kannst du die Ansicht beliebig verändern.

[.instruction]
Filteransicht anpassen:

. Öffne das Menü *Aufträge » Aufträge [Testphase]*.
. Klicke auf *Ansicht bearbeiten* (icon:design_inline_edit[set=plenty]). +
→ Der Bearbeitungsmodus wird geöffnet und die Standardansicht der Filter wird angezeigt.
. Klappe rechts die *Einstellungen* auf.
. Nimm die Einstellungen vor. Beachte dazu die Erläuterungen in <<table-filter-settings>>.

////
default setting: Status, Typ, Auftragseingang, Warenausgang, Mandant (Shop), Zahlungsstatus, Eigner, Dokument, Zahlungseingang 
////

==== Angezeigte Filter wählen

Im Bearbeitungsmodus unter *Einstellungen » Filter-Einstellungen* werden dir die Filter in den Spalten *Verfügbare Filter* und *Angezeigte Filter* angezeigt. Entscheide selbst, welche Filter in der Ansicht sichtbar sein sollen.

[[table-name]]
.Verfügbare und Angezeigte Filter in der Auftragssuche
[cols="1,3"]
|====
|Einstellung |Erläuterung

|*Verfügbare Filter*
|In der linken Spalte werden alle verfügbaren Filter angezeigt. +
Hinweis: Die Filter sind in *Grundlegende*, *Datum*, *Status*, *Artikel*, *Kontakt* und *Marktplatz* gruppiert. Klappe die jeweilige Gruppe auf, um die einzelnen Filter zu sehen und zu wählen.

|*Angezeigte Filter*
|In der rechten Spalte werden die ausgewählten Filter angezeigt.


[.instruction]
Angezeigte Filter wählen:

. Öffne das Menü *Aufträge » Aufträge [Testphase]*.
. Klicke auf *Ansicht bearbeiten* (icon:design_inline_edit[set=plenty]). +
→ Der Bearbeitungsmodus wird geöffnet.
. Klappe die Einstellungen auf, um die *Verfügbaren Filter* und die *Angezeigten Filter* zu sehen.
. Verschiebe die Filter, die angezeigt werden sollen, per Drag & Drop vom Bereich *Verfügbare Filter* in den Bereich *Angezeigte Filter*.
*_Tipp:_* Ziehe die Filter in der Spalte *Angezeigte Filter* an die gewünschte Stelle und passe so die Reihenfolge beliebig an.
. *Speichere* (icon:save[role="green"]) die Einstellungen. +
→ Die ausgewählten Filter werden in der Auftragsübersicht angezeigt. +
*_Tipp:_* Wenn dir Filter fehlen, kannst du sie über die oben beschriebenen Schritte ergänzen.
. Klicke auf icon:delete[set=material], um einen nicht benötigten Filter zu schließen. +
→ Der Filter wird dann wieder im Bereich *Verfügbare Filter* angezeigt.
. Klicke auf icon:plus[role="darkGrey"], um einen *Verfügbaren Filter* in den Bereich *Angezeigte Filter* zu verschieben.


[[table-order-search-filters]]
.Verfügbare Filter in der Auftragssuche 
[cols="1,3"]
|====
|Einstellung |Erläuterung

// TODO: wie kann man die Filter am besten darstellen? Jetzt: Übergeordnet Gruppe, dann jew. Filter, dann Operatoren dazu; geplant: für ausgewählte Filter in der Ansicht sollen es noch 3 Spalten geben statt wie jetzt 2.

2+^| *Grundlegende*

| *Auftrags-ID*
|Gib eine oder mehrere Auftrags-IDs ein, um diese konkreten Aufträge zu suchen.

*_Hinweis_*:
Mehrere IDs müssen durch Kommas getrennt werden.
Beispiel: `101, 102, 103`

| *Externe Auftragsnummer*
|Gib eine Externe Auftragsnummer ein, um Aufträge zu suchen.

| *Tag*
|Wähle einen Tag aus der Dropdown-Liste, um alle Aufträge mit diesem Tag oder diesen Tags zu suchen. Es stehen folgende Tags zur Verfügung: Option leer, Auftrags-Tag, Lieferdatum: gesetzt, Status: geliefert, Status: offen, Zahlung: bezahlt.
// TODO: xref an entsprechende Stelle
*Ist gleich (=)*
*Ist in (IN)*

| *Lager*
|Wähle eine Lager aus der Dropdown-Liste, um alle Aufträge aus einem oder mehreren Lagern zu suchen.
*Ist gleich (=)*
*Ist in (IN)*

| *Eigner*
|Wähle einen Eigner aus der Dropdown-Liste. +
*Ist gleich (=)* +
*Ist in (IN)*

| *Mandant (Shop)*
|Wähle den Mandant (Shop) aus, dessen Aufträge gefiltert werden sollen. +
// TODO: prüfen Eine Mehrfachauswahl ist möglich.
*Ist gleich (=)* +
*Ist in (IN)*

| *Auftragstyp*
|Wähle einen Auftragstyp aus der Dropdown-Liste, um alle Aufträge dieser Art zu suchen.
xref:auftraege:auftraege-verwalten.adoc[Aufträge verwalten].

| *Dokumentennummer*
|Gib eine Dokumentennummer ein.

| *Dokumentart*
|Wähle eine Dokumentart aus der Dropdown-Liste. 
// TODO: xref hinzufügen zu Auftragsdokumente
Es stehen folgende Dokumentenarten zur Verfügung: Rechnung, Externe Rechnung, Stornobeleg Rechnung, Gutschrift, Externe Gutschrift, Stornobeleg Gutschrift, Korrekturbeleg, Gelangensbestätigung, Mahnschreiben, Storno Mahnschreiben, Proformarechnung, Sammelrechnung, Sammelgutschrift, Reparaturschein, Abhollieferung, Angebot, Lieferschein, Bestellbestätigung, Rücksendescheine.

| *Zahlungsstatus*
|Wähle einen Zahlungsstatus aus der Dropdown-Liste, um alle Aufträge mit diesem Zahlungsstatus zu suchen. Es stehen die folgenden Zahlungsstatus zur Verfügung:
Ausstehend, Vorausbezahlt, Teilbezahlt, Bezahlt, Überbezahlt.
// TODO: Verweis xref  - hinzufügen

| *Hauptauftrag ausschließen*
|Wähle in der Dropdown-Liste, ob bei der Suche auch Hauptaufträge mit ausgegeben werden sollen oder nicht. Dies bezieht sich z.B. auf die Suche von Lieferaufträgen. Wähle die leere Option, *Ja* oder *Nein*. +
*Ja* = Es werden keine Hauptaufträge in den Ergebnissen ausgegeben. +
*Nein* = Hauptaufträge werden in den Ergebnissen auch ausgegeben.

| *Express-Lieferung*
|wähle, ob die Lieferung als Express-Lieferung versendet werden soll.
Wähle die leere Option (Alle), *Ja* oder *Nein*.

| *Gültige Rechnung*
|Wähle die leere Option (Alle), *Ja* oder *Nein*.

| *Zahlungsart*
|Wähle eine oder mehrere Zahlungsarten aus der Dropdown-Liste, um nur Aufträge mit dieser Zahlungsart oder diesen Zahlungsarten zu filtern.

| *Paketnummer*
|Gib eine Paketnummer ein. +
*Ist in (IN)*
*Vorhanden ()*

| *Status*
|Wähle einen Status aus der Dropdown-Liste, um alle Aufträge mit diesem Status zu suchen.

| *Versandart*
|Wähle aus der Dropdown-Liste eine Option oder beide Optionen: DHL, DHL Shipping.

| *Storniert*
|Wähle, ob ein Auftrag storniert wurde. +
Wähle die leere Option, *Ja* oder *Nein*.

| *Rechnungssumme (Systemwährung)*
|Gib die Rechnungssumme in der Systemwährung ein.
*Ist gleich (=)*
*Ist kleiner-gleich (<=)*
*Ist größer-gleich (>=)*
*Ist zwischen ([])*

| *Verkaufter Gutschein*
|Wähle,
IN (grau, keine andere Option)

| *Eingelöster Gutschein*
|Wähle,
IN (grau, keine andere Option)

////
alte UI: Gutschein-Code: Alle, eingelöst, verkauft 

als Tabelle
Operatoren:

*Ist in (IN)*
IN = mehrfach möglich
= genau gleich
≈ ungefähr; als Platzhalter, Eingabe z.B. Bau* oder *ab*, im Englischen „wildcard character“, ist ein Sonderzeichen, das ein oder mehrere andere Zeichen darstellt. Die am häufigsten verwendeten Platzhalterzeichen sind das Sternchen (*)

wenn nichts gewählt, leere Option, dann ALLE - siehe alte UI
IN grau heißt keine andere Option
IN schwarz heißt anderes wählen

*Ist gleich (=)* heißt, der Wert muss genau gleich sein
= Ist gleich. Beispiel: Suche nach xy mit der ID 10.
Hinweis: mehrere IDs...

Ist kleiner

*Ist kleiner-gleich (<=)* heißt, der Wert muss gleich oder kleiner sein
<= Ist kleiner oder gleich. Beispiel: Suche nach allen xy, deren IDs kleiner oder gleich 10 sind, z.B. 7,8,9,10.

Ist größer

*Ist größer-gleich (>=)* heißt, der Wert muss gleich oder größer sein
>= Ist größer oder gleich. Beispiel: Suche nach allen xy, deren IDs größer oder gleich 10 sind, z.B. 10,11,12,13.

*Ist zwischen ([])* heißt, der Wert liegt zwischen x und y
////

2+^| *Datum*

2+^| Über den Filter *Datum* kannst du einen Zeitpunkt wählen. Eine Mehrfachauswahl ist möglich. Wähle zusätzlich aus der Dropdown-Liste aus, ob du nach *Erstellungsdatum*, *Auftragseingang*, *Warenausgang* oder *Zahlungseingang* filtern möchtest.

Für alle Filter bei *Datum* gilt die Auswahl: 
*Ist gleich (=)*
*Ist kleiner-gleich (<=)*
*Ist größer-gleich (>=)*
*Ist zwischen ([])*

| *Erstellungsdatum*
|Gib ein Datum ein oder wähle ein Datum über den Kalender, um alle Aufträge zu suchen, die an diesem Datum erstellt wurden. +

| *Auftragseingang*
|Gib ein Datum ein oder wähle ein Datum über den Kalender, um alle Aufträge zu suchen, die an diesem Datum eingegangen sind. +

| *Zahlungseingang*
|Wähle ein Datum durch Klick auf (icon:today[set=material]).

| *Warenausgang*
|Gib ein Datum ein oder wähle ein Datum über den Kalender, um alle Aufträge zu suchen, die an diesem Datum verschickt wurden. +
// TODO: Wohin damit? Alle, Nicht gebucht, gebucht, Heute, Gestern


2+^| *Status*

| *Status*
|Wähle einen Status aus der Dropdown-Liste, um alle Aufträge mit diesem Status zu suchen. +
Wähle 
*Ist gleich (=)*
*Ist kleiner-gleich (<=)*
*Ist größer-gleich (>=)*
*Ist zwischen ([])*
*Ist in (IN)*

| *Mahnstufe*
|Wähle eine Stufe oder mehrere Stunden von 1 und 4 aus der Dropdown-Liste. +
*Ist in (IN*)
*Vorhanden ()*
//// 
Wähle die leere Option, *Ja*, *Nein*.
* *Ja* = Nur … werden in den Suchergebnissen angezeigt.
* *Nein* = Nur … werden in den Suchergebnissen angezeigt.
Alle, keine, Symbole 1-4
////

| *Versanddatum*
|Wähle aus der Dropdown-Liste.
// TODO: Auswahl: Vorhanden, Nicht vorhanden, ...

2+^| *Artikel*

| *Variantennummer*
|Gib eine Variantennummer ein, um Aufträge zu suchen. +
*IN*

| *Artikeldaten*
|Gib Artikeldaten ein, um nach Aufträgen zu suchen. +
*Enthält (≈)*

| *Varianten-ID*
|Gib eine oder mehrere Varianten-IDs ein, um Aufträge zu suchen, die diese Varianten enthalten. +
*IN*

| *Artikel-ID*
|Gib eine oder mehrere IDs ein, um nach den Artikeln mit diesen IDs zu suchen. +
*IN*

| *Hersteller*
|Wähle
Mehrfachauswahl

| *Seriennummer*
|Wähle
Eingabe

2+^| *Kontakt*

| *Kontaktdaten*
|Gib ein Suchwort ein, um nach dem entsprechenden Kontakt zu suchen.

| *Kundenklasse*
| Wähle
Mehrfachauswahl

| *Lieferland*
|Gib
Mehrfachauswahl

| *Rechnungsland*
|Gib
Mehrfachauswahl

| *Packstation*
|Gib
Auswahl: Alle, Ja, Nein


// TODO: Erklärung Operatoren wo und wie
 *Ist Gleich (=)*

Beispiel: Suche nach der Variante mit dem Barcode 012345678905.

 *Enthält (≈)*

Beispiel: Suche nach allen Varianten, deren Nummern die Zahl 0123 enthalten, z.B. [.underline]##0123##45678905, 9876[.underline]##0123##6426, 054845[.underline]##0123##0.

2+^| *Marktplatz*

| *eBay Plus*
|Wähle die leere Option, *Ja* oder *Nein*.
* *Ja* = Nur … werden in den Suchergebnissen angezeigt.
* *Nein* = Nur … werden in den Suchergebnissen angezeigt.
// TODO: Erklärung bzw. Auswirkung ja/nein

| *Herkunft*
|Wähle 0, eine oder mehrere Herkünfte aus der Dropdownliste.

| *Amazon*
|Wähle das Lieferziel/Datum aus der Dropdownliste.
|Wähle *Ist in* (IN) oder *Vorhanden* (Symbol).

| *eBay-Konto*
| Wähle
Auswahl

|====

// TODO: aus alter UI noch: Click&Collect, eBay Plus,


[#save-current-filter]
=== Aktuelle Filter speichern

Wenn du eine Suche mit Filtern ausführst, siehst du deine gewählten Filter oben als Chips dargestellt. Diese Filter kannst du speichern, um sie in Zukunft schneller und einfacher wieder verwenden zu können. Du kannst entweder einen Filter direkt beim Erstellen als Standard festlegen (Kugel nach rechts schieben, wird blau) oder du legst den Filter nachträglich aus der Übersicht heraus als Standard fest (auf Sternsymbol klicken *Als Standard festlegen*).
// TODO: Kugel/Sternsymbol richtig formulieren
// TODO: Screenshots wo sinnvoll

[.instruction]
Aktuelle Filter speichern:

. Öffne das Menü *Aufträge » Aufträge [Testphase]*.
. Gehe in die Suchleiste. 
. Wähle die gewünschten Filter und gebe die entsprechenden Daten (Zahlen, Buchstaben,...) ein.
. Führe die Suche aus.
. Klicke auf *Gespeicherte Filter* (icon:bookmarks[set=material]).
. Klicke auf *Aktuellen Filter speichern* (icon:bookmark_border[set=material]). +
→ Das Fenster *Filter speichern* öffnet sich.
. Vergib einen *Filternamen*.
. Entscheide, ob
** das Filterset als Standard-Filterset genutzt werden soll (icon:toggle-on[role="blue"]) (Als Standard festlegen).
** das Filterset für alle Benutzer:innen zur Verfügung stehen soll (icon:toggle-on[role="blue"]) (Filter für alle Benutzer erstellen).
. Klicke auf *SPEICHERN*.
→ Der Filter erscheint nun unter *Gespeicherte Filter* (icon:bookmarks[set=material]). +

*_Tipp:_* Wenn dir Filter fehlen, kannst du sie über die oben beschriebenen Schritte ergänzen.



[#use-saved-filters]
=== Gespeicherte Filter anwenden

[.instruction]
Gespeicherte Filter anwenden:

. Klicke auf *Gespeicherte Filter* (icon:bookmarks[set=material]).
. Klicke auf einen bereits erstellten Filter. +
→ Die Suche wird ausgeführt und die verwendeten Filtereinstellungen werden oben als Chips dargestellt.


// TODO: prüfen [#order-overview-single-actions]
== Aufträge in der Übersicht bearbeiten

In der Auftragsübersicht stehen dir für Aufträge verschiedene Bearbeitungsfunktionen zur Verfügung. Diese ermöglichen eine schnelle Bearbeitung, ohne in die Detailansicht eines Auftrags gehen zu müssen. Du kannst entweder <<LINK#, einzelne Aufträge>> bearbeiten oder über die <<LINK#, Gruppenfunktion>> mehrere Aufträge gleichzeitig bearbeiten. +
In der Detailansicht eines Auftrags stehen dir umfassendere Funktionen zur Verfügung. Zudem kannst du die Detailansicht eines Auftrags individuell gestalten. Durch die konfigurierbare myView-Benutzeroberfläche kannst du bestimmen, welche Informationen dir in welcher Struktur angezeigt werden. Mit diesem besseren Überblick wird deine Auftragsbearbeitung auch effizienter. Nach einmaliger Individualisierung bleiben deine Seiten so bestehen, wie du sie eingerichtet hast. Du kannst auch mehrere Ansichten erstellen und zwischen diesen wecheln.

// TODO: prüfen: Struktur; Detailansicht Auftrag wo einfügen?; [#order-overview-single-functions]

=== Einzelne Bearbeitungsfunktionen

Schon in der Auftragsübersicht stehen dir Bearbeitungsfunktionen für Aufträge zur Verfügung. Das bedeutet, dass du für die wichtigsten Schritte in der Auftragsbearbeitung nicht extra in die Detailansicht eines Auftrags gehen musst. So ermöglichen die Funktionen eine schnelle Bearbeitung von Aufträgen mit wenigen Klicks.

Beachte, dass nur die Funktionen angezeigt werden, die auf diesen Auftrag angewendet werden können und für die die Benutzer:in die Rechte hat.

[.instruction]
.Einzelfunktion für Auftrag nutzen:

. Suche den Auftrag, den du bearbeiten möchtest.
. Klicke auf das Kontextmenü (icon:more_vert[set=material]) am Ende der Zeile. +
→ Dadurch öffnet sich ein Overlay mit den für den Auftrag verfügbaren Funktionen.
. Wähle die Funktion aus, die du auf den Auftrag anwenden möchtest.


[[table-single-functions]]
.Einzelne Bearbeitungsfunktionen für Aufträge
[cols="1,3"]
|====
|Einstellung |Erläuterung

| *Dokument erstellen*
|Mit der Funktion *Dokument erstellen* (icon:note_add[set=material]) erstellst du für den Auftrag ein Dokument. In der Auswahl werden dir nur die Dokumente angezeigt, die du für diesen Auftrag erstellen kannst. Wurde z.B. schon eine Rechnung für diesen Auftrag erstellt, steht dir Rechnung nicht mehr zur Auswahl, dafür aber eine Rechnungsstornierung.

| *Warenausgang buchen*
|Mit der Funktion *Warenausgang buchen* (icon:output[set=material]) buchst du für den Auftrag den Warenausgang sofort. Das Warenausgangsdatum und die Uhrzeit werden dir in einem Fenster angezeigt, sobald du auf diese Funktion klickst.

| *Referenzierte Bestellungen anzeigen*
|Mit der Funktion *Referenzierte Bestellungen anzeigen* (icon:account_tree[set=material]) kannst du dir zu diesem Auftrag gehörende andere Aufträge anzeigen lassen. Bei einer Retoure z.B. den dazugehörigen Originalauftrag. Die Aufträge werden dir in einem Fenster angezeigt, sobald du auf diese Funktion klickst.

|*Zahlung buchen*
|Mit der Funktion *Zahlung buchen* (icon:credit_card[set=material]) fügst du dem Auftrag eine manuelle Zahlung hinzu. Durch Klicken auf diese Funktion öffnet sich das Bearbeitungsfenster *Zahlung buchen*, in dem du die erforderlichen Einstellungen treffen kannst.

// TODO: überarbeiten; Tabelle in Tabelle?
. Die Auftrags-ID wird angezeigt.
. Der Betrag wird angezeigt, ist aber editierbar.
. Wähle durch Klick auf *Haben/Soll* die gewünschte Option aus. Voreingestellt ist Haben.
. Wähle durch Klick auf *Währung* per Dropdown die gewünschte Währung aus. Voreingestellt ist EUR.
. Der Wechselkurs wird angezeigt, ist editierbar.
. Der Verwendungszweck wird angezeigt. Voreingestellt ist … 
. Bei Zahlungseingang wird das aktuelle Datum angezeigt. Durch Klick auf das Kalendersymbol kann das Datum geändert werden.
. Klicke auf *Ausführen* (icon…), um die Angaben zu bestätigen. 


|*Auftrag löschen*
|Mit der Funktion *Auftrag löschen* (icon:delete[set=material]) löschst du den Auftrag. Beachte, dass du gut überprüfst, ob du den Auftrag wirklich löschen kannst und solltest. Generell sollten Aufträge nicht gelöscht werden. Durch die Verknüpfung mit Artikeln, Versandeinstellungen und weiteren Funktionen, wie Stornierungen und Retouren, kann es nach dem Löschen zu Fehlern an den Verknüpfungspunkten kommen. Neu angelegte Aufträge können jedoch gelöscht werden. +
Beachte auch, dass nicht alle Aufträge gelöscht werden können. Folgendes verhindert das Löschen von Aufträgen: +
- Wenn bereits steuerrelevante Dokumente für den Auftrag existieren. +
- Wenn die Benutzer:in nicht berechtigt ist, Aufträge zu löschen. +
- Wenn der Warenausgang bereits gebucht wurde. +
- Wenn ein Lieferauftrag angelegt wurde. +
- Wenn Kindaufträge existieren. Hauptaufträge mit Kindaufträgen können erst gelöscht werden, wenn die Kindaufträge gelöscht wurden.
|====


[#order-group-functions]
=== Gruppenfunktionen nutzen

Mit Gruppenfunktionen ist es möglich, Prozesse für eine größere Menge an Aufträgen gleichzeitig auszuführen. Damit werden Vorgänge, z.B. eine Statusänderung oder ein E-Mail-Service, auf alle ausgewählten Aufträge angewendet. Die Nutzung einer Gruppenfunktion ist besonders zu empfehlen, wenn viele Aufträge bearbeitet werden müssen und die einzelne Bearbeitung sehr zeitaufwändig wäre.

Die Gruppenfunktionen werden dir über der Übersichtstabelle angezeigt, sobald du mindestens einen Auftrag ausgewählt hast. Gehe wie folgt vor, um mehrere Aufträge über die Gruppenfunktion zu bearbeiten.


[.instruction]
Gruppenfunktion nutzen:

. Suche die Aufträge, die du über die Gruppenfunktion bearbeiten möchtest.
. Wähle (icon:check-square[role="blue"]) die Aufträge, die du bearbeiten möchtest.
. Klicke über der Auftragsübersicht auf die Gruppenfunktion, die du ausführen möchtest. +
→ Ein Bearbeitungsfenster mit weiteren Einstellungen oder einer Abfrage öffnet sich.
. Wenn erforderlich, triff weitere Einstellungen für die Gruppenfunktion.
. Klicke auf *Anwenden* (icon:execute[set=plenty]). +

→ Die ausgewählte Aktion wird auf die vorher ausgewählten Aufträge angewendet.


[.instruction]
Gruppenfunktion mit der MyView nutzen:

// TODO: ergänzen/anpassen
. Öffne das Menü *Aufträge » Aufträge [Testphase]*.
. Klicke auf Symbol *Ansicht bearbeiten* (icon:design_inline_edit[set=plenty]). +
→ Der Bearbeitungsmodus wird aktiviert, links öffnet sich, blau hinterlegt, die Anzeige Bearbeitungsmodus aktiv.
. Klicke auf den mittleren Bereich rechts oben auf das Symbol Stift (tooltip fehlt noch).
→ Der Bearbeitungsbereich öffnet sich.
. Klappe die *Einstellungen* auf, um die Gruppenfunktionen zu sehen. Zunächst werden die *Standard-Gruppenfunktionen* angezeigt.
. Klappe die *Gruppenfunktionen* aus.
. Wähle, welche Gruppenfunktionen angezeigt werden sollen, indem du auf den Haken klickst, um Funktionen abzuwählen.  +
→ Nur die gewählten Gruppenfunktionen werden weiterhin angezeigt.
. Klicke auf x *Bearbeitungsmodus schließen*, um den Bearbeitungsmodus zu verlassen.

*Standard-Gruppenfunktionen* sind:
* Aufträge gruppieren
* Warenausgang buchen
* Status ändern
* Tag ändern
* Warenausgang zurückbuchen
* Aufträge löschen
* Eigner ändern
* Versandprofil ändern
* Lieferdatum für Auftrag setzen
* Versanddatum für Auftragspositionen setzen

// TODO: Prüfen, ist in Arbeit, ergänzen, Stand 04.05.22


[[table-group-functions]]
.Gruppenfunktionen für Aufträge
[cols="1,2"]
|====
|Einstellung |Erläuterung
// TODO: Text und Links prüfen
| *Aufträge gruppieren*
| Mit der Gruppenfunktion *Aufträge gruppieren* (icon:library_add_check[set=material]) kannst du einzelne Aufträge in einem neuen Auftrag zusammenfassen indem du sie gruppierst. Das Verhalten beim Gruppieren ist abhängig von deiner <<auftraege/grundeinstellungen#intable-behaviour-after-grouping, Grundeinstellung>> dafür. Im Standardverhalten werden die ursprünglichen Aufträge beim Gruppieren gelöscht. Die Versandkosten werden dann für den neuen Auftrag neu berechnet. Damit Aufträge gruppiert werden können, müssen sie folgende Kriterien erfüllen: +
- Die Aufträge dürfen nicht gesperrt sein. +
- Der Warenausgang darf nicht gebucht sein. +
- Den Aufträgen dürfen noch keine Zahlungen zugeordnet sein. +
- Die Aufträge dürfen keine steuerrelevanten Dokumente haben. +
- Die Aufträge müssen die gleiche plentyID haben. +
- Die Aufträge müssen vom gleichen Auftragstyp sein. +
- Die Aufträge müssen die gleiche Herkunft haben. +
- Die Aufträge müssen den gleichen Eigner haben. +
- Die Aufträge müssen den gleichen Kontakt haben. +
- Die Aufträge müssen die gleiche Adresse haben. +
- Die Aufträge müssen die gleiche Zahlungsart haben. +
- Die Aufträge müssen die gleiche Währung und den gleichen Wechselkurs haben. +
Hast du die in den Grundeinstellungen die andere Option *Statuswechsel* gewählt, entsteht beim Gruppieren ebenfalls 1 neuer Auftrag, aber die Originalaufträge bleiben erhalten und werden in einen von dir definierten Auftragsstatus verschoben. Ein weiterer Unterschied ist, dass mit dieser Einstellung auch Aufträge gruppiert werden dürfen, denen bereits eine Zahlung zugeordnet wurde oder für die steuerrelevante Dokumente (Wichtig: Rechnung und Stornobeleg) erstellt wurden. Sowohl die zugeordneten Zahlungen als auch die Dokumente bleiben für die Originalaufträge erhalten und werden nicht in den gruppierten Auftrag übernommen. +
Unabhängig von der gewählten Einstellung werden Versandkosten für gruppierte Aufträge neu berechnet. Zudem werden Auftragsnotizen in den neuen Auftrag übernommen.

| *Warenausgang buchen*
| Mit der Gruppenfunktion *Warenausgang buchen* (icon:output[set=material]) kannst du den Warenausgang für die ausgewählten Aufträge buchen. Wähle dafür das Datum und die Uhrzeit, wann die Buchung erfolgen soll. Wird der Warenausgang für Aufträge gebucht, ändert sich auch der Auftragsstatus der Aufträge zu *7 - Warenausgang gebucht*.

| *Warenausgang zurückbuchen*
| Mit der Gruppenfunktion *Warenausgang zurückbuchen* (icon:input[set=material]) kannst du einen bereits gebuchten Warenausgang für die ausgewählten Aufträge wieder zurückbuchen, z.B. im Fall von Retouren. Beachte, dass sich beim Zurücksetzen des Warenausgangs auch der Auftragsstatus ändert.

| *Status ändern*
| Mit der Gruppenfunktion *Status ändern* (icon:repeat_one[set=material]) kannst du den <<auftraege/auftraege-verwalten#1200, Auftragsstatus>> für die ausgewählten Aufträge ändern. Wähle dafür aus der Dropdown-Liste den Auftragsstatus, der den Aufträgen zugewiesen werden soll.

| *Tag ändern*
| Mit der Gruppenfunktion*Tag ändern* (icon:label[set=material]) kannst du Tags für die ausgewählten Aufträge ändern. Du kannst sowohl Tags hinzufügen als auch Tags entfernen. Wähle aus den Dropdown-Listen die Tags aus, die du den Aufträgen hinzufügen oder von ihnen entfernen möchtest. Du kannst jeweils mehrere Tags auswählen.

| *Aufträge löschen*
| Mit der Gruppenfunktion *Aufträge löschen* (icon:delete[set=material]) kannst du die ausgewählten Aufträge löschen. Beachte, dass du gut überprüfst, ob du die ausgewählten Aufträge wirklich löschen kannst und solltest. Generell sollten Aufträge nicht gelöscht werden. Durch die Verknüpfung mit Artikeln, Versandeinstellungen und weiteren Funktionen, wie Stornierungen und Retouren, kann es nach dem Löschen zu Fehlern an den Verknüpfungspunkten kommen. Neu angelegte Aufträge können jedoch gelöscht werden. Beachte auch, dass nicht alle Aufträge gelöscht werden können. Folgendes verhindert das Löschen von Aufträgen: +
- Wenn bereits steuerrelevante Dokumente für den Auftrag existieren. +
- Wenn die Benutzer:in nicht berechtigt ist, Aufträge zu löschen. +
- Wenn der Warenausgang bereits gebucht wurde. +
- Wenn ein Lieferauftrag angelegt wurde. +
- Wenn Kindaufträge existieren.

| *Eigner ändern*
| Mit der Gruppenfunktion *Eigner ändern* (icon:people_alt[set=material]) kannst du den Eigner für die ausgewählten Aufträge ändern. Wähle dafür aus der Dropdown-Liste den Eigner, der den Aufträgen zugewiesen werden soll.

| *Versandprofil ändern*
| Mit der Gruppenfunktion *Versandprofil ändern* (icon:local_shipping[set=material]) kannst du die <<fulfillment/versand-vorbereiten#1000, Versandprofile>> der ausgewählten Aufträge ändern. Wähle dafür aus der Dropdown-Liste das Versandprofil aus, das den Aufträgen zugewiesen werden soll.
// TODO: Link prüfen

| *Lieferdatum für Auftrag setzen*
| Mit der Gruppenfunktion *Lieferdatum für Auftrag setzen* (icon:schedule_send[set=material]) kannst du das Lieferdatum für Auftragspositionen setzen. Gib ein Datum ein oder nutze den Kalender zur Datumsauswahl.

| *Versanddatum für Auftragsposition setzen*
| Mit der Gruppenfunktion *Versanddatum für Auftragsposition setzen* (icon:pending_actions[set=material]) kannst du das Versanddatum eines Auftrags setzen. Gib ein Datum ein oder nutze den Kalender zur Datumsauswahl.

////
| *E-Mail Service* - siehe alte UI
| Mit dieser Gruppenfunktion kannst du entweder an die Kund:innen oder die Lager der ausgewählten Aufträge eine E-Mail senden. Wähle dafür aus den Dropdown-Listen einen *Empfänger*, eine *Vorlage* und optional eine *Markierung*. Achte darauf, dass du vorher eine <<crm/e-mails-versenden#1200, E-Mail-Vorlage>> eingerichtet hast, damit sie hier als Auswahl zur Verfügung steht.

| *Newsletter* - siehe alte UI
| Mit dieser Gruppenfunktion kannst du einen Newsletter den ausgewählten Aufträgen hinzufügen. Dieser wird dann den Kund:innen der Aufträge zugeschickt. Wähle dafür aus der Dropdown-Liste den passenden Newsletter aus. Achte darauf, dass du den <<crm/newsletter-versenden#, Newsletter>> eingerichtet hast.
////

| *Leads anlegen* - siehe alte UI
| Diese Gruppenfunktion ist nicht mehr nutzbar.

|====

[IMPORTANT]
.Anwendung von Gruppenfunktionen
====
Stelle beim Anwenden von Gruppenfunktionen immer sicher, dass du die richtigen Aufträge ausgewählt hast. Beachte zudem, dass manche Änderungen an Aufträgen weitere Abläufe in der Auftragsbearbeitung beeinflussen können. Es können auch Automatismen wie Ereignisaktionen oder Prozesse ausgelöst werden.
====

Aufträge bearbeiten::
+
--
Gehe wie im Folgenden beschrieben vor, um mehrere Aufträge über die Gruppenfunktion zu bearbeiten.

[.instruction]
Mehrere Aufträge über die Gruppenfunktion bearbeiten:

. Öffne das Menü *Aufträge » Aufträge (Testphase)*.
. Suche die Aufträge anhand der Filtereinstellungen wie im Kapitel <<#auftrag-suchen, Auftrag im Versand-Center suchen>> beschrieben. +
→ Die Aufträge, die den eingestellten Suchkriterien entsprechen, werden in der Übersicht angezeigt.
. Wähle (icon:check-square[role="blue"]) die Aufträge, die du bearbeiten möchtest.
. Klicke in der Symbolleiste ganz oben auf *Aufträge bearbeiten* (icon:edit[set=plenty]). +
→ Die gewählten Aufträge werden auf der linken Seite angezeigt. 
// TODO: formulieren Haben Haken auf blau und Anzahl oben
. Klicke in die Zeile des Auftrags icon:shopping_cart[set=material] *Auftrags-ID*, um den Auftrag in der Detailansicht zu öffnen.
. Nimm die gewünschten Änderungen vor.
. Klicke auf icon:close[set=material] in der Zeile eines Auftrags, um den Auftrag wieder aus der Liste zu entfernen.
. Klicke auf icon:angle-left[] in der Zeile eines Auftrags, um eine Liste mit den Bereichen des Auftrags zu öffnen. +
→ Klicke auf einen der Bereiche, um den Auftrag in der Detailansicht zu öffnen.
. Klicke auf icon:angle-down[], um die Bereiche des Auftrags wieder zu schließen. +
→ Der Auftrag bleibt aber in der Liste sichtbar.

// TODO: für alle Auftragstypen sind die ersten Schritte gleich sowie die spätere Ansicht (mit leicht unterschiedlichen Feldern). 

== Auftragstypen
////
|Wähle aus, welchen Typ von Warenkorb du in der Auftragserstellung nutzen möchtest. Standardmäßig ist der Side cart ausgewählt. Die Funktionen im Warenkorb sind bei beiden Typen gleich. +
*Warenkorb als Side cart* = Der Warenkorb wird seitlich als Overlay dargestellt, wenn man ihn öffnet. +
*Warenkorb als Tabelle (unterhalb der Suchergebnisse)* = Der Warenkorb wird als Tabelle unterhalb der Artikeltabelle (generiert durch die Artikelsuche) dargestellt.
////

== Lieferauftrag

== Angebot


== Retoure

[#order-type-return]
=== Auftragstyp Retoure nutzen

Der Auftragstyp Retoure bildet den Geschäftsvorfall einer Retoure ab. Retouren können manuell erfasst werden. Zusätzlich kannst du auch deinen Webshop-Kund:innen erlauben, Retouren über den *Mein Konto* Bereich anzumelden. Das Erfassen einer Retoure bucht die retournierten Artikel noch nicht zurück in den Warenbestand. Du erfasst also zunächst die retournierten Artikel und entscheidest anschließend, ob die Artikel wieder zum Bestand gebucht werden oder ob weitere Schritte, wie z.B. eine Reparatur, notwendig sind. Die Retoure ist ein untergeordneter Auftragstyp, da Retouren entweder einem Auftrag oder einer Gewährleistung zugeordnet sind.
Bevor du Retouren erfassen kannst, lege xref:auftraege:auftraege-verwalten.adoc#410[Retourengründe] und xref:auftraege:auftraege-verwalten.adoc#420[Artikelstatus für retournierte Artikel] an.
// TODO: xref anpassen

Der Standardstatus für Retouren ist Status 9. Jede Retoure, die erfasst wird, erhält automatisch diesen Status. Du kannst jedoch jederzeit im Menü *Einrichtung » Aufträge » Einstellungen* einen anderen Status als xref:auftraege:grundeinstellungen.adoc#intable-default-status-return[Standard-Status Retoure] festlegen.
// TODO: xref anpassen

[#enter-return-reason]
=== Retourengründe eingeben

Du kannst bis zu 20 Retourengründe eingeben. Beim Erfassen einer Retoure wählst du für jede Auftragsposition einen Grund. Anhand von Retourengründen ist später nachvollziehbar, ob ein Artikel besonders häufig wegen desselben Grundes retourniert wurde. Die Retourengründe können in mehreren Sprachen hinterlegt werden.

[.instruction]
Retourengründe eingeben:

. Öffne das Menü *Einrichtung » Aufträge » Auftragstypen » Retoure*.
. Wähle die *Sprache* aus der Dropdown-Liste aus.
. Gib *Gründe* für Retouren für die gewählte Sprache ein. +
*_Hinweis:_* Pro Artikelposition kann ein Grund definiert werden.
. *Speichere* die Einstellungen.
. Wiederhole dies ggf. für weitere Sprachen.


[#enter-status-returns]
=== Status für retournierte Artikel eintragen

Du kannst bis zu 12 Artikelstatus anlegen. Die Status kannst du z.B. nutzen, um einerseits den Zustand der retournierten Artikel, aber auch um den Fortschritt beim Bearbeiten der retournierten Artikel anzugeben. Die Status stehen in einer Retoure im Portlet *Übersicht* bei den Auftragspositionen zur Wahl. Um je nach Fortschritt der Bearbeitung verschiedene Status zuzuweisen, lege die benötigten Status an. Du kannst Retourenstatus in mehreren Sprachen hinterlegen.

[.instruction]
Status für retournierte Artikel eintragen:

. Öffne das Menü *Einrichtung » Aufträge » Auftragstypen » Retoure*.
. Wähle die *Sprache* aus der Dropdown-Liste aus.
. Trage die gewünschten *Status* für die Zuordnung zurückgesendeter Artikel für die ausgewählte Sprache ein. +
Hinweis: Pro Artikelposition kann ein eigener Status definiert werden.
. *Speichere* (icon:save[role="green"]) die Einstellungen.
. Wiederhole dies ggf. für weitere Sprachen.


[#create-edit-return]
=== Retoure erfassen und bearbeiten

Eine Retoure erfasst du manuell, wenn ein Paket bei dir eingegangen ist oder du erlaubst deinen registrierten Webshop-Kund:innen, direkt im Kundenkonto des Shops Retouren anzumelden. Nachdem eine Retoure erfasst wurde, werden weitere Bearbeitungsmöglichkeiten sichtbar. So kannst du z.B. den Artikelstatus der retournierten Artikel erst nach dem Erfassen angeben.
////
Hinweis: Die Retourengründe (dropdown grün) werden durch die übergeordneten Retourengründe (gelb) überschrieben.
////

==== Retoure erfassen

[.instruction]
Gehe folgendermaßen vor, um eine Retoure zu erfassen:

. Öffne das Menü *Aufträge » Aufträge [Testphase]*.
→ Die Auftragsübersicht öffnet sich.
. Suche (icon:search[role="blue"]) anhand der Filtereinstellungen den Auftrag, für den eine Retoure erzeugt werden soll.
. Öffne den Auftrag oder die Gewährleistung, für den oder die eine Retoure angelegt werden soll.
. Klicke auf Warenkorb (icon:shopping_cart[set=material]) *Aufträge erstellen*, um auf die Auswahl zu gelangen. Wähle *Retoure*, um eine Retoure anzulegen.
. Wähle entweder die Option *aus einzelnen Positionen* oder *aus allen Positionen*.  +
→ Ein Bearbeitungsfenster wird geöffnet.
. Nimm die Einstellungen anhand <<table-settings-return>> vor.
. *Speichere* (icon:save[role="green"]) die Einstellungen. +
→ Die Retoure wird angelegt und in einem eigenen Fenster geöffnet.
////
include::partial$tabelle-aus-optionen-anlegen.adoc[]
////

[[table-settings-return]]
.Optionen beim Erfassen einer Retoure
[cols="1,3"]
|====
|Einstellung |Erläuterung

2+^| *Einstellungen*

| *Status*
|Einen Status für die Retoure aus der Dropdown-Liste wählen. Voreingestellt ist der Standardstatus, der im Menü *Einrichtung » Aufträge » Einstellungen* gespeichert wurde.

| *Eigner*
|Einen Eigner aus der Dropdown-Liste wählen, der dem Retourenauftrag zugewiesen wird.

| *Retourengrund*
|Einen Grund für die Retoure aus der Dropdown-Liste wählen.

| *Paketcode der Retoure*
|Paketcode der Retoure eintragen.

|*Status*
|Wähle einen Status aus der Dropdown-Liste, z.B. Waren auf Zahlung. +
Diese Spalte ist eine Standardspalte.


// TODO: 2. Tabelle

| *Artikel-ID*
|Die Artikel-ID wird angezeigt.

| *Varianten-ID*
|Die Varianten-ID wird angezeigt.

| *Menge*
|Die Verbleibende Menge wird angezeigt.

| *Name der Auftragsposition/Artikel-Name*
|Der Name der Auftragsposition wird angezeigt.

| *Retourengrund*
|Der zuvor ausgewählte Grund für die Retoure wird angezeigt.

| *Artikel-Status/Auftrags-Status**
|Der zuvor ausgewählte Status des Artikels wird angezeigt.

| *Verbleibender Auftragswert in (%)*
|Der verbleibende Wert des Auftrags wird angezeigt. Der Wert liegt zwischen 0 und 100.

| *Retourengrund übertragen*
|Einen Grund für die Retoure wählen, der für alle Artikel der Retoure gilt. +
Wenn hier ein Grund gewählt wird, hat dieser Grund Priorität gegenüber den einzeln wählbaren Gründen auf Artikelpositionsebene.

| *Übernehmen*
|Artikel wählen, die in die Retoure übernommen werden sollen.

| *Menge*
|Artikelmenge eintragen, die in die Retoure übernommen werden soll.

| *Grund der Retoure*
|Individuellen Grund für die Retoure eines Artikels wählen. +
*_Hinweis_*: Wenn ein Grund für alle gewählt wurde, hat dieser Grund Priorität.

| *Artikel*
|Der Artikelname kann hier angepasst werden.

Nachdem eine Retoure erfasst wurde, kannst du den Artikelstatus für retournierte Artikel wählen. Außerdem werden weitere Bearbeitungsmöglichkeiten sichtbar.

|====

// TODO: gehört das auf diese Seite?
[#create-return-note]
=== Rücksendeschein erstellen

Einen Rücksendeschein kannst du deinen Kund:innen bei Zustellung der Ware im Paket beilegen. In diesem Fall sollte der Rücksendeschein Blankofelder für die Retourengründe enthalten. Du kannst deinen Kund:innen aber auch erlauben den Rücksendeschein im *Mein Konto* Bereich auszufüllen, auszudrucken und der Retoure beizulegen.
Bevor Rücksendescheine erzeugt werden können, muss die Dokumentenvorlage
// TODO:prüfen, xref prüfen
xref:auftraege:ruecksendeschein-erzeugen.adoc#[Rücksendeschein] im Menü *Einrichtung » Mandant » [Mandant wählen] » Standorte » [Standort wählen] » Dokumente » Rücksendeschein* eingerichtet werden.

[TIP]
.Retourengründe auf der Vorlage einstellen
====
Du kannst einen unausgefüllten Rücksendeschein in jedem Paket beilegen, dass du versendest. Hierfür generierst du den Rücksendeschein direkt im Auftrag, ohne dass es überhaupt eine Retoure geben muss. Die zweite Möglichkeit ist, dass du deinen Webshop-Kund:innen erlaubst Retouren im Mein-Konto-Bereich des Shops anzumelden und hier die Retourengründe anzugeben. Anschließend kann der Rücksendeschein ausgefüllt ausdruckt werden. Egal wie du den Rücksendeschein deinen Kund:innen zukommen lässt: Damit Retourengründe eingetragen werden können, musst du die Spalte Retourengründe unterhalb der Artikelpositionen platzieren.
====

Prüfe die Artikelpositionen der Retoure und ändere bei Bedarf die Optionen, z.B. die Menge eines Artikels, bevor du im Tab *Belege* der Retoure einen Rücksendeschein erzeugst.


[#order-type-repair]
== Auftragstyp Reparatur nutzen

Reparaturen werden in plentymarkets durch einen eigenen Auftragstyp abgebildet. Reparaturen bestehen aus retournierter, reparaturbedürftiger Ware. Reparaturaufträge können daher nur aus xref:auftraege:auftraege-verwalten.adoc#400[Retourenaufträgen] angelegt werden. Eine Reparatur muss manuell angelegt werden, da jeder Artikel geprüft werden muss.
// TODO: Link prüfen

[#repair-status]
=== Status für Reparaturen eingeben

Hinterlege vor dem Anlegen von Reparaturen verschiedene *Status* für die einzelnen Stationen des Reparaturvorgangs, um den Reparaturverlauf in deinem plentymarkets System genau nachvollziehen zu können. Die Reparaturstatus können in mehreren Sprachen hinterlegt werden.

[.instruction]
Status für Reparaturen eingeben:

. Öffne das Menü *Einrichtung » Aufträge » Auftragstypen » Reparatur*.
. Wähle die *Sprache* aus der Dropdown-Liste aus.
. Trage die von dir benötigten *Status* für Reparaturen für die ausgewählte Sprache ein.
. *Speichere* (icon:save[role="green"]) die Einstellungen.
. Wiederhole dies ggf. für weitere Sprachen.
*_Hinweis:_* Pro Reparatur kann ein Status definiert werden. Es können bis zu 15 Status eingegeben werden.

[#repair-state]
=== Zustände für Reparaturen eingeben

Mit einem *Zustand* kannst du den Artikel genau beschreiben, z.B. ob dieser überhaupt eine Reparatur benötigt oder auch, dass es nicht möglich ist, diesen zu reparieren. Die Zustände können in mehreren Sprachen eingetragen werden.

[.instruction]
Zustände für Reparaturen eingeben:

. Öffne das Menü *Einrichtung » Aufträge » Auftragstypen » Reparatur*.
. Wähle die *Sprache* aus der Dropdown-Liste aus.
. Trage die von dir benötigten *Zustände* für die Zuordnung der Artikelpositionen für die ausgewälte Sprache ein. +
. *Speichere* (icon:save[role="green"]) die Einstellungen.
. Wiederhole dies ggf. für weitere Sprachen.
*_Hinweis:_* Pro Artikelposition kann ein eigener Zustand definiert werden. Es können bis zu 15 Artikelzustände eingegeben werden.

[#create-repair]
=== Reparatur anlegen

[.instruction]
Gehe wie beschrieben vor, um eine Reparatur anzulegen: 

. Öffne das Menü *Aufträge (Testphase) » Aufträge*.
. Öffne die Retoure, zu der du eine Reparatur anlegen möchtest.
////
ausformulieren
. Klicke auf die Dropdown-Liste *Reparatur* und dort auf die Einstellung *anlegen*. + Wo ??
→ Ein Bearbeitungsfenster öffnet sich. Gib den gewünschten *Status* und den *Zustand* der Reparatur an. Wähle die zu reparierenden *Artikel* aus. Gib optional einen *Hinweis* ein.
. *Speichere* (icon:save[role="green"]) die Einstellungen. +
→ Die Reparatur wird angelegt und in einem eigenen Tab geöffnet.
////


[#edit-repair]
=== Reparatur bearbeiten
// TODO: Portlet prüfen
Je nach Grund der Rücksendung oder Zustand der zu reparierenden Artikel müssen bei der Bearbeitung verschiedene Schritte durchgeführt werden. +
Da es sich bei einer Reparatur um einen eigenen Auftragstyp handelt, kannst du direkt im Portlet *Übersicht* der Reparatur nach den bereits beschriebenen Vorgehensweisen entweder eine Gutschrift, eine Gewährleistung oder eine Retoure anlegen. Die jeweils nötigen Schritte wie die Dokumentenerzeugung, Buchungen des Warenausgangs oder -eingangs oder der eventuellen Buchung von Zahlungen laufen jeweils identisch mit den Auftragstypen xref:auftraege:auftraege-verwalten.adoc#500[Gutschrift], xref:auftraege:auftraege-verwalten.adoc#600[Gewährleistung] und xref:auftraege:auftraege-verwalten.adoc#400[Retoure] ab.
// TODO: xref prüfen

[[table-settings-repair]]
.Optionen beim Erfassen einer Reparatur
[cols="1,3"]
|====
|Einstellung |Erläuterung

2+^| *Einstellungen*

| *Status*
|Einen Status aus der Dropdown-Liste für die Reparatur wählen. Voreingestellt ist der Standardstatus, der im Menü *Einrichtung » Aufträge » Einstellungen* gespeichert wurde.

| *Eigner*
|Einen Eigner aus der Dropdown-Liste wählen, der der Reparatur zugewiesen wird. Voreingestellt ist der aktuelle Benutzer, wenn er der Eigner sein kann.

| *Status der Reparatur*
|Einen *Status der Reparatur* aus der Dropdown-Liste für die Reparatur wählen. Es gibt keine Vorauswahl.


2+^| *Artikel* 

| *Artikel-ID*
|Die Artikel-ID wird angezeigt.

| *Varianten-ID*
|Die Varianten-ID wird angezeigt.

| *Menge*
|Die Menge wird angezeigt.

| *Verfügbare Menge*
|Die Verfügbare Menge wird angezeigt.

// TODO: prüfen: Klicke auf den Warenkorb (icon:shopping_cart[set=material]), um einen Artikel hinzuzufügen

Cart
| *Artikel-ID*
|Die Artikel-ID wird angezeigt.

| *Varianten-ID*
|Die Varianten-ID wird angezeigt.

| *Menge*
|Die Menge wird angezeigt. - editable with validation

| *Name der Artikelposition*
|Die Artikelposition ist editierbar.

| *Zustand des Artikels*
|Eine Dropdown-Liste mit den Zuständen ist verfügbar. Es gibt keine Vorauswahl.



[#order-type-credit-note]
= Gutschrift

In plentymarkets kannst du Gutschriften als PDF-Dateien generieren, um diese z.B. zu drucken oder deinen Kund:innen als E-Mail Anhang zukommen zu lassen. +
Gutschriften nutzt du beispielsweise, um bei bereits bezahlten Aufträgen nachträgliche Preisnachlässe zu gewähren oder wenn im Rahmen von Retouren Rückerstattungen veranlasst werden sollen.

[#use-order-type-credit-note]
== Auftragstyp Gutschrift nutzen

Bei einer Gutschrift bekommen deine Kund:innen einen Betrag zurückerstattet. Dies kann beispielsweise nach einer xref:auftraege:auftraege-verwalten.adoc#400[Retoure] der Fall sein. Bei der Gutschrift in plentymarkets handelt es sich also nicht um eine Art umgekehrte Rechnung, sondern um eine Rückzahlung. Gutschriftaufträge erzeugst du unter *Aufträge » Aufträge bearbeiten* aus einem Auftrag. Eine Gutschrift ist also immer einem Auftrag zugeordnet. Die in einem Gutschriftauftrag erzeugten Gutschriftbelege werden auch in Buchhaltungsexporten, wie dem *DATEV*-Export, berücksichtigt.
// TODO: xref prüfen

[#save-status-credit-note]
=== Standardstatus für Gutschriften speichern

Bevor du eine Gutschrift anlegst, prüfe den xref:auftraege:grundeinstellungen.adoc#intable-default-status-credit-note[Standard-Status für Gutschriften] im Menü *Einrichtung » Aufträge » Einstellungen*. Passe den Standardstatus bei Bedarf an und speichere die Einstellungen.

[#create-credit-note]
=== Gutschrift anlegen

Eine Gutschrift ist immer mit einem bestehenden Auftrag in deinem plentymarkets System verknüpft. Deshalb musst du den gewünschten Auftrag zunächst in der Auftragsübersicht öffnen, bevor du eine Gutschrift angelegen kannst.

[TIP]
.Gutschriften im Hauptauftrag oder im Retourenauftrag anlegen
====
Hat eine Kund:in den Auftrag bereits gezahlt, beispielsweise per Vorkasse, und entscheidet sich vor dem Warenausgang gegen den Kauf, empfehlen wir den Auftrag zu stornieren und direkt im Hauptauftrag eine Gutschrift über alle Auftragspositionen anzulegen.

// TODO: xref prüfen
Kommt es nach erfolgter Zahlung, Warenausgang und Zustellung der Ware für eine oder alle Auftragspositionen zu einer xref:auftraege:auftraege-verwalten.adoc#400[Retoure] oder im Folgenden zu einem xref:auftraege:auftraege-verwalten.adoc#700[Reparaturauftrag], lege die Gutschrift direkt im entsprechenden Retouren- oder Reparaturauftrag an.
====

// TODO: Gutschrift für bestimmte oder mehrere Positionen
:ordertype: Gutschriften

[.instruction]
Gutschriftauftrag anlegen:

. Öffne das Menü *Aufträge » Aufträge [Testphase]*.
→ Die Auftragsübersicht öffnet sich.
. Suche (icon:search[role="blue"]) anhand der Filtereinstellungen den Auftrag, für den eine Gutschrift erzeugt werden soll.
. Öffne den Auftrag, für den eine Gutschrift angelegt werden soll.
. Klicke auf Warenkorb (icon:shopping_cart[set=material]) *Aufträge erstellen*, um auf die Auswahl zu gelangen. Wähle *Gutschrift*, um eine Gutschrift anzulegen.
. Wähle entweder die Option *aus einzelnen Positionen* oder *aus allen Positionen*.  +
→ Ein Bearbeitungsfenster wird geöffnet.
. Nimm die Einstellungen anhand <<table-settings-return>> vor.
. *Speichere* (icon:save[role="green"]) die Einstellungen. +
→ Die Retoure wird angelegt und in einem eigenen Fenster geöffnet.

//// 
include::partial$tabelle-aus-optionen-anlegen.adoc[] 
////

[#create-credit-note-specific]
=== Gutschrift aus einzelner Position erzeugen

Einzelne Gutschriften kannst du manuell am jeweiligen Gutschriftauftrag erzeugen. Weitere Informationen und Anleitungen zum Anlegen von Gutschriftaufträgen findest du im Kapitel xref:auftraege:auftraege-verwalten.adoc#500[Gutschrift anlegen].
// TODO: xref prüfen

[.instruction]
Gutschrift aus einzelnen Positionen erzeugen:

. Öffne das Menü *Aufträge » Aufträge [Testphase]*. +
→ Die Auftragsübersicht öffnet sich.
. Suche (icon:search[role="blue"]) anhand der Filtereinstellungen den Auftrag, für den ein Dokument Gutschrift erzeugt werden soll.
. Öffne den gewünschten Auftrag.
. Klicke auf (icon:shopping_cart[set=material]) *Aufträge erstellen*. +
. Wähle aus der Dropdown-Liste *Gutschrift* die Option *Gutschrift für einzelne Positionen* erstellen. +
→ Die *Gutschrift* zum Auftrag wird erstellt und links in der Navigation als *Gutschrift* unter dem Auftrag angezeigt.
. Klappe das Portlet *Historie* auf. Dort steht links das Erstellungsdatum, der Benutzer, als Aktion Neue Gutschrift und als Status 11 Gutschrift.
In dem Portlet *Übersicht* siehst du den Auftragstyp jetzt als Gewährleistung. Links in der Navigation kann der *Auftragstyp* durch Klick auf x geschlossen werden.

[#create-credit-note-all]
=== Mehrere Gutschriften erzeugen
////
Sollen mehrere Gutschriften zugleich erzeugt werden, kannst du über einen Suchfilter im Menü *Aufträge » Fulfillment* festlegen, welche Aufträge berücksichtigt werden. Zudem kannst du in diesem Menü festlegen, ob der Status des Auftrags geändert werden soll, nachdem die Dokumente erzeugt wurden. Neu sollte das so gehen wie bei Retoure auch.
////

[.instruction]
Mehrere Gutschriften erzeugen:

// TODO: stimmt noch nicht
. Öffne das Menü *Aufträge » Aufträge [Testphase]* » usw*.
. Nimm die Einstellungen anhand <<table-settings-fulfillment-credit-notes>> vor. +
_Beachte_, dass die Einstellungen sowohl *Suchfilter* als auch *Aktionen* umfassen.
. Klicke auf icon:settings[set=material], um die Gutschriften zu erzeugen. +
→ Es öffnet sich eine *PDF-Datei*, in der die zugehörigen Gutschriften aller von dir durch die Suchfilter bestimmten Aufträge enthalten sind.



[[table-settings-return]]
.Optionen beim Erfassen einer Gutschrift
[cols="1,3"]
|====
|Einstellung |Erläuterung

2+^| *Einstellungen*

| *Status*
|Einen Status aus der Dropdown-Liste für die Gutschrift wählen. Voreingestellt ist der Standardstatus, der im Menü *Einrichtung » Aufträge » Einstellungen* gespeichert wurde.

| *Eigner*
|Einen Eigner aus der Dropdown-Liste wählen, der der Gutschrift zugewiesen wird.

// TODO: hier und so richtig?
| *Versandkosten*
|Wähle, ob die Versandkosten aus dem Hauptauftrag in die Gutschrift übernommen werden sollen. Die Option, die du für *Versandkosten in Gutschrift übernehmen* im Menü *Einrichtung » Aufträge » Einstellungen* gespeichert hast, ist voreingestellt.Du kannst die gespeicherte Einstellung anpassen.
////
add the shipping costs to the basket (only for the request / not visible in the basket) if the option is yes
////


2+^| *Artikel*

| *Artikel-ID*
|Die Artikel-ID wird angezeigt.

| *Varianten-ID*
|Die Varianten-ID wird angezeigt.

| *Menge*
|Die Menge wird angezeigt. - editable with validation

| *Verfügbare Menge*
|Die Verfügbare Menge wird angezeigt.

Um Artikel hinzuzufügen, klicke auf icon:shopping_cart[set=material]. Durch Klick auf icon:add[set=material] kannst du weitere Artikel hinzufügen.
// TODO: Bezeichnungen anpassen

Cart
| *Artikel-ID*
|Die Artikel-ID wird angezeigt.

| *Varianten-ID*
|Die Varianten-ID wird angezeigt.

| *Menge*
|Die Menge wird angezeigt. - editable with validation

| *Name der Artikelposition*
|Die Artikelposition ist editierbar.
|====


// TODO: Tab Übersicht

Wenn ein Gutschriftauftrag zu einem Auftrag angelegt wurde, wird im Tab *Übersicht* ?? des Haupfauftrags rechts der Hinweis *Gutschrift verfügbar* angezeigt. Zusätzlich kannst du bereits angelegte Gutschriftaufträge im Tab *Übersicht* des Hauptauftrags über die Dropdown-Liste *Gutschrift / suchen* aufrufen.
// TODO: Neu: wird links unter Auftrag angezeigt ….


[#create-credit-note-note]
=== Gutschriftbeleg erstellen

Nach dem Anlegen des Gutschriftauftrags muss ein Gutschriftbeleg direkt im Gutschriftauftrag erstellt werden. Vor dem ersten Erzeugen eines xref:auftraege:gutschriften-erzeugen.adoc#[Gutschriftbelegs] muss die Dokumentenvorlage im Menü *Einrichtung » Mandant » [Mandant wählen] » Standorte » [Standort wählen] » Dokumente » Gutschrift* eingerichtet werden.

//// 
Bevor du den Gutschriftbeleg im Tab *Belege* ?? des Gutschriftauftrags erzeugst, solltest du die im Gutschriftauftrag enthaltenen Auftragspositionen prüfen und bei Bedarf ändern.

[.instruction]
Gutschriftbeleg erstellen:

. Öffne den Gutschriftauftrag, für den ein Gutschriftbeleg erzeugt werden soll.
. Wähle die Option *Gutschrift* aus der Dropdown-Liste unter *Beleg / erstellen*.
. Klicke auf *Beleg erstellen*. +
→ Der Gutschriftbeleg wird erzeugt und in einem eigenen Tab geöffnet.
////

Erstellte Gutschriften weisen jeweils eine Referenz zu der Rechnung des dazugehörigen Auftrages auf. Im Portlet *Dokumente* eines Auftrags wird dies in der Benennung der Gutschrift angezeigt.


[#order-type-warranty]
== Gewährleistung

== Auftragstyp Gewährleistung nutzen

Gewährleistungen sind xref:auftraege:auftraege-verwalten.adoc#400[Retouren] relativ ähnlich, denn in beiden Fällen bekommst du Waren eines Auftrags im *Status 7* wieder zurückgesendet. Im Gegensatz zur Retoure erwarten Kund:innen bei einer Gewährleistung aber entweder eine neue Lieferung oder eine Rückerstattung des Rechnungsbetrags mittels einer xref:auftraege:auftraege-verwalten.adoc#500[Gutschrift].
// TODO: Links prüfen

[TIP]
.Garantie vs. Gewährleistung
====
Im Gegensatz zur freiwillig erklärten Garantie handelt es sich bei der Gewährleistung um die *gesetzliche Pflicht* der Händler:innen, Mängel am Artikel, die bereits bei Lieferung bestanden haben, für Käufer:innen kostenlos zu beseitigen. Käufer:innen können die Gewährleistung gerichtlich bis zu 2 Jahre bei beweglichen Artikeln oder 3 Jahre bei unbeweglichen Artikeln geltend machen. Ab 6 Monaten nach Erhalt der Ware müssen Käufer:innen jedoch beweisen, dass die Mängel bereits bei Erhalt der Ware vorhanden war.
====

Wenn ein Gewährleistungsfall vorliegt, entscheidest du als Händler:in, ob du Käufer:innen die Kosten erstattest, den Artikel reparierst oder den Artikel austauschst. Soll ein Umtausch durchgeführt werden, lege eine *Gewährleistung* an. Möchtest du das Geld erstatten, lege eine xref:auftraege:auftraege-verwalten.adoc#500[Gutschrift] im Tab *Übersicht* der Gewährleistung an. Ob du die *Versandkosten* in einer Gewährleistung übernimmst oder nicht, wählst du in den xref:auftraege:grundeinstellungen.adoc#intable-shipping-costs-in-warranty[Grundeinstellungen] im Menü *Einrichtung » Aufträge » Einstellungen*.
// TODO: xref

[TIP]
.Einstellungen einer Gewährleistung
====
Wenn du eine Gewährleistung aus einem Auftrag heraus erzeugst, wird automatisch das *Versandprofil* des Auftrags übernommen. Die Einstellungen sind jedoch in der Gewährleistung änderbar. Bei *Lieferaufträgen* wird ebenfalls automatisch das korrekte Lager eingestellt. Die *Zahlungsart* bei Gewährleistungen ist änderbar.
====

[#create-warranty]
=== Gewährleistung anlegen

Normalerweise legst du eine Gewährleistung in einem bestehenden Retourenauftrag an. Es ist jedoch auch möglich, diese direkt aus dem zugrunde liegenden Hauptauftrag heraus anzulegen.

Wird die Ware nach Lieferung beanstandet und du entscheidest dich beispielsweise aus Kostengründen gegen die Rücksendung der Ware, lege die Gewährleistung direkt im Hauptauftrag an.

Möchtest du dagegen erst den Eingang der Retoure abwarten und die Ware prüfen, lege zunächst einen Retourenauftrag an und erstelle im Rahmen der Abwicklung dort eine Gewährleistung.

// TODO: Text wann und wie, für mehrere oder bestimmte Positionen 
:ordertype: Gewährleistungen

[.instruction]
Eine Gewährleistung anlegen:

. Öffne das Menü *Aufträge* und gehe in die Auftragssuche.
→ Die Auftragsübersicht wird angezeigt.
. Öffne den gewünschten Haupt- oder Retourenauftrag.
. Suche (icon:search[role="blue"]) den Auftrag, zu dem du eine Gutschrift anlegen möchtest.
. Öffne den Auftrag. +
. Klicke auf auf Warenkorb (icon:shopping_cart[set=material]) *Aufträge erstellen* und wähle aus der Dropdown-Liste *Gewährleistung*.
. Wähle entweder die Option aus bestimmten Positionen oder aus allen Positionen.
Beachte dazu die Erläuterungen in <<tabelle-{ordertype}-anlegen>>.
. *Speichere* (icon:save[role="green"]) die Einstellungen. +
→ Die Gewährleistung wird angelegt und erscheint links in der Navigation unter der Retoure oder dem Hauptauftrag.

Im Portlet *Historie* siehst du die Informationen: 
* Datum der Erstellung
* Benutzer
* die ausgeführte Aktion (hier: Neue Gewährleistung und darüber Warenbestandsautomatik) 
* geänderten Status.

[[table-settings-warranry]]
.Optionen beim Erfassen einer Gewährleistung
[cols="1,3"]
|====
|Einstellung |Erläuterung

2+^| *Einstellungen*

| *Status*
|Einen Status aus der Dropdown-Liste für die Gutschrift wählen. Voreingestellt ist der Standardstatus, der im Menü *Einrichtung » Aufträge » Einstellungen* gespeichert wurde.

| *Eigner*
|Einen Eigner aus der Dropdown-Liste wählen. Voreingestellt ist der aktuelle Benutzer.

// TODO: später abgleichen
| *Versandkosten*
|Wähle, ob die Versandkosten aus dem Hauptauftrag in die Gewährleistung übernommen werden sollen. Die Option, die du für *Versandkosten in Gewährleistung übernehmen* im Menü *Einrichtung » Aufträge » Einstellungen* gespeichert hast, ist voreingestellt. Du kannst die gespeicherte Einstellung anpassen.
////
add the shipping costs to the basket (only for the request / not visible in the basket) if the option is yes
////

| *Eigner*
|optional (nicht im 1. Schritt)


2+^| *Artikel*

| *Artikel-ID*
|Die Artikel-ID wird angezeigt.

| *Varianten-ID*
|Die Varianten-ID wird angezeigt.

| *Menge*
|Die Menge wird angezeigt. - editable with validation

| *Verfügbare Menge*
|Die Verfügbare Menge wird angezeigt.

| *Name der Artikelposition*
|Die Artikelposition wird angezeigt.
// TODO: Symbol Warenkorb mit + Symbol: Klicke auf das Icon, um Artikel in den Warenkorb zu legen.

Cart
| *Artikel-ID*
|Die Artikel-ID wird angezeigt.

| *Varianten-ID*
|Die Varianten-ID wird angezeigt.

| *Menge*
|Die Menge wird angezeigt. - editable with validation

| *Name der Artikelposition*
|Die Artikelposition ist editierbar.
|====

[#edit-warranty]
=== Gewährleistung bearbeiten
 
Gewährleistungsaufträge werden in der Navigation unter Auftragssuche angezeigt. Öffne eine Gewährleistung, um beispielsweise einen zusätzlichen *Preis* einzugeben, wenn du dem Käufer einen höherpreisigen Artikel als Ersatz liefern willst. Falls nötig, können hier auch die Mengen der in der Gewährleistung enthaltenen Auftragspositionen verändert werden. Um eine Gewährleistung zu bearbeiten, gehe wie im Folgenden beschrieben vor.

////
[.instruction]
Gewährleistung bearbeiten: - kann ich noch nicht sehen

. Öffne das Menü *Aufträge » Aufträge [Testphase]*.
. Gehe in die Auftragsübersicht.
. Wähle über das Symbol *Filter* im Filter *Auftragstyp* die Option *Gewährleistung*.
. Klicke auf *Suchen* (icon:search[role="blue"]). +
→ Es werden nur Gewährleistungen aufgelistet.
. Klicke in die Zeile der Gewährleistung, die du bearbeiten möchtest. +
→ Die Gewährleistung wird geöffnet und der Artikel kann über ... bearbeitet werden. Neu öffnen sich die Portlets und rechts im Portlet Übersicht ändert sich der Auftragstyp. - anpassen


[#finish-warranty]
=== Gewährleistung abschließen

Zum Abschließen einer Gewährleistung musst du, wenn für die Ersatzware ein Aufpreis berechnet wird, zunächst eine Rechnung in der Gewährleistung erzeugen. Falls du keine Ersatzware versendest, sondern dich mit der Käufer:in auf einen nachträglichen Preisnachlass auf die beanstandete Ware einigst, legst du eine Gutschrift im Hauptauftrag an.

Um die Bearbeitung einer Gewährleistung durch einen Umtausch abzuschließen, gehe wie im Folgenden beschrieben vor.

[.instruction]
Gewährleistung durch Umtausch abschließen:

. Öffne in der Gewährleistung das Tab *Belege*. ?? überarbeiten!
. Wähle *Rechnung* aus der Dropdown-Liste *Beleg erstellen*. +
→ Ein neues Bearbeitungsfenster öffnet sich. +
. *Speichere* (icon:save[role="green"]) die Einstellungen. +
→ Die Rechnung wird erzeugt und in einem eigenen Tab geöffnet.
. Wechsle in das Tab *Einstellungen*.
. Klicke in der Zeile *Warenausgang* auf das Symbol *Warenausgang buchen*. +
→ Der Warenausgang wird gebucht und der *Status* wechselt automatisch zu *[7] Warenausgang gebucht*.
. Wechsle in das Menü *Aufträge » Aufträge bearbeiten*.
. Setze den Status der Gewährleistung manuell auf Status *[10] Gewährleistung*.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

[TIP]
.Zahlungseingang bei Gewährleistungen buchen
====
Grundsätzlich müssen Zahlungen zu Gewährleistungen nur dann gebucht werden, wenn mit Käufer:innen ein Aufpreis vereinbart wurde. In diesem Fall buchst du den Zahlungseingang nach erfolgter Zahlung im Tab *Zahlung* der Gewährleistung.
====

Um die Bearbeitung einer Gewährleistung durch eine Gutschrift an den Käufer abzuschließen, gehe wie im Folgenden beschrieben vor:

[.instruction]
Gewährleistung durch Gutschrift abschließen:

. Öffne den Haupt- oder Retourenauftrag zur Gewährleistung, für die du eine Gutschrift anlegen möchtest.
. Öffne das Tab *Übersicht*
. Klicke auf die Dropdown-Liste *Gutschrift* und dort auf die Einstellung *anlegen*. +
→ Der Gutschriftauftrag wird angelegt und in einem eigenen Tab geöffnet.

Der weitere Bearbeitungsprozess läuft identisch mit dem regulären Anlegen einer Gutschrift und dem Erzeugen eines Gutschriftbelegs ab und wird im Kapitel xref:auftraege:auftraege-verwalten.adoc#500[Auftragstyp Gutschrift nutzen] detailliert beschrieben.
////

// TODO: 
== Lieferauftrag
== geteilter Auftrag

Beim Teilen eines Auftrags wählst du Artikelpositionen, mit denen ein neuer Auftrag angelegt wird, der diese Positionen enthält. Der neu angelegte Auftrag kann wiederum geteilt werden. Der usprüngliche Auftrag bleibt erhalten, es werden nur die gewählten Artikelpositionen entfernt. Für jeden geteilten Auftrag stehen alle Bearbeitungsmöglichkeiten zur Verfügung.

////
Tabelle 21 unter https://knowledge.plentymarkets.com/de-de/manual/main/auftraege/auftraege-verwalten.html#intable-splitting-orders
////

[#order-type-delivery-order]
== Auftragstyp Lieferauftrag nutzen

Mithilfe des Auftragstyps *Lieferauftrag* werden aus einem Hauptauftrag Lieferaufträge für die enthaltenen Auftragspositionen generiert, so dass du diese einzeln oder in Teilen verschicken kannst. So kannst du beispielsweise Artikel, die du auf Lager hast, sofort losschicken und Artikel, die du erst noch geliefert bekommst, später nachsenden. Führe dies mit unterschiedlichen oder auch nur mit einem Versanddienstleister durch. +
Lieferaufträge können *manuell*, *automatisch* oder per *Ereignisaktion* erstellt werden.

[WARNING]
.Alle Auftragspositionen in Lieferaufträge übernehmen
====
Erstellst du Lieferaufträge aus einem Auftrag, müssen _alle_ Auftragspositionen des Hauptauftrags in Lieferaufträge überführt werden. Übernimmst du nicht alle Auftragspositionen in Lieferaufträge, kommt es zu Fehlern im Bestand und den Lagern.
====

[#delivery-order-characteristics]
=== Merkmale von Lieferaufträgen

Im Allgemeinen besitzen Lieferaufträge folgende Eigenschaften:

* Die Auftragspositionen eines Lieferauftrages lassen sich nach dem Erzeugen des Lieferauftrages *nicht* mehr anpassen.
* Der *Preis* und das *Gewicht* eines Artikels werden aus dem Hauptauftrag übernommen.
* Die Auftragssprache wird aus dem Hauptauftrag übernommen.
* *Adressetikett*, *Lieferschein*, *Proformarechung* und *Gelangensbestätigung* können im Tab *Belege* eines Lieferauftrags generiert werden.
* Die *Rechnung* und alle weiteren Dokumente werden zentral im Hauptauftrag generiert.
* Die Bestandsreservierung für die in einem Lieferauftrag enthaltene Menge wird beim Anlegen eines Lieferauftrags vom Hauptauftrag auf den Lieferauftrag übertragen.

[IMPORTANT]
.Gemeinsamer Status
====
Der Hauptauftrag folgt immer dem Status des Lieferauftrags mit dem niedrigsten Status.
Wenn z.B. ein Auftrag in Status *5.0* zwei Lieferaufträge hat und einer dieser Lieferaufträge wechselt in den Status *6.5*, ändert sich am Status des Hauptauftrages zunächst nichts. Erst wenn der zweite Lieferauftrag ebenfalls in den Status *6.5* wechselt, wird automatisch auch der Status des Hauptauftrages zu *6.5* geändert.
====

[#basic-settings-delivery-order]
=== Grundeinstellungen für Lieferaufträge vornehmen

[WARNING]
.Lager pro Auftragsposition zuordnen
====
Im Menü *Einrichtung » Aufträge » Einstellungen* muss zwingend für die xref:auftraege:grundeinstellungen.adoc#intable-warehouse-assignment[Zuordnung des Lagers] die Option *b) pro Artikelposition kann ein Lager zugeordnet werden* ausgewählt werden.
====


Im Menü *Einrichtung » Aufträge » Auftragstypen » Lieferauftrag* legst du vorab fest, nach welchem Kriterium Aufträge in Lieferaufträge gesplittet werden.

[.instruction]
Optionen für das Splitten von Aufträgen in Lieferaufträge wählen:

. Öffne das Menü *Einrichtung » Aufträge » Auftragstypen » Lieferauftrag*.
. Nimm die Einstellungen anhand von <<table-order-types-delivery-order-options>> vor.
. *Speichere* (icon:save[role="green"]) die Einstellungen.


[[table-order-types-delivery-order-options]]
.Optionen für das *Splitten von Aufträgen in Lieferaufträge*
[cols="1,3"]
|====
|Einstellung |Erläuterung

2+^| *Aufträge in Lieferaufträge splitten nach*

| *Aus*
|Es erfolgt *keine Aufsplittung*. +
*_Achtung_*: Wenn du diese Option aktivierst, können Lieferaufträge nur noch manuell angelegt werden. Das automatische Generieren sowie das Erstellen von Lieferaufträgen per Ereignisaktion sind bei dieser Auswahl nicht möglich.

| *Lager*
|Die Lieferaufträge werden anhand der verschiedenen *Lager* der Auftragspositionen erstellt.

| *Versandprofil*
|Die Lieferaufträge werden anhand der verschiedenen *Versandprofile* der Auftragspositionen erstellt.

| *Lager und Versandprofil*
|Die Lieferaufträge werden anhand der verschiedenen *Lager und der Versandprofile* der Auftragspositionen erstellt.

| *Lager und Netto-Warenbestand*
|Die Lieferaufträge werden anhand der verschiedenen *Lager und des Netto-Warenbestands* der Auftragspositionen erstellt.
|====


[#create-order-from-existing-order]
=== Auftrag über einen bestehenden Auftrag anlegen

In einem Auftrag findest du das Symbol *Neuer Auftrag* (icon:plus-square[role="green"]) im Portlet *Übersicht*. Gehe folgendermaßen vor, um einen neuen Auftrag über das Portlet *Übersicht* eines bestehenden Auftrags anzulegen. ...
// TODO: Text auf neue UI anpassen am Beispiel Retoure


[#create-order-from-offer]
=== Auftrag über ein Angebot anlegen

In einem Angebot findest du das Symbol *Neuer Auftrag* (icon:plus-square[role="green"]). Gehe folgendermaßen vor, um einen neuen Auftrag über ein bestehendes Angebot anzulegen. ...
// TODO: Text auf neue UI anpassen
Die Besonderheit ist, dass bei Menge eine beliebige Menge eingegeben werden kann.
Der *Neue Auftrag* wird dir in der Navigation unter dem Angebot in blauer Schrift angezeigt sowie im Portlet *Auftragsreferenzen*.

[[table-order-from-offer]]
.Spalten Tabelle Neuer Auftrag
[cols="1,3"]
|====
|Einstellung |Erläuterung

Einstellung
| *Status*
|Wähle einen Status aus der Dropdown-Liste. 

| *Eigner*
|Wähle einen Eigner aus der Dropdown-Liste.
Angezeigt wird der aktuelle Nutzer.

Symbol 3 Striche mit +

// TODO: 2. Tabelle
 Suche
| *Artikel-ID*
|Die Artikel-ID wird angezeigt.
 
| *Varianten-ID*
|Die Varianten-ID wird angezeigt.
 
| *Menge*
|Die Menge wird angezeigt. (Validierung)
 
| *Verbleibende Stückzahl*
|Die Verbleibende Stückzahl wird angezeigt.
Die *verbleibende Stückzahl* zeigt dir an, wie viele Artikel du noch übernehmen kannst bzw. wie viele du dem aktuellen Lieferauftrag noch hinzugefügen kannst.
 
| *Offene Menge*
|Die Offene Menge wird angezeigt.
Die *Offene Menge* zeigt dir an, wie viele Artikel nicht in den Lieferauftrag überführt werden können.
 
| *Verfügbarer Warenbestand*
|Der Verfügbare Warenbestand wird angezeigt.
 
| *Artikelname*
|Der Artikelname wird angezeigt.
 
Klicke auf das Warenkorb Symbol mit +
 
darunter
 
| *Artikel-ID*
|Die Artikel-ID wird angezeigt.
 
| *Varianten-ID*
|Die Varianten-ID wird angezeigt.
 
| *Menge*
|Die Menge wird angezeigt.
Die Menge kann hier verändert werden und beliebig hoch sein.

| *Artikelname*
|Der Artikelname wird angezeigt.
|====



[#create-delivery-order-manually]
=== Lieferaufträge manuell anlegen

Bei Bedarf kannst du Lieferaufträge manuell über den Hauptauftrag anlegen. Bei dieser Methode wählst du für jeden Lieferauftrag einzeln die Auftragspositionen und -mengen aus, die der Lieferauftrag enthalten soll.
// TODO: ergänzen

[.instruction]
Lieferaufträge manuell anlegen:

// TODO: prüfen ob richtig erklärt: Portlet und Lieferauftrag anlegen

. Öffne das Menü *Aufträge » Aufträge (Testphase) » Auftragssuche*.
. Öffne aus der Übersicht den Auftrag, für den Lieferaufträge angelegt werden sollen.
. Klicke auf das Warenkorb und wähle den Auftragstyp *Lieferauftrag*.
. Wähle die Option *Für bestimmte Positionen*. 
. Klicke anschließend auf das *Lieferauftrag anlegen* (icon:execute[set=plenty]). +
→ Der Lieferauftrag wird angelegt.
. Wiederhole den Prozess, um weitere Lieferaufträge anzulegen.


[#create-delivery-orders-automatically]
=== Lieferaufträge automatisch anlegen

[IMPORTANT]
.Bedingung für das automatische Anlegen von Lieferaufträgen
====
Lieferaufträge können nur automatisch erzeugt werden, wenn noch kein Lieferauftrag zu dem Auftrag besteht.
====

Wenn du Lieferaufträge automatisch anlegen lässt, greifen die zuvor in <<table-order-types-delivery-order-options>> beschriebenen Kriterien zum Aufsplitten in Lieferaufträge. Somit müssen die Auftragspostionen und -mengen nicht einzeln ausgewählt werden. Stattdessen überführt das System je nach gewähltem Kriterium alle Auftragspositionen automatisch in Lieferaufträge.
// TODO: Tabelle - wohin? https://knowledge.plentymarkets.com/de-de/manual/main/auftraege/auftraege-verwalten.html#intable-splitting-orders

[.instruction]
Lieferaufträge automatisch anlegen

. Öffne das Menü *Aufträge » Aufträge (Testphase) » Auftragssuche*.
. Öffne aus der Übersicht den Auftrag, für den Lieferaufträge angelegt werden sollen.
. Klicke auf das Warenkorb und wähle den Auftragstyp *Lieferauftrag*.
. Wähle die Option *Automatisch aufteilen* . 
. Klicke anschließend auf das *Lieferauftrag anlegen* (icon:execute[set=plenty]). +
→ Der Lieferauftrag wird angelegt.
. Wiederhole den Prozess, um weitere Lieferaufträge anzulegen.

// TODO: Text auf neue UI anpassen, nach Rücksprache mit Patrick Beispiele weiterhin nutzbar

////
Hier die Beispiele einfügen
[#create-delivery-order-via-ea] 
=== Lieferaufträge per Ereignisaktion anlegen
////



[#edit-sales-and-delivery-orders]
=== Haupt- und Lieferaufträge bearbeiten

// TODO: Text aus alter UI

Wenn du einen Hauptauftrag löschen möchtest, musst du zuerst die Lieferaufträge löschen. Lieferaufträge können einzeln oder über die Gruppenfunktion in der Auftragssuche gelöscht werden. Erst danach kann der Hauptauftrag gelöscht werden. Beachte aber, dass Aufträge nicht gelöscht werden können, sobald steuerrelevante Dokumente für diesen Auftrag existieren.

Es können weitere Auftragspositionen zum Hauptauftrag hinzugefügt oder daraus gelöscht werden. Allerdings können nur Auftragspositionen, die nicht in Lieferaufträgen enthalten sind, aus dem Hauptauftrag gelöscht werden. Die Menge der Artikel im Hauptauftrag lässt sich erhöhen oder verringern. Löschen solltest du jedoch nur *nicht zu Lieferaufträgen zugeordnete Mengen*.

[WARNING]
.Löschen von Positionen in einem Lieferauftrag
====
Technisch möglich ist zwar auch das Löschen von Positionen, die bereits in einem Lieferauftrag enthalten sind. Dies solltest du jedoch vermeiden, um Fehlfunktionen zu verhindern.
====


[[table-settings-split-order]]
.Optionen beim Erfassen eines geteilten Auftrags
[cols="1,3"]
|====
|Einstellung |Erläuterung

2+^| *Einstellungen*

| *Eigner*
|Einen Eigner aus der Dropdown-Liste wählen. Voreingestellt ist der aktuelle Benutzer.

| *Status*
|Einen Status aus der Dropdown-Liste für die Gutschrift wählen. Voreingestellt ist der Standardstatus, der im Menü *Einrichtung » Aufträge » Einstellungen* gespeichert wurde.


2+^| *Artikel*

| *Artikel-ID*
|Die Artikel-ID wird angezeigt.

| *Varianten-ID*
|Die Varianten-ID wird angezeigt.

| *Menge*
|Die Menge wird angezeigt. - editable with validation

| *Verfügbare Menge*
|Die Verfügbare Menge wird angezeigt.

| *Name der Artikelposition*
|Die Artikelposition wird angezeigt.
// TODO: Symbol Warenkorb mit + Symbol - click to add item ???

Warenkorb mit +: klicke darauf, um Artikel in den Warenkorb zu legen.

Cart
| *Artikel-ID*
|Die Artikel-ID wird angezeigt.

| *Varianten-ID*
|Die Varianten-ID wird angezeigt.

| *Menge*
|Die Menge wird angezeigt. - editable with validation

| *Name der Artikelposition*
|Die Artikelposition ist editierbar.
|====


Auftragstyp Sammelauftrag

Auftragstyp Vorbestellung


Aufträge verwalten (alte UI)
// TODO: verweisen, aber Doppelungen vermeiden