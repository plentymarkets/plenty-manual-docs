= Zahlungen verwalten
:page-aliases: beta-zahlungen-verwalten.adoc
:keywords: Zahlung, Zahlungen, Zahlungsverkehr, Zahlungseingang, Zahlungseingänge, Payment, automatische Zuordnung, Zahlungszuordnung, Properties, Zahlungsdaten, Auftragszuordnung, Zahlung zuordnen, Zahlungsübersicht, Zahlungsinformationen, Zahlung aufteilen, Zahlung teilen, Teilzahlung, Zahlungen bearbeiten
:description: Erfahre alles über das Bearbeiten und Verwalten von Zahlungen.
:author: team-fulfillment-payment

Diese Seite beschreibt das Verwalten von Zahlungen. Zahlungen erreichen dein System aus verschiedenen Quellen. Verwalte die Zahlungen im Menü *Aufträge » Zahlungsverkehr*.

[#grundeinstellungen]
== Grundeinstellungen für Zahlungseingänge vornehmen

In diesem Menü nimmst du Einstellungen für die automatische Zuordnung von Zahlungen zu Aufträgen sowie zur Zahlungskulanz vor. Es sind bereits Standardeinstellungen in deinem plentymarkets System gespeichert, die aus Erfahrungswerten gewonnen wurden und sich in der Praxis bewährt haben. Um diese Einstellungen zu ändern, gehe wie im Folgenden beschrieben vor.

[.instruction]
Grundeinstellungen ändern:

. Öffne das Menü *Einrichtung » Aufträge » Zahlung » Eingänge*.
. Nimm die Einstellungen vor. Beachte dazu die Erläuterungen in <<#tabelle-grundeinstellungen-zahlungseingang>>.
. *Speichere* (material:save[]) die Einstellungen.

[[tabelle-grundeinstellungen-zahlungseingang]]
.Grundeinstellungen für Zahlungseingänge vornehmen
[cols="1,3"]
|====
|Einstellung |Erläuterung

| [#intable-match-automatic-assignment]*Übereinstimmung für automatische Zuordnung*
|Wähle *0.7* (nicht so genaue Übereinstimmung zur Zuordnung erforderlich) oder *1.0* (genaue Übereinstimmung erforderlich). Wenn dieser Wert höher eingestellt ist, kann das Problem auftreten, dass Zahlungen nicht zugeordnet werden können. Daher ist in der *Standard-Einstellung* ein Wert von *0,75* eingestellt.

| [#intable-goodwill-payment]*Zahlungskulanz*
|Damit z.B. interne Nachkommabeträge (ab der dritten Nachkommastelle) nicht zu falschen Buchungen führen, sollte ein *Mindestbetrag* von *0,01* eingetragen sein (Standard-Einstellung). Wenn z.B. *0,05* eingestellt ist, werden Fehlbeträge bis 5 Cent trotzdem als korrekte Buchung behandelt.

| [#intable-import-customer-bank-data]*Kundenbankdaten importieren*
|Wähle, ob die Bankdaten deiner Kontakte beim Zahlungseingang importiert und im Bereich xref:crm:kontakt-bearbeiten.adoc#bankdaten[Bankdaten] im Kontaktdatensatz gespeichert werden sollen oder nicht. +
*_Wichtig:_* Die Bankdaten dürfen nur mit Zustimmung des Kontakts importiert und gespeichert werden. Daher ist hier standardmäßig *Nein* voreingestellt. Beachte und prüfe vor dem Aktivieren dieser Option die Rechtslage zu diesem Thema, ggf. auch im jeweiligen Lieferland.

| [#intable-assign-paypal-payment-ebay-listing]*PayPal Zahlung nur entsprechendem eBay Listing zuordnen, sofern an der Zahlung hinterlegt*
| *_Hinweis:_* Diese Funktionalität bezieht sich ausschließlich auf die alte PayPal-Schnittstelle für plentymarkets Callisto-Shops und *_nicht_* auf das PayPal-Plugin! +
Falls du eBay-Listings in Kombination mit der Zahlungsart PayPal verwendest, empfehlen wir, bei dieser Option *JA* auszuwählen. So wird sichergestellt, dass entsprechende PayPal-Zahlungen den dazugehörigen Aufträgen von eBay korrekt zugeordnet werden. Wenn an einer PayPal Zahlung eine eBay Listing-ID gespeichert ist, so wird bei aktivierter Option diese Zahlung nur dem Auftrag zugeordnet, der über eine übereinstimmende eBay Listing-ID verfügt.

| [#intable-ignore-woocommerce-transactions]*WooCommerce PayPal Zahlung ignorieren*
| *_Hinweis:_* Diese Funktionalität bezieht sich ausschließlich auf die alte PayPal-Schnittstelle für plentymarkets Callisto-Shops und *_nicht_* auf das PayPal-Plugin! +
Wähle die Option *JA*, um bei Aufträgen mit der Zahlungsart PayPal, die über WooCommerce importiert werden, den automatischen Zahlungsimport zu deaktivieren.

| [#intable-exclude-orders-payment-method-automatic-assignment]*Aufträge mit folgenden Zahlungsarten von der automatischen Zuordnung ausschließen*
|Wähle hier Zahlungsarten, für die _keine_ Zahlungen ins System eingehen. Diese werden dann bei der automatischen Zahlungszuordnung _nicht_ beachtet. +
Eine Mehrfachauswahl ist über die Tastatur möglich.

| [#intable-exclude-orders-referrer-automatic-assignment]*Aufträge mit folgenden Herkünften von der automatischen Zuordnung ausschließen*
|Wähle hier Herkünfte, für die _keine_ Zahlungen ins System eingehen. Diese werden dann bei der automatischen Zahlungszuordnung _nicht_ beachtet. +
Eine Mehrfachauswahl ist über die Tastatur möglich.

|====

[#10]
== Neue Zahlungen im System

Zahlungen gehen entweder automatisch im System ein oder werden manuell eingebucht. Nach dem Eingang in plentymarkets werden die Zahlungen Aufträgen über eine unscharfe Suche automatisch zugeordnet. Wenn die Zuordnung fehlschlägt, können Zahlungen Aufträgen manuell zugeordnet werden. Verwalte und bearbeite Zahlungen im Menü *Aufträge » Zahlungsverkehr*. Unzugeordnete Zahlungen erkennst du am Kreditkartensymbol (material:credit_card[]). Du kannst Zahlungen Aufträgen direkt in der Übersicht oder in der Detailansicht der Zahlung <<#30, zuordnen>>. +
In der Übersicht werden die Zahlungen in deiner gewählten xref:payment:waehrungen.adoc#30[Systemwährung] angezeigt. Wenn die Zahlung in einer Fremdwährung getätigt wurde, wird dieser Betrag hinter der Systemwährung in Klammern ebenfalls angezeigt.

[TIP]
.Ereignisaktionen für Zahlungseingänge einrichten
====
Der Zahlungseingang als Ereignis spielt in der Auftragsbearbeitung eine wichtige Rolle, weil der Versand häufig erst nach Zahlungseingang erfolgt. In plentymarkets wechselt der Status der meisten Aufträge mit dem Eintreffen der Zahlung von *Status [3] - Warten auf Zahlung* in *Status [5] - Freigabe Versand*. Richte xref:automatisierung:ereignisaktionen.adoc#[Ereignisaktionen] ein, um die Auftragsbearbeitung zu automatisieren und den Versand nach Zahlungseingang auszulösen.
====

[#bankbuchungsimport]
=== Bankbuchungen importieren

Zahlungsvorgänge bei der Zahlungsart *Vorkasse* und sonstigen Überweisungen fallen in Form von Bankbuchungen an. Bei diesen Zahlungsarten müssen die auf deinem Konto gebuchten Zahlungen an das System gemeldet und den Aufträgen korrekt zugeordnet werden. Nutze den Import-Typ xref:daten:elasticSync-bankbuchungen.adoc#[Bankbuchung], um deine Bankbuchungen in dein plentymarkets System zu importieren. Ein Praxisbeispiel für den Buchungsimport findest du auf der Handbuchseite xref:daten:best-practices-elasticsync-buchungen.adoc#[Neue Buchungen importieren]. +
Nach dem Import werden die Bankbuchungen wie andere Zahlungen auch automatisch Aufträgen zugeordnet und können wie gewohnt im Menü *Aufträge » Zahlungsverkehr* bearbeitet werden.

[#paypal-zahlungsimport]
=== PayPal Import

Der Eintrag *PayPal Import* mit dem PayPal-Icon in der linken Navigation des Menüs *Aufträge » Zahlungsverkehr* wird nur angezeigt, wenn das xref:payment:paypal.adoc#[PayPal-Plugin] installiert ist. Dafür ist das PayPal-Plugin _mindestens in Version 6.0.0_ erforderlich. +
Mit der Funktion *PayPal Import* kannst du PayPal-Zahlungen über Transaktionsnummern von deinem PayPal-Konto direkt in dein plentymarkets System importieren. Dabei werden nur neue Zahlungen importiert. Es werden _keine_ bereits existierenden Zahlungen aktualisiert. Gehe für den Import wie folgt vor:

[.instruction]
PayPal-Zahlungen importieren:

. Öffne das Menü *Aufträge » Zahlungsverkehr*.
. Klicke in der linken Navigation auf *PayPal Import*.
. Wähle im Feld *PayPal-Konto* das passende Konto.
. Gib im Feld *Transaktionsnummer(n)* die Transaktionsnummern der Zahlungen ein, die du importieren möchtest. +
→ Du kannst mehrere Transaktionsnummern kommasepariert eingeben.
. Klicke auf *Importieren* (material:import_export[]). +
→ Die Zahlungen mit den eingegebenen Transaktionsnummern werden importiert und der Übersichtstabelle hinzugefügt.

Nach dem Import der PayPal-Zahlungen werden diese wie andere Zahlungen auch automatisch Aufträgen zugeordnet. Beachte für die automatische Zuordnung, dass diese von der <<#intable-match-automatic-assignment, Einstellung>> *Übereinstimmung für automatische Zuordnung (0.7 - 1.0)* im Menü *Einrichtung » Aufträge » Zahlung » Eingänge* abhängt. Der Wert 0.7 steht für 70% Übereinstimmung, der Wert 1.0 für 100% Übereinstimmung. Wenn eine Zahlung nicht automatisch zugeordnet werden kann, kannst du die Zahlung manuell <<#30, zuordnen>>. +
*_Beachte:_* Nach dem Import kann es bis zu 15 Minuten dauern, bis die automatische Zuordnung erfolgt ist.

[#spalten-konfigurieren]
== Spalten konfigurieren

Du kannst die Tabelle in der Übersicht im Menü *Aufträge » Zahlungsverkehr* anpassen. Das bedeutet, du selbst entscheidest, welche Informationen in den Tabellenspalten angezeigt werden. 

[.instruction]
Spalten konfigurieren:

. Klicke oben rechts auf *Spalten konfigurieren* (material:settings[]). +
→ Das Fenster *Spalten konfigurieren* öffnet sich.
. Wähle, welche Spalten angezeigt werden sollen.
. Verschiebe (material:drag_indicator[]) die Spalten so, dass sie in der Reihenfolge angezeigt werden, in der du sie brauchst.
. Klicke auf *Bestätigen*, um deine Auswahl zu speichern.

[#20]
== Zahlungen suchen

Um eine bestimmte Zahlung zu suchen, gibst du die dir bekannten Suchbegriffe in die Filter ein. Es ist auch möglich, mehrere Suchbegriffe gleichzeitig in die Suchfelder einzugeben. Dies ermöglicht eine schnellere und genauere Suche. Du kannst zum Beispiel Filter kombinieren, um nach unzugeordneten Zahlungen der letzten Woche zu suchen.

[.instruction]
Zahlung suchen: 

. Öffne das Menü *Aufträge » Zahlungsverkehr*.
* *_Möglichkeit 1:_* Klicke auf material:search[] (*Suchen*), um eine Liste aller Zahlungen zu sehen. 
* *_Möglichkeit 2:_* Gib einen Wert im Suchfeld ein und wähle dann den für dich passenden Filter aus der Vorschlagsliste. *_Beispiel:_* Wenn du eine Zahl oder Buchstaben eingibst, werden dir mögliche Filter vorgeschlagen wie z.B. die Auftrags-ID oder die Variantennummer.
* *_Möglichkeit 3:_* Klicke auf material:tune[], um die Suchergebnisse mit Hilfe von Filtern einzugrenzen.
. Beachte die Erläuterungen zu den Filtern in <<#tabelle-zahlungen-suchen>>.  +
*_Tipp:_* Gib eine Kombination aus allen oder mehreren Werten und Optionen ein, um die Suche noch genauer einzugrenzen.
. Klicke auf material:search[] *Suchen*. +
→ Die Zahlungen, die den eingestellten Suchkriterien entsprechen, werden in der Übersicht angezeigt.

[[tabelle-zahlungen-suchen]]
.Zahlungen suchen
[cols="1,3"]
|====
| Einstellung | Erläuterung

| *Auftrags-ID*
|Suche anhand von Auftrags-IDs nach Aufträgen, denen eine Zahlung zugeordnet ist.

| *Transaktions-ID*
|Die Transaktions-ID wird vom Zahlungsanbieter vergeben, damit sich die Zahlung dem Anbieter zuordnen lässt. Gib eine Transaktions-ID ein, um nach einer Zahlung mit dieser Transaktions-ID zu suchen.

| *Transaktionscode*
|Der Transaktionscode beschreibt die Transaktion selbst. Gib einen Transaktionscode ein, um nach einer Zahlung mit diesem Code zu suchen.

| *Referenz-ID*
|Eine Referenz-ID verknüpft Zahlungen, z.B. eine Zahlung und eine Erstattung, miteinander. Gib eine Referenz-ID ein, um nach einer Zahlung mit dieser Referenz-ID zu suchen.

| *Zahlungs-ID*
|Gib eine Zahlungs-ID ein, um nach der Zahlung mit dieser ID zu suchen.

| *Zahlungsart*
|Gib eine bestimmte Zahlungsart ein, um nach Zahlungen zu suchen, die mit dieser Zahlungsart getätigt wurden.

| *Verwendungszweck*
|Gib entweder den ganzen Verwendungszweck oder einen Teil des Verwendungszwecks ein, um nach Zahlungen mit diesem Zweck zu suchen.

| *Absender der Zahlung*
|Gib den Namen der Person ein, die die Zahlung getätigt hat, um nach Zahlungen von dieser Person zu suchen.

| *Soll/Haben*
|Wähle *Soll* oder *Haben*. +
*Haben* = Alle Zahlungseingänge mit positivem Wert werden angezeigt. +
*Soll* = Alle Zahlungseingänge mit negativem Wert werden angezeigt.

| *Operator* und *Betrag*
|Wähle einen *Operator* und gib einen *Betrag* ein. +
*_Beispiel:_* Wähle *Größer als oder gleich* und gib 300 als *Betrag* ein, um alle Zahlungen mit einem Zahlungsbetrag von 300 oder mehr anzuzeigen.

| *Zuordnung*
|Wähle *Zugeordnet* oder *Unzugeordnet*. +
*Zugeordnet* = Zeigt nur Zahlungen an, die bereits einem Auftrag zugeordnet wurden. +
*Unzugeordnet* = Zeigt nur Zahlungen an, die keinem Auftrag zugeordnet wurden.

| *Status*
|Wähle einen Status, um nach Zahlungen mit diesem Status zu suchen.

| *Transaktionstyp*
|Wähle einen Transaktionstyp, um nach Zahlungen mit diesem Transaktionstyp zu suchen.

| *Währung*
|Wähle eine Währung, um nach Zahlungen in dieser Währung zu suchen.

| *Datumstyp*
|Wähle, nach welchem Datumstyp in Verbindung mit der Datumsauswahl darunter gesucht werden soll. Du kannst wählen zwischen *Importdatum*, *Eingangsdatum* und *Zuordnungsdatum*. Angezeigt werden dann alle Zahlungen, die in dem gewählten Zeitraum entsprechend importiert wurden, eingegangen sind oder zugeordnet wurden.

| *von* und *bis*
|Wähle in Verbindung mit *Datumstyp* einen Zeitraum aus, um nach Zahlungen zu suchen, die in diesem Zeitraum importiert wurden, eingegangen sind oder zugeordnet wurden, je nach Auswahl.

| *Zurücksetzen*
|Setzt die gewählten Filterkriterien zurück.

| *Suchen*
|Führt die Suche aus. Die gefundenen Zahlungen werden in der Übersicht angezeigt. +
*_Tipp:_* Setze keine Filter, wenn du alle Zahlungen in der Übersicht sehen möchtest.

|====


[#aktuellen-filter-speichern]
=== Aktuellen Filter speichern

Wenn du eine Suche ausführst, siehst du deine gewählten Filter oben als Chips angezeigt. Diese Filter kannst du speichern, um sie in Zukunft schneller und einfacher wieder verwenden zu können.

[.instruction]
Aktuellen Filter speichern: 

. Führe eine <<#20, Suche>> aus.
. Klicke auf *Gespeicherte Filter* (material:bookmarks[]).
. Klicke auf material:bookmark_border[] *Aktuellen Filter speichern*.
. Gib einen Namen für den Filter ein.
. Entscheide, ob
** dieser <<#filter-als-standard, Filter als Standard>> festgelegt werden soll (material:toggle_on[role=skyBlue])
** dieser Filter für alle Benutzer:innen erstellt werden soll (material:toggle_on[role=skyBlue]).
. Klicke auf *SPEICHERN*. +
→ Der Filter erscheint nun unter *Gespeicherte Filter* (material:bookmarks[]).

[TIP]
Lege die Reihenfolge der Filter per Drag-and-drop mit einem Klick auf *Verschieben* (material:drag_indicator[]) fest. Klicke auf material:delete[], um einen Filter zu löschen.

[#gespeicherte-filter-anwenden]
=== Gespeicherte Filter anwenden

Gehe wie im Folgenden vor, um einen gespeicherten Filter in der Suche anzuwenden.

[.instruction]
Gespeicherte Filter anwenden: 

. Klicke auf *Gespeicherte Filter* (material:bookmarks[]).
. Klicke auf einen bereits erstellten Filter. +
→ Die Suche wird ausgeführt und die verwendeten Filtereinstellungen werden oben als Chips angezeigt.

[#filter-als-standard]
== Filter als Standard festlegen

Damit du einen häufig verwendeten Filter nicht jedes Mal beim Öffnen des Menüs *Aufträge » Zahlungsverkehr* erst aus der Liste deiner <<#gespeicherte-filter-anwenden, gespeicherten Filter>> wählen musst, kannst du einen erstellten Filter als Standard festlegen. Jedes Mal, wenn du das Menü *Aufträge » Zahlungsverkehr* öffnest, wird dieser Filter dann also automatisch ausgeführt.

Du kannst einen Filter direkt beim Erstellen als Standard festlegen wie im Kapitel <<#aktuellen-filter-speichern, Aktuellen Filter speichern>> beschrieben oder du legst den Filter nachträglich aus der Übersicht heraus als Standard fest.

Klicke in der Zeile des gespeicherten Filters auf material:star_border[] *Als Standard festlegen*. Wenn du einen anderen Filter als Standard festlegen möchtest, deaktiviere den aktuell gewählten Standardfilter mit einem Klick auf material:star[] *Nicht als Standard verwenden*.


[#payments-myview]
== MyView nutzen

Die Bedienoberfläche der Detailansichten von Zahlungen sowie der Ansicht zum Teilen einer Zahlung werden dir als MyView zur Verfügung gestellt. Das bedeutet, dass Benutzer:innen sich jeweils eine eigene Ansicht mit den zur Verfügung stehenden Elementen erstellen können. Dadurch kann jede:r Benutzer:in selbst bestimmen, welche Informationen an welcher Stelle benötigt werden. Durch diese individuelle Ansicht wird das Arbeiten nicht nur komfortabler, sondern auch beschleunigt. +
In diesem Kapitel wird erklärt, wie man mit MyView umgeht und sich eine eigene Ansicht anlegt. Das Bearbeiten von Zahlungen, z.B. das <<#30, Zuordnen>>, das <<#40, Lösen>> oder auch das <<#50, Teilen>> von Zahlungen, wird in den nachfolgenden Kapiteln erklärt.

Von der Übersichtstabelle aller Zahlungen im Menü *Aufträge » Zahlungsverkehr* gelangst du auch zur Detailansicht einer Zahlung. Klicke in die entsprechende Zeile oder auf die Zahlungs-ID und die Detailansicht der ausgewählten Zahlung öffnet sich. +
Zur Ansicht zum Teilen von Zahlungen kommst du, indem du in der Übersichtstabelle in der Zeile der Zahlung auf *Zahlung teilen* (material:call_split[]) klickst. +
Wenn du in diesen Bereichen noch keine eigene Ansicht erstellt hast, wird hier die *Standardansicht* angezeigt. Du kannst diese Ansicht so lassen und damit arbeiten oder eine eigene Ansicht erstellen. Eigene Ansichten werden gespeichert und stehen dir dann zusammen mit der Standardansicht als Auswahl unter der Liste der Ansichten (icon:caret-down[role="darkGrey"]) zur Verfügung. Somit kannst du zwischen den Ansichten wechseln, solltest du dies wollen. Die ausgewählte Ansicht wird beim Öffnen einer Zahlung immer angewendet.

[#create-new-view]
=== Neue Ansicht erstellen

. Klicke auf die Liste der Ansichten (icon:caret-down[role="darkGrey"]).
. Klicke auf material:add[] *Neue Ansicht erstellen ...*.
. Gib einen Namen ein.
. Klicke auf *Ansicht erstellen*. +
→ Die neue Ansicht wird erstellt und automatisch geöffnet, d.h. die Ansicht wird angewendet. Es ist jetzt möglich, zwischen den Ansichten zu wechseln.

[#create-grid]
=== Ein Raster erstellen

. Klicke auf *Ansicht bearbeiten* (terra:design_inline_edit[]).
. Füge Zeilen und Spalten hinzu, um ein Raster zu erstellen.
.. Klicke auf icon:ellipsis-v[role="blue"] und dann auf material:add[] *Zeile hinzufügen*.
.. Klicke auf material:add[] *Spalte hinzufügen*.
.. Ziehe die Spalten, um die Spalten zu vergrößern oder zu verkleinern.

[#place-elements]
=== Elemente platzieren

. Füge Elemente per Drag-and-drop hinzu.
. Klicke auf material:edit[role=blue] und passe die Einstellungen für das Element an.
.. Ändere den Namen.
.. Entscheide, welche Datenfelder das Element enthalten soll.
.. Lege die Reihenfolge der Datenfelder per Drag-and-drop fest.
. Klicke auf icon:close[role="blue"]

[cols="1,4a"]
|====
|Symbol |Erläuterung

| icon:pencil[role="blue"]
|Führt eine Ebene tiefer.

| icon:trash[role="blue"]
|Löscht das Element.

| icon:close[role="blue"]
|Führt eine Ebene höher.
|====

[TIP]
.Kann ich Elemente mehrfach hinzufügen?
======
Die Zahl im grauen Kreis gibt an, wie oft du das Element verwenden kannst. Die meisten Elemente können nur einmal hinzugefügt werden.
======

[#finalise-editing]
=== Bearbeitung abschließen

. Speichere die Ansicht (terra:save[role="darkGrey"]) und schließe den Bearbeitungsmodus (icon:close[role="darkGrey"]).
. Prüfe das Ergebnis im Hauptfenster.
. Falls erforderlich:
.. Klicke erneut auf *Ansicht bearbeiten* (terra:design_inline_edit[]) und passe die Ansicht weiter an.
.. Erlaube anderen Benutzer:innen, die Ansicht zu sehen.

[#editing-functions]
==== Funktionen im Bearbeitungsmodus

[cols="1,4"]
|====
|Symbol |Erläuterung

| icon:reply[role=darkGrey]
|Macht die letzte Änderung rückgängig, soweit die betreffende Änderung noch nicht gespeichert wurde.

| icon:share[role=darkGrey]
|Stellt eine rückgängig gemachte Änderung wieder her.

| icon:caret-down[role="darkGrey"]
|Eine Liste der Ansichten.
Der Name der aktuell geöffneten Ansicht wird angezeigt.
Klicke auf icon:caret-down[role="darkGrey"], um zu einer anderen Ansicht zu wechseln oder eine <<#create-new-view, neue Ansicht>> zu erstellen.

| terra:items_incoming_history[]
|Setzt die Ansicht auf den Stand zurück, der beim letzten Speichern vorhanden war.

| terra:save[role="darkGrey"]
|Speichert die Änderungen, die an der Ansicht vorgenommenen wurden.

| terra:close[]
|Schließt den Bearbeitungsmodus.
Falls nicht gespeicherte Änderungen vorhanden sind, wird eine Sicherheitsabfrage angezeigt.
|====

[#900]
==== Rechtevergabe

Welche Benutzer:innen oder Rollen sollen die Ansicht sehen dürfen?
Du kannst den Zugriff auf jede Ansicht einzeln gewähren bzw. einschränken.

[tabs]
====
Benutzer::
+
--

. Klicke auf *Ansicht bearbeiten* (terra:design_inline_edit[]).
. Klicke auf terra:open_external_link[] *Rechteverwaltung*.
. Wähle *Benutzer*, um den Zugang für eine:n bestimmte:n Benutzer:in zu gewähren. +
→ Das Menü *Einrichtung » Einstellungen » Benutzer » Rechte » Benutzer* öffnet sich in einem neuen Tab.
. Suche (material:search[]) und öffne das betreffende Benutzer:innenkonto.
. Klicke auf *Ansichten*.
. Erweitere die Listeneinträge (icon:chevron-right[role="darkGrey"]) und wähle die Ansichten (material:check_box[role=skyBlue]), auf die die Benutzer:in Zugriff haben soll.
. Speichere (material:save[]) die Einstellungen.

Weitere Informationen zu Benutzer:innenkonten und Zugriffsrechten findest du xref:business-entscheidungen:benutzerkonten-zugaenge.adoc#112[hier].

--
Rollen::
+
--

. Klicke auf *Ansicht bearbeiten* (terra:design_inline_edit[]).
. Klicke auf terra:open_external_link[] *Rechteverwaltung*.
. Wähle *Rollen*, um den Zugang für eine ganze Benutzer:innenrolle zu gewähren. +
→ Das Menü *Einrichtung » Einstellungen » Benutzer » Rechte » Rollen* öffnet sich in einem neuen Tab.
. Suche (material:search[]) und öffne die betreffende Benutzer:innenrolle.
. Klicke auf *Ansichten*.
. Erweitere die Listeneinträge (icon:chevron-right[role="darkGrey"]) und wähle die Ansichten (material:check_box[role=skyBlue]), auf die die Benutzer:innenrolle Zugriff haben soll.
. Speichere (material:save[]) die Einstellungen.

Weitere Informationen zu Benutzer:innenkonten und Zugriffsrechten findest du xref:business-entscheidungen:benutzerkonten-zugaenge.adoc#112[hier].

--
====

[#30]
== Zahlungen zuordnen

Es gibt mehrere Möglichkeiten, um unzugeordnete Zahlungen einem Auftrag zuzuordnen. Im Menü *Aufträge » Zahlungsverkehr* kannst du Zahlungen entweder direkt in der Übersichtstabelle zuordnen oder du gehst in die Detailansicht einer Zahlung.

[TIP]
.Empfehlung: Unzugeordnete Zahlungen einmal wöchentlich bereinigen
====
Wir empfehlen, unzugeordnete Zahlungen mindestens einmal wöchentlich zu bearbeiten und zu bereinigen, damit  der Überblick im Tagesgeschäft nicht verloren geht.
====

Eine Zuordnung in der Übersichtstabelle funktioniert über die direkte Eingabe der Auftrags-ID. Dies ist ein einfacher und schneller Weg, wenn du

* bereits weißt, welchem Auftrag die Zahlung zugeordnet werden soll
* sonst keine weiteren Informationen zur Zahlung benötigst
* die Auftrags-ID zur Hand hast.

Gehe wie im Folgenden beschrieben vor, um eine Zahlung in der Übersichtstabelle zuzuordnen.

[.instruction]
Zahlung direkt anhand der Auftrags-ID in der Übersichtstabelle zuordnen:

. Öffne das Menü *Aufträge » Zahlungsverkehr*.
. Suche (material:search[]) die gewünschte Zahlung wie im Kapitel <<#20, Zahlungen suchen>> beschrieben.
. Gib in der Zeile der unzugeordneten Zahlung im Feld *Auftrags-ID* direkt die entsprechende ID des Auftrages, dem die Zahlung zugeordnet werden soll, ein.
. Drücke die *Entertaste* zum Speichern. +
→ Die Zahlung ist zugeordnet und die Übersicht wird aktualisiert.

Wenn eine schnelle Zuordnung in der Übersichtstabelle nicht möglich ist oder du detailliertere Informationen zu einer Zahlung brauchst, gehe in die Detailansicht einer Zahlung. Klicke dafür in der Übersicht auf die Zeile der entsprechenden Zahlung oder direkt auf die Zahlungs-ID. Wenn du in der Übersichtstabelle auf die Aktion *Zahlung zuordnen* (material:credit_card[]) klickst, wird ebenfalls die Detailansicht der Zahlung geöffnet.
Um eine Zahlung aus der Detailansicht heraus zuzuordnen, gehe wie im Folgenden beschrieben vor.

[.instruction]
Zahlung in Detailansicht zuordnen:

. Öffne das Menü *Aufträge » Zahlungsverkehr*.
. Suche (material:search[]) die gewünschte Zahlung wie im Kapitel <<#20, Zahlungen suchen>> beschrieben.
. Öffne die Zahlung, indem du entweder in der Zeile der unzugeordneten Zahlung, die du zuordnen möchtest, auf die Zahlungs-ID oder auf *Zahlung zuordnen* (material:credit_card[]) klickst. +
→ Du wirst weitergeleitet zum Bereich *Zuordnung* dieser Zahlung. +
→ Die Aufträge mit der höchsten Übereinstimmung werden dort angezeigt.
. Wähle den passenden Auftrag und klicke auf *Zahlung zuordnen* (material:credit_card[]). +
→ Die Zahlung ist nun dem ausgewählten Auftrag zugeordnet. Es wird nur noch die ausgewählte Zuordnung angezeigt.

Die Übereinstimmungen zwischen Zahlungen und Aufträgen werden anhand einer Matrix im Hintergrund überprüft. Diese Überprüfung wird ausgelöst, sobald du die Tabelle *Zuordnung* in der Detailansicht einer Zahlung öffnest. Dann werden absteigend maximal die 10 Aufträge mit den höchsten Übereinstimmungsraten angezeigt. +
Sobald du eine Zahlung zugeordnet hast, wird in dieser Tabelle nur noch diese Zuordnung angezeigt. Nur wenn die Zahlung vom Auftrag <<#40, gelöst>> wird, werden hier wieder die höchsten Übereinstimmungen angezeigt.

Für den Fall, dass in der Zuordnungstabelle keine Übereinstimmungen angezeigt werden, hast du weitere Möglichkeiten. Du kannst über das Kontextmenü (material:more_vert[]) folgende Optionen wählen:

* *Auftrags-ID zuordnen*: Wenn du diese Option wählst, öffnet sich ein Bearbeitungsfenster. Hier kannst du direkt die Auftrags-ID des Auftrags, dem die Zahlung zugeordnet werden soll, eingeben. Klicke auf *Zuordnen*, um die Zahlung dem eingegebenen Auftrag zuzuordnen.
* *Suche Aufträge*: Wenn du diese Option wählst, wirst du zur Auftragssuche weitergeleitet. In der Auftragssuche sind die Filter *Kundenname*, *Betrag* sowie *Unbezahlt und Teilzahlung* vorausgewählt. So werden dir gleich möglich passende Aufträge angezeigt. Du kannst die Auftragssuche aber auch anpassen, um den richtigen Auftrag zu finden. Danach kannst du die Auftrags-ID in der Zuordnungstabelle eingeben und so die Zahlung zuordnen.

Einem Auftrag können mehrere Zahlungen zugeordnet werden. Dies kann z.B. vorkommen, wenn mit der ersten Zahlung nicht der gesamte Betrag abgedeckt wurde. Sind einem Auftrag bereits Zahlungen zugeordnet und du möchtest eine weitere zuordnen, muss dies in einer Abfrage bestätigt werden.

[.collapseBox]
.Zuordnungstabelle individualisieren
--

Diese Tabelle lässt sich individuell anpassen. Du kannst wählen, welche Tabellenspalten in welcher Reihenfolge in der Tabelle angezeigt werden sollen. Standardmäßig werden beim Öffnen des Menüs folgende Tabellenspalten angezeigt:

* Übereinstimmungsrate
* Auftrags-ID
* Betrag
* Aktion

Die folgenden Tabellenspalten können ausgewählt werden, werden aber nicht standardmäßig angezeigt:

* Kontakt-ID
* Name des Kontaktes
* Rechnungsnummer

Passe die Tabelle deinen Bedürfnissen und deinem Arbeitsablauf an. Wenn du die Tabelle angepasst hast, wird diese Auswahl gespeichert und bei jedem Öffnen des Menüs so dargestellt. Die Tabelle ist jederzeit anpassbar.

[.instruction]
Tabelle individualisieren:

. Klicke auf *Spalten konfigurieren* (material:settings[]). +
→ Das Fenster *Spalten konfigurieren* öffnet sich.
. Wähle, welche Spalten angezeigt werden sollen.
. Verschiebe (material:drag_indicator[]) die Spalten so, dass sie in der Reihenfolge angezeigt werden, in der du sie brauchst.
. Klicke auf *Bestätigen*, um deine Auswahl zu speichern. +
→ Deine Auswahl ist gespeichert und wird angewendet.

--

[#15]
=== Zahlungen im Auftrag manuell buchen

Wenn du eine Zahlung oder Teilzahlung manuell im Auftrag buchen möchtest, weil z.B. die Ware bei Abholung bar bezahlt wurde oder weil eine Zahlung nicht in der Übersicht zu finden ist, gehe wie im Folgenden beschrieben vor.

[.instruction]
Zahlung buchen:

. Öffne das Menü *Aufträge » Aufträge bearbeiten*.
. Öffne den Auftrag, in dem du eine Zahlung buchen möchtest. +
→ Das Tab *Übersicht* wird geöffnet.
. Wechsle in das Tab *Zahlung*.
. Klicke auf *Zahlung buchen*. +
→ Das Fenster *Zahlung buchen* wird geöffnet.
. Nimm die Einstellungen vor. Beachte dazu die Erläuterungen in <<#tabelle-zahlungen-manuell-buchen>>.
. Klicke auf *Zahlung buchen*. +
→ Die Zahlung wird gebucht und in der Zahlungsübersicht angezeigt.

[[tabelle-zahlungen-manuell-buchen]]
.Zahlungen manuell buchen
[cols="1,3"]
|====
|Einstellung |Erläuterung

| *Betrag*
|Gib den vollen Betrag oder einen Teilbetrag ein, der gebucht werden soll.

| *Haben/Soll*
| Wähle *Haben* oder *Soll*. Die Auswahl richtet sich nach dem offenen Betrag. Standardmäßig ist *Haben* gewählt. Bei negativen offenen Beträgen, z.B. bei einer Überzahlung, ist *Soll* gewählt. Du kannst diese Auswahl ändern.

| *Währung*
|Wähle die Währung, in der die Zahlung vorgenommen werden soll.

| *Wechselkurs*
|Bei Bedarf einen von der aktuellen System-Wechselkurs-Konfiguration abweichenden Wechselkurs eingeben. +
*_Wichtig_*: Wenn die Zahlung in einer anderen Währung als der für die Zahlung eingestellten Währung (xref:payment:waehrungen.adoc#30[Standard-Währung]) gebucht werden soll, z.B. in US-Dollar, wähle unter *Währung* die Option *USD* und gib unter *Betrag* den erhaltenen Betrag ein. +
Wenn der xref:payment:waehrungen.adoc#20[Wechselkurs] im Menü *Einrichtung » Aufträge » Zahlung » Währungen* ermittelt wurde und verwendet werden soll, gib für *Wechselkurs* nichts ein, weil dieser Kurs automatisch angewendet wird. Die Option *Wechselkurs* wird nur benötigt, wenn ein anderer Wechselkurs für diese Zahlung angewendet werden soll, z.B. der Kurs zum Zeitpunkt des Zahlungseingangs. In diesem Fall den zu diesem Zeitpunkt zutreffenden Wechselkurs eingeben.

| *Verwendungszweck*
|Hier ist die Auftrags-ID vorausgefüllt. Du kannst diesen Eintrag anpassen.

| *Zahlungseingang*
|Wähle das Datum des Zahlungseingangs. Standardmäßig ist das aktuelle Datum voreingestellt.
|====

Manuell gebuchte Zahlungseingänge erkennst du an dem Symbol material:extension[] *Manuelle Buchung*.

[#40]
== Zahlungen lösen

Es gibt 2 Möglichkeiten, Zahlungen von einem Auftrag zu lösen. Im Menü *Aufträge » Zahlungsverkehr* kannst du die Zuordnung der Zahlung entweder direkt in der <<#zahlung-loesen-uebersicht, Übersicht>> oder in der <<#zahlung-loesen-detailansicht, Detailansicht>> einer Zahlung aufheben.

[#zahlung-loesen-uebersicht]
=== Zahlung in der Übersicht lösen

[.instruction]
Zahlung in der Übersicht lösen:

. Öffne das Menü *Aufträge » Zahlungsverkehr*.
. Suche (material:search[]) die gewünschte Zahlung wie im Kapitel <<#20, Zahlungen suchen>> beschrieben.
. Klicke in der Zeile der Zahlung, für die du die Zuordnung lösen möchtest, erst auf das Kontextmenü (material:more_vert[]) und dann auf *Zahlung lösen* (material:money_off[]). +
→ Die Zahlung wird vom Auftrag gelöst und wird wieder als unzugeordnete Zahlung angezeigt.

[#zahlung-loesen-detailansicht]
=== Zahlung in der Detailansicht lösen

Eine Zahlung lässt sich auch in der Detailansicht lösen. Gehe dafür wie im Folgenden beschrieben vor.

[.instruction]
Zahlung in Detailansicht lösen:

. Öffne das Menü *Aufträge » Zahlungsverkehr*.
. Suche (material:search[]) die gewünschte Zahlung wie im Kapitel <<#20, Zahlungen suchen>> beschrieben.
. Klicke in die Zeile der Zahlung, für die du die Zuordnung lösen möchtest. +
→ Du wirst weitergeleitet zur Detailansicht dieser Zahlung.
. Öffne die Tabelle *Zuordnung*. +
→ Wenn sich die Tabelle öffnet, wird die bestehende Auftragszuordnung angezeigt.
. Klicke auf *Zahlung lösen* (material:money_off[]). +
→ Die Zahlung wird vom Auftrag gelöst. Es werden wieder die höchsten Übereinstimmungen für diese Zahlung angezeigt.

[IMPORTANT]
.Beachten beim Lösen von Zahlungen
====
Das Lösen von Zahlungen von einem Auftrag ist technisch zu jedem Zeitpunkt möglich, auch wenn die Auftragsbearbeitung schon fortgeschritten oder sogar abgeschlossen ist. Das Lösen von Zahlungen sollte aber nur möglichst gezielt geschehen, weil durch wiederholtes Zuordnen und Lösen Fehler entstehen können, z.B., dass der Auftrag nicht mehr vollständig durch die Zahlung gedeckt wird. Beachte außerdem, dass das Lösen einer Zahlung auch Änderungen an dem Auftrag, von dem die Zahlung gelöst wurde, bewirkt, wie z.B. eine Neuberechnung der Zahlung im Auftrag oder einen Statuswechsel.
====

[#50]
== Zahlungen teilen

Manuell gebuchte Zahlungseingänge, importierte Bankbuchungen sowie EBICS-Zahlungen können im Menü *Aufträge » Zahlungsverkehr* geteilt werden. Das bedeutet, dass der Betrag einer Zahlung auf mehrere Aufträge aufgeteilt werden kann. Beachte, dass Vormerkposten von der Zahlungsaufteilung ausgenommen sind. Um Zahlungen aufzuteilen, gehe wie im Folgenden beschrieben vor.

[.instruction]
Zahlung aufteilen:

. Öffne das Menü *Aufträge » Zahlungsverkehr*.
. Suche (material:search[]) die gewünschte Zahlung wie im Kapitel <<#20, Zahlungen suchen>> beschrieben.
. Klicke in der Zeile der gewünschten Zahlung auf *Zahlung aufteilen* (material:call_split[]). +
→ Du wirst weitergeleitet zu einer eigenen Ansicht, in der du das Teilen vornimmst.
. Suche (material:search[]) anhand der Filter *Auftrags-ID*, *Rechnungsnummer*, *Externe Auftrags-ID*, *Kunden-ID* und *Name* nach den entsprechenden Aufträgen. Du kannst mehrere IDs/Nummern eingeben, indem du sie durch ein Komma separierst.
. Wähle aus den Suchergebnissen die Aufträge, auf die du die Zahlung aufteilen möchtest.
. Klicke auf *Speichern* (material:save[]). +
→ Die Zahlung wird aufgeteilt und den ausgewählten Aufträgen in der Reihenfolge der Tabelle von oben nach unten zugeordnet und du wirst zur Zahlungsübersicht zurückgeleitet. Hier lassen sich die entstandenen Teilzahlungen wie in den anderen Kapiteln beschrieben bearbeiten.

Beim Aufteilen einer Zahlung wird der Betrag dieser Zahlung immer um den jeweiligen Zahlungsbetrag der Aufträge, die beim Aufteilen ausgewählt werden, reduziert. Sowohl der ursprüngliche Gesamtbetrag der Zahlung als auch der Restbetrag werden in dieser Ansicht angezeigt. Wenn ein Restbetrag entsteht, kann dieser erneut aufgeteilt werden.

*_Beispiel:_* Stell dir vor, du möchtest eine Zahlung mit dem Betrag von 120 Euro aufteilen auf Auftrag A, mit einem offenen Rechnungsbetrag von 80 Euro, und Auftrag B, mit einem offenen Rechnungsbetrag von 20 Euro. Durch das Aufteilen und die Auswahl von genau diesen Aufträgen werden Auftrag A = 80 Euro und Auftrag B = 20 Euro zugewiesen. Die durch das Teilen entstehenden Zahlungen sind durch deine Auswahl diesen Aufträgen zugeordnet worden. Es bleibt ein Restbetrag von 20 Euro als nicht zugeordneter Eintrag übrig. Diesen Restbetrag kannst du einem anderen Auftrag zuordnen oder bei Bedarf ebenfalls aufteilen.

[IMPORTANT]
.Aufteilen einer Zahlung rückgängig machen ist nicht möglich
====
Das Aufteilen einer Zahlung kann _nicht_ rückgängig gemacht werden. Um den ursprünglichen Zahlungseingang wiederherzustellen, lösche alle Teilzahlungen. Wenn eine Teilzahlung gelöscht wird, wird der Betrag wieder zur ursprünglichen Zahlung hinzugerechnet. Vor dem Löschen müssen die Teilzahlungen vom Auftrag <<#40, gelöst>> werden, weil nur nicht zugeordnete Zahlungen gelöscht werden können.
====

In der Ansicht zum Teilen einer Zahlung geben die folgenden Infoboxen einen schnellen Überblick über die wichtigsten Informationen:

* Betrag
* Eingangsdatum
* Absender der Zahlung
* Verwendungszweck
* Restbetrag

Optional kannst du über *Ansicht bearbeiten* (terra:design_inline_edit[]) Infoboxen entfernen oder die Anordnung im Portlet verändern, indem du sie per Drag-and-drop verschiebst. Die Namen der Infoboxen können optional ebenfalls angepasst werden. Entscheide in den *Einstellungen* des Portlets außerdem, wie viele Kacheln (Infoboxen) in einer Zeile angezeigt werden sollen.

Die Suchtabelle ist konfigurierbar. Standardmäßig werden alle zur Verfügung stehenden Spalten angezeigt:

* Auftrags-ID
* Kontakt-ID
* Name
* Rechnungsnummer
* Herkunft
* Auftragsdatum
* Offener Betrag

Mit der Funktion *Spalten konfigurieren* (material:settings[]) kannst du selbst bestimmen, welche Spalten in welcher Reihenfolge angezeigt werden. +
*_Optional:_* Lege über *Ansicht bearbeiten* (terra:design_inline_edit[]) in den *Einstellungen* des Portlets *Suche* fest, ob das Portlet beim Öffnen der Ansicht *Zahlung teilen* standardmäßig ausgeklappt oder eingeklappt sein soll. Nutze dafür die Option *Portlet eingeklappt*. +
Möchtest du den Namen des Portlets ändern? Dann gib im Feld *Titel* den gewünschten Namen ein.

[#60]
== Zahlungen löschen

Du kannst eine Zahlung nur löschen, wenn sie _keinem_ Auftrag zugeordnet ist und _keine_ untergeordneten Zahlungen existieren, die aus dem Teilen der Zahlung entstanden sind. Das Löschen kann entweder direkt in der <<#zahlung-loeschen-uebersicht, Übersicht>> oder in der <<#zahlung-loeschen-detailansicht, Detailansicht>> der Zahlung vorgenommen werden.

[#zahlung-loeschen-uebersicht]
=== Zahlung in der Übersicht löschen

[.instruction]
Zahlung in der Übersicht löschen:

. Öffne das Menü *Aufträge » Zahlungsverkehr*.
. Klicke in der Zeile der Zahlung, die du löschen möchtest, erst auf das Kontextmenü (material:more_vert[]) und dann auf *Zahlung löschen* (material:delete[]). +
→ Die Abfrage *Zahlung löschen* wird geöffnet.
. Klicke in der Abfrage auf *Ja*. +
→ Die Zahlung wird gelöscht und die Übersicht aktualisiert.

[.collapseBox]
.Ich möchte eine Zahlung löschen, aber die Löschen-Funktion ist deaktiviert. Was kann ich tun?
--
Zahlungen können nur gelöscht werden, wenn sie keinem Auftrag zugeordnet sind und keine untergeordneten Zahlungen existieren, die aus dem Teilen einer Zahlung entstanden sind. Wenn etwas davon zutrifft, ist die Funktion *Zahlung löschen* (material:delete[]) nicht verfügbar. Wenn du die Zahlung dennoch löschen möchtest, musst du dafür sorgen, dass die Zahlung weder zugeordnet ist, noch zugehörige Teilzahlungen existieren. Gehe dafür wie im Folgenden beschrieben vor:

* Zahlung ist einem Auftrag zugeordnet: <<#40, Löse>> die Zahlung vom Auftrag. Prüfe vorher genau, ob das Lösen der Zahlung vom Auftrag ohne Bedenken durchgeführt werden kann. +
→ Die Zahlung kann nun gelöscht werden.
* Zahlung wurde geteilt und Teilzahlungen existieren: Du musst zuerst die Teilzahlungen löschen. Dies geht nur, wenn die Teilzahlungen _keinem_ Auftrag zugeordnet sind. Wenn die Teilzahlungen zugeordnet sind, musst du die Zahlungen erst vom jeweiligen Auftrag <<#40, lösen>>. Prüfe vorher genau, ob das Lösen der Zahlung vom Auftrag ohne Bedenken durchgeführt werden kann. Lösche danach die Teilzahlungen. +
→ Die ursprüngliche Zahlung kann nun gelöscht werden.
--

[#zahlung-loeschen-detailansicht]
=== Zahlung in der Detailansicht löschen

[.instruction]
Zahlung in der Detailansicht löschen:

. Öffne das Menü *Aufträge » Zahlungsverkehr*.
. Klicke in die Zeile der Zahlung, die du löschen möchtest. +
→ Du wirst weitergeleitet zur Detailansicht dieser Zahlung.
. Klicke über den Zahlungsdetails auf *Zahlung löschen* (material:delete[]). +
→ Die Abfrage *Zahlung löschen* wird geöffnet.
. Klicke in der Abfrage auf *Ja*. +
→ Die Zahlung wird gelöscht und du wirst zur aktualisierten Übersicht zurückgeleitet.

[.collapseBox]
.Ich möchte eine Zahlung löschen, aber die Löschen-Funktion ist deaktiviert. Was kann ich tun?
--
Zahlungen können nur gelöscht werden, wenn sie keinem Auftrag zugeordnet sind und keine untergeordneten Zahlungen existieren, die aus dem Teilen einer Zahlung entstanden sind. Wenn etwas davon zutrifft, ist die Funktion *Zahlung löschen* (material:delete[]) nicht verfügbar. Wenn du die Zahlung dennoch löschen möchtest, musst du dafür sorgen, dass die Zahlung weder zugeordnet ist, noch zugehörige Teilzahlungen existieren. Gehe dafür wie im Folgenden beschrieben vor:

* Zahlung ist einem Auftrag zugeordnet: <<#40, Löse>> die Zahlung vom Auftrag. Prüfe vorher genau, ob das Lösen der Zahlung vom Auftrag ohne Bedenken durchgeführt werden kann. +
→ Die Zahlung kann nun gelöscht werden.
* Zahlung wurde geteilt und Teilzahlungen existieren: Du musst zuerst die Teilzahlungen löschen. Dies geht nur, wenn die Teilzahlungen _keinem_ Auftrag zugeordnet sind. Wenn die Teilzahlungen zugeordnet sind, musst du die Zahlungen erst vom jeweiligen Auftrag <<#40, lösen>>. Prüfe vorher genau, ob das Lösen der Zahlung vom Auftrag ohne Bedenken durchgeführt werden kann. Lösche danach die Teilzahlungen. +
→ Die ursprüngliche Zahlung kann nun gelöscht werden.
--

[#70]
== Gruppenfunktion nutzen

Mit der Gruppenfunktion bearbeitest du beliebig viele Zahlungen gleichzeitig. Um die Gruppenfunktion nutzen zu können, muss mindestens eine Zahlung ausgewählt sein. Nutze die <<#20, Suche>>, um die gewünschten Zahlungen zu filtern. Nachdem du die gewünschten Zahlungen ausgewählt hast, kannst du diese entweder alle auf einmal automatisch zuordnen oder sie alle auf einmal löschen. Denke daran, dass nur unzugeordnete Zahlungen gelöscht werden können.

Gehe wie im Folgenden beschrieben vor, um Zahlungen mit der Gruppenfunktion automatisch zuzuordnen oder zu löschen.

[.instruction]
Zahlungen per Gruppenfunktion bearbeiten:

. Öffne das Menü *Aufträge » Zahlungsverkehr*.
. Wähle die Zahlungseingänge (material:check_box[role=skyBlue]), die du zuordnen oder löschen möchtest.
. Klicke über der Übersichtstabelle entweder auf *Zahlungen löschen* (material:delete[]) oder auf *Zahlungen automatisch zuordnen* (material:credit_card[]). +
→ Du musst das Löschen oder das Zuordnen in einer Abfrage bestätigen oder ablehnen.
. Nachdem du die Aktion ausgeführt hast, wird angezeigt, wie viele der ausgewählten Zahlungen automatisch zugeordnet oder gelöscht wurden.

[TIP]
.Zahlungen, die einem Auftrag zugeordnet sind, können nicht gelöscht werden
====
Es kann vorkommen, dass nicht die gesamte Auswahl bearbeitet werden konnte. Zum Beispiel könnte eine oder mehrere der Zahlungen, die du löschen möchtest, einem Auftrag zugeordnet sein. Dann können Zahlungen _nicht_ gelöscht werden. Wenn du aufgrund der Anzeige genauere Informationen haben möchtest, kannst du diese im Log einsehen. Gehe dafür ins Menü *Daten » Log*.
====

Beachte, dass die automatische Zuordnung von der <<#intable-match-automatic-assignment, Einstellung>> *Übereinstimmung für automatische Zuordnung (0.7 - 1.0)* im Menü *Einrichtung » Aufträge » Zahlung » Eingänge* abhängt. Der Wert 0.7 steht für 70% Übereinstimmung, der Wert 1.0 für 100% Übereinstimmung. Wenn bei der automatischen Zuordnung per <<#70, Gruppenfunktion>> dann mehr als ein Auftrag mit der gleichen Übereinstimmungsrate ermittelt wird, kann die Zahlung _nicht_ zugeordnet werden. Umgekehrt bedeutet dies, dass eine Zahlung nur automatisch zugeordnet wird, wenn ein einziger Auftrag mit der gewählten Übereinstimmungsrate ermittelt wird.

[#80]
== Detailansicht einer Zahlung

Neben den Funktionen <<#30, Zahlungen zuordnen>>, <<#40, Zahlungen lösen>> und <<#60, Zahlungen löschen>> bietet die Detailansicht einer Zahlung in verschiedenen Portlets alle mit dieser Zahlung verknüpften Informationen. Mit <<#payments-myview, MyView>> kannst du die Elemente in der Detailansicht nach deinen eigenen Bedürfnissen gestalten und anordnen.

[#details]
=== Details

In der Standardansicht werden im Portlet *Details* folgende grundlegende Informationen zu einer Zahlung aufgelistet:

* Zahlungsart
* Eingangsdatum
* Transaktions-ID
* Verwendungszweck

*_Optional:_* Füge über *Ansicht bearbeiten* (terra:design_inline_edit[]) noch das Element *Absender der Zahlung* hinzu oder entferne andere Elemente. Verändere die Anordnung der Elemente im Portlet, indem du sie per Drag-and-drop verschiebst. +
Lege in den *Einstellungen* des Portlets außerdem fest, ob das Portlet beim Öffnen der Detailansicht einer Zahlung standardmäßig ausgeklappt oder eingeklappt sein soll. Nutze dafür die Option *Portlet eingeklappt*. +
Möchtest du den Namen des Portlets ändern? Dann gib im Feld *Titel* den gewünschten Namen ein.

.Portlet Details bearbeiten
image::payment:portlet-details-bearbeiten.png[]

[#info-boxes]
=== Infoboxen

Infoboxen geben einen schnellen Überblick über wichtige Zahlungsinformationen. In der Standardansicht werden die Infoboxen *Betrag in Fremdwährung* (die Währung, in der die Zahlung ausgeführt wurde), *Status* und *Zahlungsart* angezeigt. +
Der Status der Zahlung wird zusätzlich über einen farbigen Statusbalken an der Infobox *Status* ausgedrückt:

* Grün = Die Zahlung wurde verarbeitet. Steht für entweder freigegeben, erfasst oder erstattet.
* Orange = Die Zahlung ist in Bearbeitung. Steht entweder für warten auf Erneuerung, warten auf Bestätigung oder teilweise erfasst.
* Rot = Die Zahlung wurde nicht verarbeitet. Steht entweder für abgelehnt, storniert oder abgelaufen.

Optional kannst du über *Ansicht bearbeiten* (terra:design_inline_edit[]) Elemente entfernen oder die folgenden Infoboxen noch als zusätzliche Elemente zu diesem Portlet hinzufügen:

* Eingangsdatum
* Wechselkurs
* Zuordnungsdatum
* Transaktions-ID
* Verwendungszweck
* Absender der Zahlung
* Betrag in Systemwährung

Verändere die Anordnung der Elemente im Portlet, indem du sie per Drag-and-drop verschiebst. Entscheide in den *Einstellungen* des Portlets außerdem, wie viele Kacheln (Infoboxen) in einer Zeile angezeigt werden sollen.

.Portlet Infoboxen bearbeiten
image::payment:portlet-infoboxen-bearbeiten.png[]

[#assignment]
=== Zuordnung

Das Portlet *Zuordnung* bietet eine Auflistung der höchsten Übereinstimmungen mit Aufträgen für unzugeordnete Zahlungen. Wenn eine Zahlung bereits zugeordnet ist, wird hier nur dieser entsprechende Eintrag angezeigt. Nur wenn die Zahlung vom Auftrag <<#40, gelöst>> wird, werden hier wieder die höchsten Übereinstimmungen angezeigt. +
Die Übereinstimmungen zwischen Zahlungen und Aufträgen werden anhand einer Matrix im Hintergrund überprüft. Diese Überprüfung wird ausgelöst, sobald du diesen Bereich *Zuordnung* öffnest. Dann werden absteigend maximal die 10 Aufträge mit den höchsten Übereinstimmungsraten angezeigt.

Außerdem kannst du eine zugeordnete Zahlung in der Zuordnungstabelle lösen. Klicke dafür auf *Zahlung lösen* (material:money_off[]). Beachte allerdings, dass das <<#40, Lösen von Zahlungen>> nicht unbedacht geschehen sollte.

Die Zuordnungstabelle ist konfigurierbar. Standardmäßig werden alle zur Verfügung stehenden Spalten angezeigt:

* Übereinstimmungsrate
* Auftrags-ID
* Betrag
* Kontakt-ID
* Name des Kontaktes

Mit der Funktion *Spalten konfigurieren* (material:settings[]) kannst du selbst bestimmen, welche Spalten in welcher Reihenfolge angezeigt werden. +
*_Optional:_* Lege über *Ansicht bearbeiten* (terra:design_inline_edit[]) in den *Einstellungen* des Portlets *Zuordnung* fest, ob das Portlet beim Öffnen der Detailansicht einer Zahlung standardmäßig ausgeklappt oder eingeklappt sein soll. Nutze dafür die Option *Portlet eingeklappt*. +
Möchtest du den Namen des Portlets ändern? Dann gib im Feld *Titel* den gewünschten Namen ein.

.Portlet-Einstellungen
image::payment:portlet-einstellungen.png[]

[#payment-history]
=== Zahlungshistorie

Das Portlet *Historie* bietet eine Übersicht über alle Aktionen, die in Zusammenhang mit dieser Zahlung ausgeführt wurden. Angezeigt wird auch, wer oder was (z.B. durch ein Plugin) die Aktion zu welchem Zeitpunkt ausgeführt hat, sodass eine Nachvollziehbarkeit immer gewährleistet ist.

Du siehst auf einen Blick, wann (Datum) von wem (Benutzer:in oder sonstige Quelle, wie z.B. ein Plugin) was (Aktion und Wert, z.B. Zugeordnet | Order ID: xy) mit der Zahlung gemacht wurde. Du kannst der Zahlungshistorie z.B. folgende Einträge entnehmen:

* Importdatum der Zahlung
* Informationen über die Zuordnung einer Zahlung zu einem Auftrag
* Informationen über die Lösung einer Zahlung von einem Auftrag
* Währungsänderungen
* Wechselkurse
* Änderungen in Beträgen
* Statusänderungen
* Hinzufügen/Ändern von Eigenschaften


Die Tabelle ist konfigurierbar. Standardmäßig werden mit *Datum*, *Benutzer / Quelle*, *Aktion* und *Wert* alle zur Verfügung stehenden Spalten angezeigt. +
Beachte, dass die Einträge in der Spalte *Wert* immer auf Englisch sind, weil diese Daten direkt aus der Datenbank entnommen werden. Über *Spalten konfigurieren* (material:settings[]) kannst du selbst bestimmen, welche Spalten in welcher Reihenfolge angezeigt werden.

*_Optional:_* Lege über *Ansicht bearbeiten* (terra:design_inline_edit[]) in den *Einstellungen* des Portlets *Historie* fest, ob das Portlet beim Öffnen der Detailansicht einer Zahlung standardmäßig ausgeklappt oder eingeklappt sein soll. Nutze dafür die Option *Portlet eingeklappt*. +
Möchtest du den Namen des Portlets ändern? Dann gib im Feld *Titel* den gewünschten Namen ein.

[#properties]
=== Eigenschaften

Das Portlet *Eigenschaften* (= Properties) zeigt alle weiteren Informationen, die die Zahlung betreffen. Diese Informationen gehen in der Regel über die Details hinaus. Welche Informationen hier angezeigt werden, hängt von der Zahlung selber, z.B. der Zahlungsart und welche Informationen vom Zahlungsanbieter übermittelt werden, ab.

*_Optional:_* Lege über *Ansicht bearbeiten* (terra:design_inline_edit[]) in den *Einstellungen* des Portlets *Eigenschaften* fest, ob das Portlet beim Öffnen der Detailansicht einer Zahlung standardmäßig ausgeklappt oder eingeklappt sein soll. Nutze dafür die Option *Portlet eingeklappt*. +
Möchtest du den Namen des Portlets ändern? Dann gib im Feld *Titel* den gewünschten Namen ein.

[#100]
== Zahlungseingänge auf dem Dashboard anzeigen

Auf dem xref:willkommen:system-personalisieren.adoc#110[Dashboard] deines plentymarkets Backends kannst du das Element *Zahlungen* hinzufügen. In diesem Element findest du Informationen zu unzugeordneten Zahlungen sowie alle Zahlungseingänge vom vorherigen und aktuellen Tag. Wenn du dieses Element nicht auf deiner Startseite verwenden möchtest, gelangst du über *Aufträge » Zahlungsverkehr* und durch die Verwendung der <<#20, Suchfilter>> zu den gleichen Ergebnissen.

Es empfiehlt sich, vor der Auftragsbearbeitung einen Blick auf die unzugeordneten Zahlungen zu werfen. Prüfe, ob Zahlungseingänge aus *Vorkasse* darunter sind, die aufgrund von Betrag und Buchungstext zweifelsfrei einem Auftrag zugeordnet werden können. Dies erspart deinen Kund:innen längere Wartezeiten und dir unliebsame Reklamationen.

[TIP]
.Empfehlung: Unzugeordnete Zahlungen einmal wöchentlich bereinigen
====
Wir empfehlen, unzugeordnete Zahlungen mindestens einmal wöchentlich zu bearbeiten und zu bereinigen, damit  der Überblick im Tagesgeschäft nicht verloren geht. Wie du unzugeordnete Zahlungen und Buchungen den Aufträgen zuweist, erfährst du im Kapitel <<#30, Zahlungen zuordnen>>.
====

[TIP]
.Zahlungen von SOFORT Überweisung
====
Zahlungen von SOFORT Überweisung werden unmittelbar nach dem Zahlungsvorgang per Schnittstelle bestätigt, tauchen dann aber erneut als Bankbuchungen im System auf. Diese Bankbuchungen kannst du aus der Liste der unzugeordneten Zahlungen löschen, weil den Aufträgen die Zahlung ja bereits zugewiesen wurde.
====
